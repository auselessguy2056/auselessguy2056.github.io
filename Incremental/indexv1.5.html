<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ultimate Incremental Resource Game</title>
    <meta http-equiv='cache-control' content='no-cache'>
    <meta http-equiv='expires' content='0'>
    <meta http-equiv='pragma' content='no-cache'>
    <style>
        /* Existing CSS */
        #notification-area {
            position: fixed;
            bottom: 0px;
            right: 10px;
            width: 250px;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
        }
        #notification-area .notification {
            position: relative;
            padding: 15px 10px;
            background: #111;
            color: #f5f5f5;
            font-family: "Raleway";
            font-size: 14px;
            font-weight: 600;
            border-radius: 5px;
            margin: 5px 0px;
            opacity: 0;
            left: 20px;
            animation: showNotification 500ms ease-in-out forwards;
        }
        @-webkit-keyframes fadeInFromNone {
            0% { display: none; opacity: 1; }
            50% { display: none; opacity: 1; }
            100% { display: block; opacity: 0; }
        }
        #notification-area .fade_out { -webkit-animation: fadeInFromNone 5s ease-out; }
        @keyframes showNotification {
            to { opacity: 1; left: 0px; }
        }
        #notification-area .notification.success { background: #389838; }
        body {
            font-family: 'Inter', Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 20px;
            background-color: #e0f2f7;
            color: #263238;
            line-height: 1.6;
            overflow-y: auto; /* Changed from hidden to auto to enable vertical scrolling */
        }
        h1 {
            color: #007bff;
            margin-bottom: 25px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }
        .resource-section {
            background-color: #ffffff;
            border: 1px solid #b3e5fc;
            border-radius: 12px;
            padding: 25px;
            margin: 15px 0;
            width: 90%;
            max-width: 600px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
            text-align: center;
            transition: transform 0.2s ease-in-out;
        }
        .resource-section:hover { transform: translateY(-3px); }
        h2 {
            color: #0056b3;
            margin-top: 0;
            margin-bottom: 15px;
        }
        p {
            font-size: 1.1em;
            margin-bottom: 8px;
        }
        button {
            background-color: #2196f3;
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            margin-top: 10px;
            transition: background-color 0.2s ease-in-out, transform 0.1s ease-in-out;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        button:hover {
            background-color: #1976d2;
            transform: translateY(-1px);
        }
        button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
            box-shadow: none;
            transform: none;
        }
        hr {
            border: 0;
            height: 2px;
            background-image: linear-gradient(to right, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0));
            width: 70%;
            margin: 30px 0;
        }
        @media (max-width: 768px) {
            .resource-section { width: 95%; padding: 18px; }
            h1 { font-size: 1.8em; }
            h2 { font-size: 1.4em; }
            button { padding: 10px 15px; font-size: 0.9em; }
        }
        .critical-feedback {
            color: #ff0000;
            font-weight: bold;
            position: relative;
            top: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s ease-out;
        }
        .critical-feedback .close-btn {
            background: none;
            border: none;
            color: #ff0000;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            margin-left: 10px;
            padding: 0 5px;
            line-height: 1;
            transition: color 0.2s ease;
        }
        .critical-feedback .close-btn:hover { color: #cc0000; }
        .lore-display {
            margin-top: 15px;
            padding: 10px 15px;
            background-color: #e8f5e9;
            border: 1px solid #c8e6c9;
            border-radius: 8px;
            font-style: italic;
            color: #388e3c;
            font-size: 0.95em;
            text-align: left;
            min-height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        footer {
            margin-top: 40px;
            padding: 20px;
            background-color: #263238;
            color: #ffffff;
            text-align: center;
            width: 100%;
            border-radius: 8px;
            box-shadow: 0 -2px 8px rgba(0, 0, 0, 0.15);
        }
        footer a {
            color: #81d4fa;
            text-decoration: none;
            font-weight: bold;
            transition: color 0.2s ease;
        }
        footer a:hover {
            color: #e0f7fa;
            text-decoration: underline;
        }

        /* New CSS for the star */
        #clickableStar {
            position: fixed !important; /* Ensure fixed positioning */
            font-size: 4em !important; /* Ensure large size */
            width: 4em !important; /* Explicit width */
            height: 4em !important; /* Explicit height */
            display: flex !important; /* Use flex to center the emoji if it's smaller */
            justify-content: center !important;
            align-items: center !important;
            cursor: pointer;
            z-index: 9999 !important; /* Very high z-index to be on top */
            opacity: 0;
            transition: opacity 0.5s ease-in-out; /* Smooth fade in/out */
            text-shadow: 0 0 10px rgba(255, 255, 0, 0.8); /* Glow effect */
            background-color: rgba(255, 255, 0, 0.2) !important; /* Semi-transparent yellow background for visibility */
            border: 2px solid gold !important; /* Gold border for visibility */
            border-radius: 50% !important; /* Make it round if it's a div */
            padding: 10px !important; /* Add some padding */
            box-sizing: border-box !important; /* Include padding in element's total width and height */
        }
    </style>
</head>
<body>
    <h1 id="gameTitle">Ultimate Incremental Resource Game</h1>

    <!-- Add the star element -->
    <div id="clickableStar">⭐</div>

    <div class="resource-section" style="background-color: #e3f2fd; border-color: #90caf9;">
        <h2 id="gameStatsTitle">Game Stats</h2>
        <p><span id="timePlayedLabel">Time Played</span>: <span id="timePlayed">00:00:00</span></p>
        <button id="saveGameBtn">Save Game</button>
        <button id="loadGameBtn">Load Game</button>
    </div>

    <hr>

    <!-- Language Selection Section -->
    <div class="resource-section" style="background-color: #e0f7fa; border-color: #80deea;">
        <h2 id="languageSectionTitle">Language</h2>
        <p><span id="currentLanguageLabel">Current Language</span>: <span id="currentLanguageDisplay">English</span></p>
        <button id="languageToggleBtn">Toggle Language</button>
    </div>

    <hr>

    <!-- Text-to-Speech Section -->
    <div class="resource-section" style="background-color: #e0f2f7; border-color: #b3e5fc;">
        <h2 id="ttsTitle">Text-to-Speech</h2>
        <p><span id="ttsStatusLabel">Status</span>: <span id="ttsStatus">Off</span></p>
        <button id="ttsToggleBtn">Toggle Text-to-Speech</button>
    </div>

    <hr>

    <!-- New Quiz Section -->
    <div class="resource-section" style="background-color: #ffe0b2; border-color: #ffcc80;">
        <h2 id="quizTitle">Quiz Time!</h2>
        <p id="quizQuestion">Loading question...</p>
        <input type="text" id="quizAnswerInput" placeholder="Type your answer here" style="padding: 8px; width: 80%; border-radius: 5px; border: 1px solid #ccc; margin-bottom: 10px;">
        <button id="submitQuizAnswer">Submit Answer</button>
        <p id="quizFeedback" style="font-weight: bold; margin-top: 10px;"></p>
    </div>

    <hr>
    <div id="notification-area">
    </div>
    <!-- Stage 1 Section -->
    <div class="resource-section" style="background-color: #c8e6c9; border-color: #a5d6a7;">
        <h2 id="stage1Title">Stage 1</h2>
        <p id="stage1Description">Collect Basic Resources</p>
    </div>

    <hr>

    <div class="resource-section">
        <h2 id="woodTitle">Wood</h2>
        <p><span id="currentWoodLabel">Current Wood</span>: <span id="woodCount">0</span></p>
        <p><span id="woodPerSecondLabel">Wood per second</span>: <span id="woodPerSecond">0</span></p>
        <button id="addWood"><span id="chopWoodBtnText">Chop Wood</span> (<span id="chopPowerDisplay">+1</span>)</button>
        <br>
        <button id="upgradeChopPower"><span id="upgradeChopPowerBtnText">Upgrade Chop Power</span> (<span id="chopUpgradeCostLabel">Cost</span>: <span id="chopUpgradeCost">10</span> <span id="woodCostUnit">Wood</span>)</button>
        <br>
        <button id="buyWoodPerSecond"><span id="automateWoodBtnText">Automate Wood</span> (+5 <span id="woodAutoUnit">Wood/sec</span>) (<span id="woodAutomationCostLabel">Cost</span>: <span id="woodPerSecondCost">10000</span> <span id="woodAutoCostUnit">Wood</span>)</button>
        <!-- Critical hit feedback display with close button -->
        <div id="criticalHitFeedback" class="critical-feedback" style="opacity: 0;">
            <span id="criticalHitText"></span>
            <button class="close-btn" id="closeCriticalFeedback">X</button>
        </div>
        <button class="generate-lore-btn" data-resource="Wood"><span id="generateLoreBtnText">Tạo Lore</span> ✨</button>
        <div id="woodLore" class="lore-display"></div>
    </div>

    <hr>

    <div class="resource-section">
        <h2 id="stoneTitle">Stone</h2>
        <p><span id="currentStoneLabel">Current Stone</span>: <span id="stoneCount">0</span></p>
        <p><span id="stonePerSecondLabel">Stone per second</span>: <span id="stonePerSecond">0</span></p>
        <button id="buyStone"><span id="buyStoneBtnText">Convert 1000 Wood to 1 Stone</span></button>
        <button class="generate-lore-btn" data-resource="Stone"><span id="generateLoreBtnTextStone">Tạo Lore</span> ✨</button>
        <div id="stoneLore" class="lore-display"></div>
    </div>

    <hr>

    <div class="resource-section">
        <h2 id="ironTitle">Iron</h2>
        <p><span id="currentIronLabel">Current Iron</span>: <span id="ironCount">0</span></p>
        <p><span id="ironPerSecondLabel">Iron per second</span>: <span id="ironPerSecond">0</span></p>
        <button id="buyIron"><span id="buyIronBtnText">Convert 1000 Stone to 1 Iron</span></button>
        <button class="generate-lore-btn" data-resource="Iron"><span id="generateLoreBtnTextIron">Tạo Lore</span> ✨</button>
        <div id="ironLore" class="lore-display"></div>
    </div>

    <hr>

    <div class="resource-section">
        <h2 id="alloyTitle">Alloy</h2>
        <p><span id="currentAlloyLabel">Current Alloy</span>: <span id="alloyCount">0</span></p>
        <p><span id="alloyPerSecondLabel">Alloy per second</span>: <span id="alloyPerSecond">0</span></p>
        <button id="buyAlloy"><span id="buyAlloyBtnText">Convert 1000 Iron to 1 Alloy</span></button>
        <button class="generate-lore-btn" data-resource="Alloy"><span id="generateLoreBtnTextAlloy">Tạo Lore</span> ✨</button>
        <div id="alloyLore" class="lore-display"></div>
    </div>

    <hr>

    <div class="resource-section">
        <h2 id="circuitryTitle">Circuitry</h2>
        <p><span id="currentCircuitryLabel">Current Circuitry</span>: <span id="circuitryCount">0</span></p>
        <p><span id="circuitryPerSecondLabel">Circuitry per second</span>: <span id="circuitryPerSecond">0</span></p>
        <button id="buyCircuitry"><span id="buyCircuitryBtnText">Convert 1000 Alloy to 1 Circuitry</span></button>
        <button class="generate-lore-btn" data-resource="Circuitry"><span id="generateLoreBtnTextCircuitry">Tạo Lore</span> ✨</button>
        <div id="circuitryLore" class="lore-display"></div>
    </div>

    <hr>

    <div class="resource-section">
        <h2 id="aiCoreTitle">AI Core</h2>
        <p><span id="currentAICoreLabel">Current AI Core</span>: <span id="aiCoreCount">0</span></p>
        <p><span id="aiCorePerSecondLabel">AI Core per second</span>: <span id="aiCorePerSecond">0</span></p>
        <button id="buyAICore"><span id="buyAICoreBtnText">Convert 1000 Circuitry to 1 AI Core</span></button>
        <button class="generate-lore-btn" data-resource="AI Core"><span id="generateLoreBtnTextAICore">Tạo Lore</span> ✨</button>
        <div id="aiCoreLore" class="lore-display"></div>
    </div>

    <hr>

    <div class="resource-section">
        <h2 id="consciousnessTitle">Consciousness</h2>
        <p><span id="currentConsciousnessLabel">Current Consciousness</span>: <span id="consciousnessCount">0</span></p>
        <p><span id="consciousnessPerSecondLabel">Consciousness per second</span>: <span id="consciousnessPerSecond">0</span></p>
        <button id="buyConsciousness"><span id="buyConsciousnessBtnText">Convert 1000 AI Core to 1 Consciousness</span></button>
        <button class="generate-lore-btn" data-resource="Consciousness"><span id="generateLoreBtnTextConsciousness">Tạo Lore</span> ✨</button>
        <div id="consciousnessLore" class="lore-display"></div>
    </div>

    <hr>

    <div class="resource-section">
        <h2 id="realityShardTitle">Reality Shard</h2>
        <p><span id="currentRealityShardLabel">Current Reality Shard</span>: <span id="realityShardCount">0</span></p>
        <p><span id="realityShardPerSecondLabel">Reality Shard per second</span>: <span id="realityShardPerSecond">0</span></p>
        <button id="buyRealityShard"><span id="buyRealityShardBtnText">Convert 1000 Consciousness to 1 Reality Shard</span></button>
        <button class="generate-lore-btn" data-resource="Reality Shard"><span id="generateLoreBtnTextRealityShard">Tạo Lore</span> ✨</button>
        <div id="realityShardLore" class="lore-display"></div>
    </div>

    <hr>

    <div class="resource-section">
        <h2 id="paradoxTitle">Paradox</h2>
        <p><span id="currentParadoxLabel">Current Paradox</span>: <span id="paradoxCount">0</span></p>
        <p><span id="paradoxPerSecondLabel">Paradox per second</span>: <span id="paradoxPerSecond">0</span></p>
        <button id="buyParadox"><span id="buyParadoxBtnText">Convert 1000 Reality Shard to 1 Paradox</span></button>
        <button class="generate-lore-btn" data-resource="Paradox"><span id="generateLoreBtnTextParadox">Tạo Lore</span> ✨</button>
        <div id="paradoxLore" class="lore-display"></div>
    </div>

    <hr>

    <div class="resource-section">
        <h2 id="singularityTitle">Singularity</h2>
        <p><span id="currentSingularityLabel">Current Singularity</span>: <span id="singularityCount">0</span></p>
        <p><span id="singularityPerSecondLabel">Singularity per second</span>: <span id="singularityPerSecond">0</span></p>
        <button id="buySingularity"><span id="buySingularityBtnText">Convert 1000 Paradox to 1 Singularity</span></button>
        <button class="generate-lore-btn" data-resource="Singularity"><span id="generateLoreBtnTextSingularity">Tạo Lore</span> ✨</button>
        <div id="singularityLore" class="lore-display"></div>
    </div>

    <hr>

    <div class="resource-section">
        <h2 id="multiverseTitle">Multiverse</h2>
        <p><span id="currentMultiverseLabel">Current Multiverse</span>: <span id="multiverseCount">0</span></p>
        <p><span id="multiversePerSecondLabel">Multiverse per second</span>: <span id="multiversePerSecond">0</span></p>
        <button id="buyMultiverse"><span id="buyMultiverseBtnText">Convert 1000 Singularity to 1 Multiverse</span></button>
        <button class="generate-lore-btn" data-resource="Multiverse"><span id="generateLoreBtnTextMultiverse">Tạo Lore</span> ✨</button>
        <div id="multiverseLore" class="lore-display"></div>
    </div>

    <hr>

    <div class="resource-section">
        <h2 id="omniscienceTitle">Omniscience</h2>
        <p><span id="currentOmniscienceLabel">Current Omniscience</span>: <span id="omniscienceCount">0</span></p>
        <p><span id="omnisciencePerSecondLabel">Omniscience per second</span>: <span id="omnisciencePerSecond">0</span></p>
        <button id="buyOmniscience"><span id="buyOmniscienceBtnText">Convert 1000 Multiverse to 1 Omniscience</span></button>
        <button class="generate-lore-btn" data-resource="Omniscience"><span id="generateLoreBtnTextOmniscience">Tạo Lore</span> ✨</button>
        <div id="omniscienceLore" class = "lore-display"></div>
    </div>

    <hr>

    <div class="resource-section">
        <h2 id="genesisTitle">Genesis</h2>
        <p><span id="currentGenesisLabel">Current Genesis</span>: <span id="genesisCount">0</span></p>
        <p><span id="genesisPerSecondLabel">Genesis per second</span>: <span id="genesisPerSecond">0</span></p>
        <button id="buyGenesis"><span id="buyGenesisBtnText">Convert 1000 Omniscience to 1 Genesis</span></button>
        <button class="generate-lore-btn" data-resource="Genesis"><span id="generateLoreBtnTextGenesis">Tạo Lore</span> ✨</button>
        <div id="genesisLore" class="lore-display"></div>
    </div>

    <hr>

    <div class="resource-section">
        <h2 id="voidTitle">Void</h2>
        <p><span id="currentVoidLabel">Current Void</span>: <span id="voidCount">0</span></p>
        <p><span id="voidPerSecondLabel">Void per second</span>: <span id="voidPerSecond">0</span></p>
        <button id="buyVoid"><span id="buyVoidBtnText">Convert 1000 Genesis to 1 Void</span></button>
        <button class="generate-lore-btn" data-resource="Void"><span id="generateLoreBtnTextVoid">Tạo Lore</span> ✨</button>
        <div id="voidLore" class="lore-display"></div>
    </div>

    <hr>

    <div class="resource-section" style="background-color: #c3e6cb; border-color: #81c784;">
        <h2 id="stage2Title">Stage 2: Reality Transformation</h2>
        <p id="stage2Description">You are shaping the universe! The cost of high-level resources has increased significantly.</p>
    </div>

    <hr>

    <div class="resource-section" style="background-color: #d4edda; border-color: #28a745;">
        <h2 id="theAllTitle">The All</h2>
        <p><span id="currentTheAllLabel">Current The All</span>: <span id="theAllCount">0</span></p>
        <p><span id="theAllPerSecondLabel">The All per second</span>: <span id="theAllPerSecond">0</span></p>
        <button id="buyTheAll"><span id="buyTheAllBtnText">Convert <span id="theAllCost">10000</span> Void to 1 The All</span></button>
        <button class="generate-lore-btn" data-resource="The All"><span id="generateLoreBtnTextTheAll">Tạo Lore</span> ✨</button>
        <div id="theAllLore" class="lore-display"></div>
    </div>

    <hr>

    <div class="resource-section" style="background-color: #d4edda; border-color: #28a745;">
        <h2 id="transcendenceTitle">Transcendence</h2>
        <p><span id="currentTranscendenceLabel">Current Transcendence</span>: <span id="transcendenceCount">0</span></p>
        <p><span id="transcendencePerSecondLabel">Transcendence per second</span>: <span id="transcendencePerSecond">0</span></p>
        <button id="buyTranscendence"><span id="buyTranscendenceBtnText">Convert <span id="transcendenceCost">10000</span> The All to 1 Transcendence</span></button>
        <button class="generate-lore-btn" data-resource="Transcendence"><span id="generateLoreBtnTextTranscendence">Tạo Lore</span> ✨</button>
        <div id="transcendenceLore" class="lore-display"></div>
    </div>

    <hr>

    <div class="resource-section" style="background-color: #d4edda; border-color: #28a745;">
        <h2 id="theAbsoluteTitle">The Absolute</h2>
        <p><span id="currentTheAbsoluteLabel">Current The Absolute</span>: <span id="theAbsoluteCount">0</span></p>
        <p><span id="theAbsolutePerSecondLabel">The Absolute per second</span>: <span id="theAbsolutePerSecond">0</span></p>
        <button id="buyTheAbsolute"><span id="buyTheAbsoluteBtnText">Convert <span id="theAbsoluteCost">10000</span> Transcendence to 1 The Absolute</span></button>
        <button class="generate-lore-btn" data-resource="The Absolute"><span id="generateLoreBtnTextTheAbsolute">Tạo Lore</span> ✨</button>
        <div id="theAbsoluteLore" class="lore-display"></div>
    </div>

    <hr>

    <div class="resource-section" style="background-color: #d4edda; border-color: #28a745;">
        <h2 id="theEndTitle">The End</h2>
        <p><span id="currentTheEndLabel">Current The End</span>: <span id="theEndCount">0</span></p>
        <p><span id="theEndPerSecondLabel">The End per second</span>: <span id="theEndPerSecond">0</span></p>
        <button id="buyTheEnd"><span id="buyTheEndBtnText">Convert <span id="theEndCost">10000</span> The Absolute to 1 The End</span></button>
        <button class="generate-lore-btn" data-resource="The End"><span id="generateLoreBtnTextTheEnd">Tạo Lore</span> ✨</button>
        <div id="theEndLore" class="lore-display"></div>
    </div>

    <hr>

    <div class="resource-section" style="background-color: #d4edda; border-color: #28a745;">
        <h2 id="theNewBeginningTitle">The New Beginning</h2>
        <p><span id="currentTheNewBeginningLabel">Current The New Beginning</span>: <span id="theNewBeginningCount">0</span></p>
        <p><span id="theNewBeginningPerSecondLabel">The New Beginning per second</span>: <span id="theNewBeginningPerSecond">0</span></p>
        <button id="buyTheNewBeginning"><span id="buyTheNewBeginningBtnText">Convert <span id="theNewBeginningCost">10000</span> The End to 1 The New Beginning</span></button>
        <button class="generate-lore-btn" data-resource="The New Beginning"><span id="generateLoreBtnTextTheNewBeginning">Tạo Lore</span> ✨</button>
        <div id="theNewBeginningLore" class="lore-display"></div>
    </div>

    <hr>

    <div class="resource-section" style="background-color: #d4edda; border-color: #28a745;">
        <h2 id="theArchitectsWillTitle">The Architect's Will</h2>
        <p><span id="currentTheArchitectsWillLabel">Current The Architect's Will</span>: <span id="theArchitectsWillCount">0</span></p>
        <p><span id="theArchitectsWillPerSecondLabel">The Architect's Will per second</span>: <span id="theArchitectsWillPerSecond">0</span></p>
        <button id="buyTheArchitectsWill"><span id="buyTheArchitectsWillBtnText">Convert <span id="theArchitectsWillCost">10000</span> The New Beginning to 1 The Architect's Will</span></button>
        <button class="generate-lore-btn" data-resource="The Architect's Will"><span id="generateLoreBtnTextTheArchitectsWill">Tạo Lore</span> ✨</button>
        <div id="theArchitectsWillLore" class="lore-display"></div>
    </div>

    <hr>

    <!-- NEW RESOURCE SECTION: The Omniverse -->
    <div class="resource-section" style="background-color: #d4edda; border-color: #28a745;">
        <h2 id="theOmniverseTitle">The Omniverse</h2>
        <p><span id="currentTheOmniverseLabel">Current The Omniverse</span>: <span id="theOmniverseCount">0</span></p>
        <p><span id="theOmniversePerSecondLabel">The Omniverse per second</span>: <span id="theOmniversePerSecond">0</span></p>
        <button id="buyTheOmniverse"><span id="buyTheOmniverseBtnText">Convert <span id="theOmniverseCost">10000</span> The Architect's Will to 1 The Omniverse</span></button>
        <button class="generate-lore-btn" data-resource="The Omniverse"><span id="generateLoreBtnTextTheOmniverse">Tạo Lore</span> ✨</button>
        <div id="theOmniverseLore" class="lore-display"></div>
    </div>

    <hr>

    <!-- Stage 3 Section -->
    <div class="resource-section" style="background-color: #fff3cd; border-color: #ffc107;">
        <h2 id="stage3Title">Stage 3: Universal Unification</h2>
        <p id="stage3Description">The final frontier of creation. Your will becomes reality!</p>
    </div>

    <hr>

    <!-- NEW RESOURCES BELOW -->

    <div class="resource-section" style="background-color: #ffe0b2; border-color: #ffcc80;">
        <h2 id="theBoundlessVoidTitle">The Boundless Void</h2>
        <p><span id="currentTheBoundlessVoidLabel">Current The Boundless Void</span>: <span id="theBoundlessVoidCount">0</span></p>
        <p><span id="theBoundlessVoidPerSecondLabel">The Boundless Void per second</span>: <span id="theBoundlessVoidPerSecond">0</span></p>
        <button id="buyTheBoundlessVoid"><span id="buyTheBoundlessVoidBtnText">Convert <span id="theBoundlessVoidCost">100000</span> The Omniverse to 1 The Boundless Void</span></button>
        <button class="generate-lore-btn" data-resource="The Boundless Void"><span id="generateLoreBtnTextTheBoundlessVoid">Tạo Lore</span> ✨</button>
        <div id="theBoundlessVoidLore" class="lore-display"></div>
    </div>

    <hr>

    <div class="resource-section" style="background-color: #ffe0b2; border-color: #ffcc80;">
        <h2 id="cosmicFabricTitle">Cosmic Fabric</h2>
        <p><span id="currentCosmicFabricLabel">Current Cosmic Fabric</span>: <span id="cosmicFabricCount">0</span></p>
        <p><span id="cosmicFabricPerSecondLabel">Cosmic Fabric per second</span>: <span id="cosmicFabricPerSecond">0</span></p>
        <button id="buyCosmicFabric"><span id="buyCosmicFabricBtnText">Convert <span id="cosmicFabricCost">100000</span> The Boundless Void to 1 Cosmic Fabric</span></button>
        <button class="generate-lore-btn" data-resource="Cosmic Fabric"><span id="generateLoreBtnTextCosmicFabric">Tạo Lore</span> ✨</button>
        <div id="cosmicFabricLore" class="lore-display"></div>
    </div>

    <hr>

    <div class="resource-section" style="background-color: #ffe0b2; border-color: #ffcc80;">
        <h2 id="infiniteNexusTitle">Infinite Nexus</h2>
        <p><span id="currentInfiniteNexusLabel">Current Infinite Nexus</span>: <span id="infiniteNexusCount">0</span></p>
        <p><span id="infiniteNexusPerSecondLabel">Infinite Nexus per second</span>: <span id="infiniteNexusPerSecond">0</span></p>
        <button id="buyInfiniteNexus"><span id="buyInfiniteNexusBtnText">Convert <span id="infiniteNexusCost">100000</span> Cosmic Fabric to 1 Infinite Nexus</span></button>
        <button class="generate-lore-btn" data-resource="Infinite Nexus"><span id="generateLoreBtnTextInfiniteNexus">Tạo Lore</span> ✨</button>
        <div id="infiniteNexusLore" class="lore-display"></div>
    </div>

    <hr>

    <div class="resource-section" style="background-color: #ffe0b2; border-color: #ffcc80;">
        <h2 id="eternalEchoTitle">Eternal Echo</h2>
        <p><span id="currentEternalEchoLabel">Current Eternal Echo</span>: <span id="eternalEchoCount">0</span></p>
        <p><span id="eternalEchoPerSecondLabel">Eternal Echo per second</span>: <span id="eternalEchoPerSecond">0</span></p>
        <button id="buyEternalEcho"><span id="buyEternalEchoBtnText">Convert <span id="eternalEchoCost">100000</span> Infinite Nexus to 1 Eternal Echo</span></button>
        <button class="generate-lore-btn" data-resource="Eternal Echo"><span id="generateLoreBtnTextEternalEcho">Tạo Lore</span> ✨</button>
        <div id="eternalEchoLore" class="lore-display"></div>
    </div>

    <hr>

    <div class="resource-section" style="background-color: #ffe0b2; border-color: #ffcc80;">
        <h2 id="zenithOfCreationTitle">Zenith of Creation</h2>
        <p><span id="currentZenithOfCreationLabel">Current Zenith of Creation</span>: <span id="zenithOfCreationCount">0</span></p>
        <p><span id="zenithOfCreationPerSecondLabel">Zenith of Creation per second</span>: <span id="zenithOfCreationPerSecond">0</span></p>
        <button id="buyZenithOfCreation"><span id="buyZenithOfCreationBtnText">Convert <span id="zenithOfCreationCost">100000</span> Eternal Echo to 1 Zenith of Creation</span></button>
        <button class="generate-lore-btn" data-resource="Zenith of Creation"><span id="generateLoreBtnTextZenithOfCreation">Tạo Lore</span> ✨</button>
        <div id="zenithOfCreationLore" class="lore-display"></div>
    </div>

    <hr>

    <!-- Stage 4 Section -->
    <div class="resource-section" style="background-color: #f8d7da; border-color: #dc3545;">
        <h2 id="stage4Title">Stage 4: Cosmic Awakening</h2>
        <p id="stage4Description">Unraveling the ultimate secrets of existence!</p>
    </div>

    <hr>

    <!-- EVEN MORE NEW RESOURCES BELOW -->

    <div class="resource-section" style="background-color: #f8d7da; border-color: #dc3545;">
        <h2 id="universalSingularityTitle">Universal Singularity</h2>
        <p><span id="currentUniversalSingularityLabel">Current Universal Singularity</span>: <span id="universalSingularityCount">0</span></p>
        <p><span id="universalSingularityPerSecondLabel">Universal Singularity per second</span>: <span id="universalSingularityPerSecond">0</span></p>
        <button id="buyUniversalSingularity"><span id="buyUniversalSingularityBtnText">Convert <span id="universalSingularityCost">1000000</span> Zenith of Creation to 1 Universal Singularity</span></button>
        <button class="generate-lore-btn" data-resource="Universal Singularity"><span id="generateLoreBtnTextUniversalSingularity">Tạo Lore</span> ✨</button>
        <div id="universalSingularityLore" class="lore-display"></div>
    </div>

    <hr>

    <div class="resource-section" style="background-color: #f8d7da; border-color: #dc3545;">
        <h2 id="existentialFabricTitle">Existential Fabric</h2>
        <p><span id="currentExistentialFabricLabel">Current Existential Fabric</span>: <span id="existentialFabricCount">0</span></p>
        <p><span id="existentialFabricPerSecondLabel">Existential Fabric per second</span>: <span id="existentialFabricPerSecond">0</span></p>
        <button id="buyExistentialFabric"><span id="buyExistentialFabricBtnText">Convert <span id="existentialFabricCost">1000000</span> Universal Singularity to 1 Existential Fabric</span></button>
        <button class="generate-lore-btn" data-resource="Existential Fabric"><span id="generateLoreBtnTextExistentialFabric">Tạo Lore</span> ✨</button>
        <div id="existentialFabricLore" class="lore-display"></div>
    </div>

    <hr>

    <div class="resource-section" style="background-color: #f8d7da; border-color: #dc3545;">
        <h2 id="temporalFluxTitle">Temporal Flux</h2>
        <p><span id="currentTemporalFluxLabel">Current Temporal Flux</span>: <span id="temporalFluxCount">0</span></p>
        <p><span id="temporalFluxPerSecondLabel">Temporal Flux per second</span>: <span id="temporalFluxPerSecond">0</span></p>
        <button id="buyTemporalFlux"><span id="buyTemporalFluxBtnText">Convert <span id="temporalFluxCost">1000000</span> Existential Fabric to 1 Temporal Flux</span></button>
        <button class="generate-lore-btn" data-resource="Temporal Flux"><span id="generateLoreBtnTextTemporalFlux">Tạo Lore</span> ✨</button>
        <div id="temporalFluxLore" class="lore-display"></div>
    </div>

    <hr>

    <div class="resource-section" style="background-color: #f8d7da; border-color: #dc3545;">
        <h2 id="multidimensionalHarmonyTitle">Multidimensional Harmony</h2>
        <p><span id="currentMultidimensionalHarmonyLabel">Current Multidimensional Harmony</span>: <span id="multidimensionalHarmonyCount">0</span></p>
        <p><span id="multidimensionalHarmonyPerSecondLabel">Multidimensional Harmony per second</span>: <span id="multidimensionalHarmonyPerSecond">0</span></p>
        <button id="buyMultidimensionalHarmony"><span id="buyMultidimensionalHarmonyBtnText">Convert <span id="multidimensionalHarmonyCost">1000000</span> Temporal Flux to 1 Multidimensional Harmony</span></button>
        <button class="generate-lore-btn" data-resource="Multidimensional Harmony"><span id="generateLoreBtnTextMultidimensionalHarmony">Tạo Lore</span> ✨</button>
        <div id="multidimensionalHarmonyLore" class="lore-display"></div>
    </div>

    <hr>

    <div class="resource-section" style="background-color: #f8d7da; border-color: #dc3545;">
        <h2 id="cosmicAwakeningTitle">Cosmic Awakening</h2>
        <p><span id="currentCosmicAwakeningLabel">Current Cosmic Awakening</span>: <span id="cosmicAwakeningCount">0</span></p>
        <p><span id="cosmicAwakeningPerSecondLabel">Cosmic Awakening per second</span>: <span id="cosmicAwakeningPerSecond">0</span></p>
        <button id="buyCosmicAwakening"><span id="buyCosmicAwakeningBtnText">Convert <span id="cosmicAwakeningCost">1000000</span> Multidimensional Harmony to 1 Cosmic Awakening</span></button>
        <button class="generate-lore-btn" data-resource="Cosmic Awakening"><span id="generateLoreBtnTextCosmicAwakening">Tạo Lore</span> ✨</button>
        <div id="cosmicAwakeningLore" class="lore-display"></div>
    </div>

    <hr>

    <div class="resource-section" style="background-color: #f8d7da; border-color: #dc3545;">
        <h2 id="divineSparkTitle">Divine Spark</h2>
        <p><span id="currentDivineSparkLabel">Current Divine Spark</span>: <span id="divineSparkCount">0</span></p>
        <p><span id="divineSparkPerSecondLabel">Divine Spark per second</span>: <span id="divineSparkPerSecond">0</span></p>
        <button id="buyDivineSpark"><span id="buyDivineSparkBtnText">Convert <span id="divineSparkCost">1000000</span> Cosmic Awakening to 1 Divine Spark</span></button>
        <button class="generate-lore-btn" data-resource="Divine Spark"><span id="generateLoreBtnTextDivineSpark">Tạo Lore</span> ✨</button>
        <div id="divineSparkLore" class="lore-display"></div>
    </div>

    <hr>

    <!-- Stage 5 Section -->
    <div class="resource-section" style="background-color: #e0f7fa; border-color: #80deea;">
        <h2 id="stage5Title">Stage 5: Cosmic Genesis</h2>
        <p id="stage5Description">You are now weaving the very fabric of the cosmos!</p>
    </div>

    <hr>

    <div class="resource-section" style="background-color: #b2ebf2; border-color: #4dd0e1;">
        <h2 id="cosmicDustTitle">Cosmic Dust</h2>
        <p><span id="currentCosmicDustLabel">Current Cosmic Dust</span>: <span id="cosmicDustCount">0</span></p>
        <p><span id="cosmicDustPerSecondLabel">Cosmic Dust per second</span>: <span id="cosmicDustPerSecond">0</span></p>
        <button id="buyCosmicDust"><span id="buyCosmicDustBtnText">Convert <span id="cosmicDustCost">5000000</span> Divine Spark to 1 Cosmic Dust</span></button>
        <button class="generate-lore-btn" data-resource="Cosmic Dust"><span id="generateLoreBtnTextCosmicDust">Tạo Lore</span> ✨</button>
        <div id="cosmicDustLore" class="lore-display"></div>
    </div>

    <hr>

    <div class="resource-section" style="background-color: #b2ebf2; border-color: #4dd0e1;">
        <h2 id="stellarNucleusTitle">Stellar Nucleus</h2>
        <p><span id="currentStellarNucleusLabel">Current Stellar Nucleus</span>: <span id="stellarNucleusCount">0</span></p>
        <p><span id="stellarNucleusPerSecondLabel">Stellar Nucleus per second</span>: <span id="stellarNucleusPerSecond">0</span></p>
        <button id="buyStellarNucleus"><span id="buyStellarNucleusBtnText">Convert <span id="stellarNucleusCost">5000000</span> Cosmic Dust to 1 Stellar Nucleus</span></button>
        <button class="generate-lore-btn" data-resource="Stellar Nucleus"><span id="generateLoreBtnTextStellarNucleus">Tạo Lore</span> ✨</button>
        <div id="stellarNucleusLore" class="lore-display"></div>
    </div>

    <hr>

    <div class="resource-section" style="background-color: #b2ebf2; border-color: #4dd0e1;">
        <h2 id="galacticCoreTitle">Galactic Core</h2>
        <p><span id="currentGalacticCoreLabel">Current Galactic Core</span>: <span id="galacticCoreCount">0</span></p>
        <p><span id="galacticCorePerSecondLabel">Galactic Core per second</span>: <span id="galacticCorePerSecond">0</span></p>
        <button id="buyGalacticCore"><span id="buyGalacticCoreBtnText">Convert <span id="galacticCoreCost">5000000</span> Stellar Nucleus to 1 Galactic Core</span></button>
        <button class="generate-lore-btn" data-resource="Galactic Core"><span id="generateLoreBtnTextGalacticCore">Tạo Lore</span> ✨</button>
        <div id="galacticCoreLore" class="lore-display"></div>
    </div>

    <hr>

    <!-- Stage 6 Section -->
    <div class="resource-section" style="background-color: #e8eaf6; border-color: #9fa8da;">
        <h2 id="stage6Title">Stage 6: Interdimensional Weave</h2>
        <p id="stage6Description">You are manipulating the very fabric of reality across dimensions!</p>
    </div>

    <hr>

    <div class="resource-section" style="background-color: #c5cae9; border-color: #7986cb;">
        <h2 id="quantumEntanglementTitle">Quantum Entanglement</h2>
        <p><span id="currentQuantumEntanglementLabel">Current Quantum Entanglement</span>: <span id="quantumEntanglementCount">0</span></p>
        <p><span id="quantumEntanglementPerSecondLabel">Quantum Entanglement per second</span>: <span id="quantumEntanglementPerSecond">0</span></p>
        <button id="buyQuantumEntanglement"><span id="buyQuantumEntanglementBtnText">Convert <span id="quantumEntanglementCost">10000000</span> Galactic Core to 1 Quantum Entanglement</span></button>
        <button class="generate-lore-btn" data-resource="Quantum Entanglement"><span id="generateLoreBtnTextQuantumEntanglement">Tạo Lore</span> ✨</button>
        <div id="quantumEntanglementLore" class="lore-display"></div>
    </div>

    <hr>

    <div class="resource-section" style="background-color: #c5cae9; border-color: #7986cb;">
        <h2 id="dimensionalRiftTitle">Dimensional Rift</h2>
        <p><span id="currentDimensionalRiftLabel">Current Dimensional Rift</span>: <span id="dimensionalRiftCount">0</span></p>
        <p><span id="dimensionalRiftPerSecondLabel">Dimensional Rift per second</span>: <span id="dimensionalRiftPerSecond">0</span></p>
        <button id="buyDimensionalRift"><span id="buyDimensionalRiftBtnText">Convert <span id="dimensionalRiftCost">10000000</span> Quantum Entanglement to 1 Dimensional Rift</span></button>
        <button class="generate-lore-btn" data-resource="Dimensional Rift"><span id="generateLoreBtnTextDimensionalRift">Tạo Lore</span> ✨</button>
        <div id="dimensionalRiftLore" class="lore-display"></div>
    </div>

    <hr>

    <div class="resource-section" style="background-color: #c5cae9; border-color: #7986cb;">
        <h2 id="realityAnchorTitle">Reality Anchor</h2>
        <p><span id="currentRealityAnchorLabel">Current Reality Anchor</span>: <span id="realityAnchorCount">0</span></p>
        <p><span id="realityAnchorPerSecondLabel">Reality Anchor per second</span>: <span id="realityAnchorPerSecond">0</span></p>
        <button id="buyRealityAnchor"><span id="buyRealityAnchorBtnText">Convert <span id="realityAnchorCost">10000000</span> Dimensional Rift to 1 Reality Anchor</span></button>
        <button class="generate-lore-btn" data-resource="Reality Anchor"><span id="generateLoreBtnTextRealityAnchor">Tạo Lore</span> ✨</button>
        <div id="realityAnchorLore" class="lore-display"></div>
    </div>

    <hr>

    <!-- Stage 7 Section -->
    <div class="resource-section" style="background-color: #f3e5f5; border-color: #ce93d8;">
        <h2 id="stage7Title">Stage 7: Absolute Dominion</h2>
        <p id="stage7Description">You are becoming the ultimate power, dictating existence itself!</p>
    </div>

    <hr>

    <div class="resource-section" style="background-color: #e1bee7; border-color: #ba68c8;">
        <h2 id="omniEnergyTitle">Omni-Energy</h2>
        <p><span id="currentOmniEnergyLabel">Current Omni-Energy</span>: <span id="omniEnergyCount">0</span></p>
        <p><span id="omniEnergyPerSecondLabel">Omni-Energy per second</span>: <span id="omniEnergyPerSecond">0</span></p>
        <button id="buyOmniEnergy"><span id="buyOmniEnergyBtnText">Convert <span id="omniEnergyCost">50000000</span> Reality Anchor to 1 Omni-Energy</span></button>
        <button class="generate-lore-btn" data-resource="Omni-Energy"><span id="generateLoreBtnTextOmniEnergy">Tạo Lore</span> ✨</button>
        <div id="omniEnergyLore" class="lore-display"></div>
    </div>

    <hr>

    <div class="resource-section" style="background-color: #e1bee7; border-color: #ba68c8;">
        <h2 id="primeMoverTitle">Prime Mover</h2>
        <p><span id="currentPrimeMoverLabel">Current Prime Mover</span>: <span id="primeMoverCount">0</span></p>
        <p><span id="primeMoverPerSecondLabel">Prime Mover per second</span>: <span id="primeMoverPerSecond">0</span></p>
        <button id="buyPrimeMover"><span id="buyPrimeMoverBtnText">Convert <span id="primeMoverCost">50000000</span> Omni-Energy to 1 Prime Mover</span></button>
        <button class="generate-lore-btn" data-resource="Prime Mover"><span id="generateLoreBtnTextPrimeMover">Tạo Lore</span> ✨</button>
        <div id="primeMoverLore" class="lore-display"></div>
    </div>

    <hr>

    <div class="resource-section" style="background-color: #e1bee7; border-color: #ba68c8;">
        <h2 id="trueCreatorTitle">True Creator</h2>
        <p><span id="currentTrueCreatorLabel">Current True Creator</span>: <span id="trueCreatorCount">0</span></p>
        <p><span id="trueCreatorPerSecondLabel">True Creator per second</span>: <span id="trueCreatorPerSecond">0</span></p>
        <button id="buyTrueCreator"><span id="buyTrueCreatorBtnText">Convert <span id="trueCreatorCost">50000000</span> Prime Mover to 1 True Creator</span></button>
        <button class="generate-lore-btn" data-resource="True Creator"><span id="generateLoreBtnTextTrueCreator">Tạo Lore</span> ✨</button>
        <div id="trueCreatorLore" class="lore-display"></div>
    </div>

    <hr>

    <!-- Stage 8 Section -->
    <div class="resource-section" style="background-color: #fffde7; border-color: #ffe082;">
        <h2 id="stage8Title">Stage 8: Beyond Infinity</h2>
        <p id="stage8Description">You have transcended all limits. The game is nearing its ultimate conclusion!</p>
    </div>

    <hr>

    <div class="resource-section" style="background-color: #fff9c4; border-color: #ffd54f;">
        <h2 id="cosmicSingularityTitle">Cosmic Singularity</h2>
        <p><span id="currentCosmicSingularityLabel">Current Cosmic Singularity</span>: <span id="cosmicSingularityCount">0</span></p>
        <p><span id="cosmicSingularityPerSecondLabel">Cosmic Singularity per second</span>: <span id="cosmicSingularityPerSecond">0</span></p>
        <button id="buyCosmicSingularity"><span id="buyCosmicSingularityBtnText">Convert <span id="cosmicSingularityCost">100000000</span> True Creator to 1 Cosmic Singularity</span></button>
        <button class="generate-lore-btn" data-resource="Cosmic Singularity"><span id="generateLoreBtnTextCosmicSingularity">Tạo Lore</span> ✨</button>
        <div id="cosmicSingularityLore" class="lore-display"></div>
    </div>

    <hr>

    <div class="resource-section" style="background-color: #fff9c4; border-color: #ffd54f;">
        <h2 id="existentialTruthTitle">Existential Truth</h2>
        <p><span id="currentExistentialTruthLabel">Current Existential Truth</span>: <span id="existentialTruthCount">0</span></p>
        <p><span id="existentialTruthPerSecondLabel">Existential Truth per second</span>: <span id="existentialTruthPerSecond">0</span></p>
        <button id="buyExistentialTruth"><span id="buyExistentialTruthBtnText">Convert <span id="existentialTruthCost">100000000</span> Cosmic Singularity to 1 Existential Truth</span></button>
        <button class="generate-lore-btn" data-resource="Existential Truth"><span id="generateLoreBtnTextExistentialTruth">Tạo Lore</span> ✨</button>
        <div id="existentialTruthLore" class="lore-display"></div>
    </div>

    <hr>

    <div class="resource-section" style="background-color: #fff9c4; border-color: #ffd54f;">
        <h2 id="theUltimateFormTitle">The Ultimate Form</h2>
        <p><span id="currentTheUltimateFormLabel">Current The Ultimate Form</span>: <span id="theUltimateFormCount">0</span></p>
        <p><span id="theUltimateFormPerSecondLabel">The Ultimate Form per second</span>: <span id="theUltimateFormPerSecond">0</span></p>
        <button id="buyTheUltimateForm"><span id="buyTheUltimateFormBtnText">Convert <span id="theUltimateFormCost">100000000</span> Existential Truth to 1 The Ultimate Form</span></button>
        <button class="generate-lore-btn" data-resource="The Ultimate Form"><span id="generateLoreBtnTextTheUltimateForm">Tạo Lore</span> ✨</button>
        <div id="theUltimateFormLore" class="lore-display"></div>
    </div>

    <footer>
        <p><span id="discordInviteText">Join our Discord server</span>: <a href="https://discord.gg/5dS34cuKHy" target="_blank">Discord Community</a></p>
    </footer>

    <script>
        // Use an IIFE (Immediately Invoked Function Expression) to encapsulate game state.
        // This makes 'resources' and most internal functions private, preventing direct console manipulation.
        const game = (() => {
            let resources = {
                timePlayed: {
                    hour: 0,
                    minute: 0,
                    second: 0
                },
                lastMessage: "",
                wood: {
                    count: 0,
                    perSecond: 0,
                    manualClickAmount: 1,
                    upgradeCost: 10,
                    upgradeMultiplier: 2,
                    upgradeAmount: 1,
                    automationCost: 10000,
                    automationMultiplier: 1.5,
                    automationAmount: 5,
                    criticalChance: 0.10,
                    criticalMultiplier: 5
                },
                stone: {
                    count: 0,
                    perSecond: 0,
                    conversionCost: 1000,
                    produces: 'stone',
                    perUnitProduction: 1
                },
                iron: {
                    count: 0,
                    perSecond: 0,
                    conversionCost: 1000,
                    produces: 'iron',
                    perUnitProduction: 1
                },
                alloy: {
                    count: 0,
                    perSecond: 0,
                    conversionCost: 1000,
                    produces: 'alloy',
                    perUnitProduction: 1
                },
                circuitry: {
                    count: 0,
                    perSecond: 0,
                    conversionCost: 1000,
                    produces: 'circuitry',
                    perUnitProduction: 1
                },
                aiCore: {
                    count: 0,
                    perSecond: 0,
                    conversionCost: 1000,
                    produces: 'aiCore',
                    perUnitProduction: 1
                },
                consciousness: {
                    count: 0,
                    perSecond: 0,
                    conversionCost: 1000,
                    produces: 'consciousness',
                    perUnitProduction: 1
                },
                realityShard: {
                    count: 0,
                    perSecond: 0,
                    conversionCost: 1000,
                    produces: 'realityShard',
                    perUnitProduction: 1
                },
                paradox: {
                    count: 0,
                    perSecond: 0,
                    conversionCost: 1000,
                    produces: 'paradox',
                    perUnitProduction: 1
                },
                singularity: {
                    count: 0,
                    perSecond: 0,
                    conversionCost: 1000,
                    produces: 'singularity',
                    perUnitProduction: 1
                },
                multiverse: {
                    count: 0,
                    perSecond: 0,
                    conversionCost: 1000,
                    produces: 'multiverse',
                    perUnitProduction: 1
                },
                omniscience: {
                    count: 0,
                    perSecond: 0,
                    conversionCost: 1000,
                    produces: 'omniscience',
                    perUnitProduction: 1
                },
                genesis: {
                    count: 0,
                    perSecond: 0,
                    conversionCost: 1000,
                    produces: 'genesis',
                    perUnitProduction: 1
                },
                void: {
                    count: 0,
                    perSecond: 0,
                    conversionCost: 1000,
                    produces: 'void',
                    perUnitProduction: 1
                },
                theAll: {
                    count: 0,
                    perSecond: 0,
                    conversionCost: 10000,
                    produces: 'theAll',
                    perUnitProduction: 1
                },
                transcendence: {
                    count: 0,
                    perSecond: 0,
                    conversionCost: 10000,
                    produces: 'transcendence',
                    perUnitProduction: 1
                },
                theAbsolute: {
                    count: 0,
                    perSecond: 0,
                    conversionCost: 10000,
                    produces: 'theAbsolute',
                    perUnitProduction: 1
                },
                theEnd: {
                    count: 0,
                    perSecond: 0,
                    conversionCost: 10000,
                    produces: 'theEnd',
                    perUnitProduction: 1
                },
                theNewBeginning: {
                    count: 0,
                    perSecond: 0,
                    conversionCost: 10000,
                    produces: 'theNewBeginning',
                    perUnitProduction: 1
                },
                theArchitectsWill: {
                    count: 0,
                    perSecond: 0,
                    conversionCost: 10000,
                    produces: 'theArchitectsWill',
                    perUnitProduction: 1
                },
                theOmniverse: {
                    count: 0,
                    perSecond: 0,
                    conversionCost: 10000,
                    produces: 'theOmniverse',
                    perUnitProduction: 1
                },
                theBoundlessVoid: {
                    count: 0,
                    perSecond: 0,
                    conversionCost: 100000,
                    produces: 'theBoundlessVoid',
                    perUnitProduction: 1
                },
                cosmicFabric: {
                    count: 0,
                    perSecond: 0,
                    conversionCost: 100000,
                    produces: 'cosmicFabric',
                    perUnitProduction: 1
                },
                infiniteNexus: {
                    count: 0,
                    perSecond: 0,
                    conversionCost: 100000,
                    produces: 'infiniteNexus',
                    perUnitProduction: 1
                },
                eternalEcho: {
                    count: 0,
                    perSecond: 0,
                    conversionCost: 100000,
                    produces: 'eternalEcho',
                    perUnitProduction: 1
                },
                zenithOfCreation: {
                    count: 0,
                    perSecond: 0,
                    conversionCost: 100000,
                    produces: 'zenithOfCreation',
                    perUnitProduction: 1
                },
                universalSingularity: {
                    count: 0,
                    perSecond: 0,
                    conversionCost: 1000000,
                    produces: 'universalSingularity',
                    perUnitProduction: 1
                },
                existentialFabric: {
                    count: 0,
                    perSecond: 0,
                    conversionCost: 1000000,
                    produces: 'existentialFabric',
                    perUnitProduction: 1
                },
                temporalFlux: {
                    count: 0,
                    perSecond: 0,
                    conversionCost: 1000000,
                    produces: 'temporalFlux',
                    perUnitProduction: 1
                },
                multidimensionalHarmony: {
                    count: 0,
                    perSecond: 0,
                    conversionCost: 1000000,
                    produces: 'multidimensionalHarmony',
                    perUnitProduction: 1
                },
                cosmicAwakening: {
                    count: 0,
                    perSecond: 0,
                    conversionCost: 1000000,
                    produces: 'cosmicAwakening',
                    perUnitProduction: 1
                },
                divineSpark: {
                    count: 0,
                    perSecond: 0,
                    conversionCost: 1000000,
                    produces: 'divineSpark',
                    perUnitProduction: 1
                },
                // Stage 5 Resources
                cosmicDust: {
                    count: 0,
                    perSecond: 0,
                    conversionCost: 5000000,
                    produces: 'cosmicDust',
                    perUnitProduction: 1
                },
                stellarNucleus: {
                    count: 0,
                    perSecond: 0,
                    conversionCost: 5000000,
                    produces: 'stellarNucleus',
                    perUnitProduction: 1
                },
                galacticCore: {
                    count: 0,
                    perSecond: 0,
                    conversionCost: 5000000,
                    produces: 'galacticCore',
                    perUnitProduction: 1
                },
                // Stage 6 Resources
                quantumEntanglement: {
                    count: 0,
                    perSecond: 0,
                    conversionCost: 10000000,
                    produces: 'quantumEntanglement',
                    perUnitProduction: 1
                },
                dimensionalRift: {
                    count: 0,
                    perSecond: 0,
                    conversionCost: 10000000,
                    produces: 'dimensionalRift',
                    perUnitProduction: 1
                },
                realityAnchor: {
                    count: 0,
                    perSecond: 0,
                    conversionCost: 10000000,
                    produces: 'realityAnchor',
                    perUnitProduction: 1
                },
                // Stage 7 Resources
                omniEnergy: {
                    count: 0,
                    perSecond: 0,
                    conversionCost: 50000000,
                    produces: 'omniEnergy',
                    perUnitProduction: 1
                },
                primeMover: {
                    count: 0,
                    perSecond: 0,
                    conversionCost: 50000000,
                    produces: 'primeMover',
                    perUnitProduction: 1
                },
                trueCreator: {
                    count: 0,
                    perSecond: 0,
                    conversionCost: 50000000,
                    produces: 'trueCreator',
                    perUnitProduction: 1
                },
                // Stage 8 Resources
                cosmicSingularity: {
                    count: 0,
                    perSecond: 0,
                    conversionCost: 100000000,
                    produces: 'cosmicSingularity',
                    perUnitProduction: 1
                },
                existentialTruth: {
                    count: 0,
                    perSecond: 0,
                    conversionCost: 100000000,
                    produces: 'existentialTruth',
                    perUnitProduction: 1
                },
                theUltimateForm: {
                    count: 0,
                    perSecond: 0,
                    conversionCost: 100000000,
                    produces: 'theUltimateForm',
                    perUnitProduction: 1
                },
                textToSpeechEnabled: false, // New property for TTS toggle
                language: 'en' // New property for current language
            };

            // --- Translations Object ---
            const translations = {
                en: {
                    gameTitle: "Ultimate Incremental Resource Game",
                    gameStatsTitle: "Game Stats",
                    timePlayedLabel: "Time Played",
                    saveGameBtn: "Save Game",
                    loadGameBtn: "Load Game",
                    languageSectionTitle: "Language",
                    currentLanguageLabel: "Current Language",
                    currentLanguageDisplay: "English",
                    languageToggleBtn: "Toggle Language",
                    ttsTitle: "Text-to-Speech",
                    ttsStatusLabel: "Status",
                    ttsToggleBtn: "Toggle Text-to-Speech",
                    quizTitle: "Quiz Time!",
                    quizAnswerInputPlaceholder: "Type your answer here",
                    submitQuizAnswer: "Submit Answer",
                    stage1Title: "Stage 1",
                    stage1Description: "Collect Basic Resources",
                    woodTitle: "Wood",
                    currentWoodLabel: "Current Wood",
                    woodPerSecondLabel: "Wood per second",
                    chopWoodBtnText: "Chop Wood",
                    upgradeChopPowerBtnText: "Upgrade Chop Power",
                    chopUpgradeCostLabel: "Cost",
                    woodCostUnit: "Wood",
                    automateWoodBtnText: "Automate Wood",
                    automateWoodSuccess: "Automate Wood Success",
                    upgradeChopPowerSuccess: "Upgrade Chop Power Success",
     woodAutomationSuccess: "Automate Wood Success",

                    woodAutoUnit: "Wood/sec",
                    woodAutomationCostLabel: "Cost",
                    woodAutoCostUnit: "Wood",
                    criticalHitText: (amount) => `CRITICAL! +${amount} Wood!`,
                    woodUpgradeAlert: (cost) => `Not enough Wood to upgrade Chop Power! You need ${cost} Wood.`,
                    woodAutomationAlert: (cost) => `Not enough Wood to automate production! You need ${cost} Wood.`,
                    stoneTitle: "Stone",
                    currentStoneLabel: "Current Stone",
                    stonePerSecondLabel: "Stone per second",
                    buyStoneBtnText: "Convert 1000 Wood to 1 Stone",
                    ironTitle: "Iron",
                    currentIronLabel: "Current Iron",
                    ironPerSecondLabel: "Iron per second",
                    buyIronBtnText: "Convert 1000 Stone to 1 Iron",
                    alloyTitle: "Alloy",
                    currentAlloyLabel: "Current Alloy",
                    alloyPerSecondLabel: "Alloy per second",
                    buyAlloyBtnText: "Convert 1000 Iron to 1 Alloy",
                    circuitryTitle: "Circuitry",
                    currentCircuitryLabel: "Current Circuitry",
                    circuitryPerSecondLabel: "Circuitry per second",
                    buyCircuitryBtnText: "Convert 1000 Alloy to 1 Circuitry",
                    aiCoreTitle: "AI Core",
                    currentAICoreLabel: "Current AI Core",
                    aiCorePerSecondLabel: "AI Core per second",
                    buyAICoreBtnText: "Convert 1000 Circuitry to 1 AI Core",
                    consciousnessTitle: "Consciousness",
                    currentConsciousnessLabel: "Current Consciousness",
                    consciousnessPerSecondLabel: "Consciousness per second",
                    buyConsciousnessBtnText: "Convert 1000 AI Core to 1 Consciousness",
                    realityShardTitle: "Reality Shard",
                    currentRealityShardLabel: "Current Reality Shard",
                    realityShardPerSecondLabel: "Reality Shard per second",
                    buyRealityShardBtnText: "Convert 1000 Consciousness to 1 Reality Shard",
                    paradoxTitle: "Paradox",
                    currentParadoxLabel: "Current Paradox",
                    paradoxPerSecondLabel: "Paradox per second",
                    buyParadoxBtnText: "Convert 1000 Reality Shard to 1 Paradox",
                    singularityTitle: "Singularity",
                    currentSingularityLabel: "Current Singularity",
                    singularityPerSecondLabel: "Singularity per second",
                    buySingularityBtnText: "Convert 1000 Paradox to 1 Singularity",
                    multiverseTitle: "Multiverse",
                    currentMultiverseLabel: "Current Multiverse",
                    multiversePerSecondLabel: "Multiverse per second",
                    buyMultiverseBtnText: "Convert 1000 Singularity to 1 Multiverse",
                    omniscienceTitle: "Omniscience",
                    currentOmniscienceLabel: "Current Omniscience",
                    omnisciencePerSecondLabel: "Omniscience per second",
                    buyOmniscienceBtnText: "Convert 1000 Multiverse to 1 Omniscience",
                    genesisTitle: "Genesis",
                    currentGenesisLabel: "Current Genesis",
                    genesisPerSecondLabel: "Genesis per second",
                    buyGenesisBtnText: "Convert 1000 Omniscience to 1 Genesis",
                    voidTitle: "Void",
                    currentVoidLabel: "Current Void",
                    voidPerSecondLabel: "Void per second",
                    buyVoidBtnText: "Convert 1000 Genesis to 1 Void",
                    stage2Title: "Stage 2: Reality Transformation",
                    stage2Description: "You are shaping the universe! The cost of high-level resources has increased significantly.",
                    theAllTitle: "The All",
                    currentTheAllLabel: "Current The All",
                    theAllPerSecondLabel: "The All per second",
                    buyTheAllBtnText: (cost) => `Convert ${cost} Void to 1 The All`,
                    transcendenceTitle: "Transcendence",
                    currentTranscendenceLabel: "Current Transcendence",
                    transcendencePerSecondLabel: "Transcendence per second",
                    buyTranscendenceBtnText: (cost) => `Convert ${cost} The All to 1 Transcendence`,
                    theAbsoluteTitle: "The Absolute",
                    currentTheAbsoluteLabel: "Current The Absolute",
                    theAbsolutePerSecondLabel: "The Absolute per second",
                    buyTheAbsoluteBtnText: (cost) => `Convert ${cost} Transcendence to 1 The Absolute`,
                    theEndTitle: "The End",
                    currentTheEndLabel: "Current The End",
                    theEndPerSecondLabel: "The End per second",
                    buyTheEndBtnText: (cost) => `Convert ${cost} The Absolute to 1 The End`,
                    theNewBeginningTitle: "The New Beginning",
                    currentTheNewBeginningLabel: "Current The New Beginning",
                    theNewBeginningPerSecondLabel: "The New Beginning per second",
                    buyTheNewBeginningBtnText: (cost) => `Convert ${cost} The End to 1 The New Beginning`,
                    theArchitectsWillTitle: "The Architect's Will",
                    currentTheArchitectsWillLabel: "Current The Architect's Will",
                    theArchitectsWillPerSecondLabel: "The Architect's Will per second",
                    buyTheArchitectsWillBtnText: (cost) => `Convert ${cost} The New Beginning to 1 The Architect's Will`,
                    theOmniverseTitle: "The Omniverse",
                    currentTheOmniverseLabel: "Current The Omniverse",
                    theOmniversePerSecondLabel: "The Omniverse per second",
                    buyTheOmniverseBtnText: (cost) => `Convert ${cost} The Architect's Will to 1 The Omniverse`,
                    stage3Title: "Stage 3: Universal Unification",
                    stage3Description: "The final frontier of creation. Your will becomes reality!",
                    theBoundlessVoidTitle: "The Boundless Void",
                    currentTheBoundlessVoidLabel: "Current The Boundless Void",
                    theBoundlessVoidPerSecondLabel: "The Boundless Void per second",
                    buyTheBoundlessVoidBtnText: (cost) => `Convert ${cost} The Omniverse to 1 The Boundless Void`,
                    cosmicFabricTitle: "Cosmic Fabric",
                    currentCosmicFabricLabel: "Current Cosmic Fabric",
                    cosmicFabricPerSecondLabel: "Cosmic Fabric per second",
                    buyCosmicFabricBtnText: (cost) => `Convert ${cost} The Boundless Void to 1 Cosmic Fabric`,
                    infiniteNexusTitle: "Infinite Nexus",
                    currentInfiniteNexusLabel: "Current Infinite Nexus",
                    infiniteNexusPerSecondLabel: "Infinite Nexus per second",
                    buyInfiniteNexusBtnText: (cost) => `Convert ${cost} Cosmic Fabric to 1 Infinite Nexus`,
                    eternalEchoTitle: "Eternal Echo",
                    currentEternalEchoLabel: "Current Eternal Echo",
                    eternalEchoPerSecondLabel: "Eternal Echo per second",
                    buyEternalEchoBtnText: (cost) => `Convert ${cost} Infinite Nexus to 1 Eternal Echo`,
                    zenithOfCreationTitle: "Zenith of Creation",
                    currentZenithOfCreationLabel: "Current Zenith of Creation",
                    zenithOfCreationPerSecondLabel: "Zenith of Creation per second",
                    buyZenithOfCreationBtnText: (cost) => `Convert ${cost} Eternal Echo to 1 Zenith of Creation`,
                    stage4Title: "Stage 4: Cosmic Awakening",
                    stage4Description: "Unraveling the ultimate secrets of existence!",
                    universalSingularityTitle: "Universal Singularity",
                    currentUniversalSingularityLabel: "Current Universal Singularity",
                    universalSingularityPerSecondLabel: "Universal Singularity per second",
                    buyUniversalSingularityBtnText: (cost) => `Convert ${cost} Zenith of Creation to 1 Universal Singularity`,
                    existentialFabricTitle: "Existential Fabric",
                    currentExistentialFabricLabel: "Current Existential Fabric",
                    existentialFabricPerSecondLabel: "Existential Fabric per second",
                    buyExistentialFabricBtnText: (cost) => `Convert ${cost} Universal Singularity to 1 Existential Fabric`,
                    temporalFluxTitle: "Temporal Flux",
                    currentTemporalFluxLabel: "Current Temporal Flux",
                    temporalFluxPerSecondLabel: "Temporal Flux per second",
                    buyTemporalFluxBtnText: (cost) => `Convert ${cost} Existential Fabric to 1 Temporal Flux`,
                    multidimensionalHarmonyTitle: "Multidimensional Harmony",
                    currentMultidimensionalHarmonyLabel: "Current Multidimensional Harmony",
                    multidimensionalHarmonyPerSecondLabel: "Multidimensional Harmony per second",
                    buyMultidimensionalHarmonyBtnText: (cost) => `Convert ${cost} Temporal Flux to 1 Multidimensional Harmony`,
                    cosmicAwakeningTitle: "Cosmic Awakening",
                    currentCosmicAwakeningLabel: "Current Cosmic Awakening",
                    cosmicAwakeningPerSecondLabel: "Cosmic Awakening per second",
                    buyCosmicAwakeningBtnText: (cost) => `Convert ${cost} Multidimensional Harmony to 1 Cosmic Awakening`,
                    divineSparkTitle: "Divine Spark",
                    currentDivineSparkLabel: "Current Divine Spark",
                    divineSparkPerSecondLabel: "Divine Spark per second",
                    buyDivineSparkBtnText: (cost) => `Convert ${cost} Cosmic Awakening to 1 Divine Spark`,
                    stage5Title: "Stage 5: Cosmic Genesis",
                    stage5Description: "You are now weaving the very fabric of the cosmos!",
                    cosmicDustTitle: "Cosmic Dust",
                    currentCosmicDustLabel: "Current Cosmic Dust",
                    cosmicDustPerSecondLabel: "Cosmic Dust per second",
                    buyCosmicDustBtnText: (cost) => `Convert ${cost} Divine Spark to 1 Cosmic Dust`,
                    stellarNucleusTitle: "Stellar Nucleus",
                    currentStellarNucleusLabel: "Current Stellar Nucleus",
                    stellarNucleusPerSecondLabel: "Stellar Nucleus per second",
                    buyStellarNucleusBtnText: (cost) => `Convert ${cost} Cosmic Dust to 1 Stellar Nucleus`,
                    galacticCoreTitle: "Galactic Core",
                    currentGalacticCoreLabel: "Current Galactic Core",
                    galacticCorePerSecondLabel: "Galactic Core per second",
                    buyGalacticCoreBtnText: (cost) => `Convert ${cost} Stellar Nucleus to 1 Galactic Core`,
                    stage6Title: "Stage 6: Interdimensional Weave",
                    stage6Description: "You are manipulating the very fabric of reality across dimensions!",
                    quantumEntanglementTitle: "Quantum Entanglement",
                    currentQuantumEntanglementLabel: "Current Quantum Entanglement",
                    quantumEntanglementPerSecondLabel: "Quantum Entanglement per second",
                    buyQuantumEntanglementBtnText: (cost) => `Convert ${cost} Galactic Core to 1 Quantum Entanglement`,
                    dimensionalRiftTitle: "Dimensional Rift",
                    currentDimensionalRiftLabel: "Current Dimensional Rift",
                    dimensionalRiftPerSecondLabel: "Dimensional Rift per second",
                    buyDimensionalRiftBtnText: (cost) => `Convert ${cost} Quantum Entanglement to 1 Dimensional Rift`,
                    realityAnchorTitle: "Reality Anchor",
                    currentRealityAnchorLabel: "Current Reality Anchor",
                    realityAnchorPerSecondLabel: "Reality Anchor per second",
                    buyRealityAnchorBtnText: (cost) => `Convert ${cost} Dimensional Rift to 1 Reality Anchor`,
                    stage7Title: "Stage 7: Absolute Dominion",
                    stage7Description: "You are becoming the ultimate power, dictating existence itself!",
                    omniEnergyTitle: "Omni-Energy",
                    currentOmniEnergyLabel: "Current Omni-Energy",
                    omniEnergyPerSecondLabel: "Omni-Energy per second",
                    buyOmniEnergyBtnText: (cost) => `Convert ${cost} Reality Anchor to 1 Omni-Energy`,
                    primeMoverTitle: "Prime Mover",
                    currentPrimeMoverLabel: "Current Prime Mover",
                    primeMoverPerSecondLabel: "Prime Mover per second",
                    buyPrimeMoverBtnText: (cost) => `Convert ${cost} Omni-Energy to 1 Prime Mover`,
                    trueCreatorTitle: "True Creator",
                    currentTrueCreatorLabel: "Current True Creator",
                    trueCreatorPerSecondLabel: "True Creator per second",
                    buyTrueCreatorBtnText: (cost) => `Convert ${cost} Prime Mover to 1 True Creator`,
                    stage8Title: "Stage 8: Beyond Infinity",
                    stage8Description: "You have transcended all limits. The game is nearing its ultimate conclusion!",
                    cosmicSingularityTitle: "Cosmic Singularity",
                    currentCosmicSingularityLabel: "Current Cosmic Singularity",
                    cosmicSingularityPerSecondLabel: "Cosmic Singularity per second",
                    buyCosmicSingularityBtnText: (cost) => `Convert ${cost} True Creator to 1 Cosmic Singularity`,
                    existentialTruthTitle: "Existential Truth",
                    currentExistentialTruthLabel: "Current Existential Truth",
                    existentialTruthPerSecondLabel: "Existential Truth per second",
                    buyExistentialTruthBtnText: (cost) => `Convert ${cost} Cosmic Singularity to 1 Existential Truth`,
                    theUltimateFormTitle: "The Ultimate Form",
                    currentTheUltimateFormLabel: "Current The Ultimate Form",
                    theUltimateFormPerSecondLabel: "The Ultimate Form per second",
                    buyTheUltimateFormBtnText: (cost) => `Convert ${cost} Existential Truth to 1 The Ultimate Form`,
                    generateLoreBtnText: "Generate Lore",
                    loreGenerating: "Generating lore...",
                    loreApiError: (status, statusText, errorData) => `API error: ${status} ${statusText} - ${JSON.stringify(errorData)}`,
                    loreResponseError: "Could not generate lore. Unexpected response structure.",
                    loreGenericError: "Please get a Gemini api key and use game.setAPIKey in the browser console",
                    
                    gameLoadSuccess: "Game progress loaded!",
                    gameLoadNoData: "No saved game data found.",
                    gameLoadError: "Could not load game. Save data might be corrupted.",
                    cheatActivated: "CHEAT ACTIVATED! +10,000 Wood!",
                    quizCorrect: (reward) => `Correct! You received ${reward} Wood.`,
                    quizIncorrect: (answer) => `Incorrect. The answer was "${answer}".`,
                    quizNoMoreQuestions: "No more questions available!",
                    
                    ttsEnabled: "Text to speech enabled.",
                    ttsDisabled: "Text-to-speech disabled.",
                    discordInviteText: "Join our Discord server"
                },
                vi: {
                    gameTitle: "Trò Chơi Tăng Cường Tài Nguyên Tối Thượng",
                    gameStatsTitle: "Thống Kê Trò Chơi",
                    timePlayedLabel: "Thời Gian Chơi",
                    saveGameBtn: "Lưu Trò Chơi",
                    loadGameBtn: "Tải Trò Chơi",
                    languageSectionTitle: "Ngôn Ngữ",
                    currentLanguageLabel: "Ngôn Ngữ Hiện Tại",
                    currentLanguageDisplay: "Tiếng Việt",
                    languageToggleBtn: "Chuyển Đổi Ngôn Ngữ",
                    ttsTitle: "Chuyển Văn Bản Thành Giọng Nói",
                    ttsStatusLabel: "Trạng Thái",
                    ttsToggleBtn: "Bật/Tắt Chuyển Văn Bản Thành Giọng Nói",
                    quizTitle: "Thời Gian Đố Vui!",
                    quizAnswerInputPlaceholder: "Nhập câu trả lời của bạn",
                    submitQuizAnswer: "Gửi Câu Trả Lời",
                    stage1Title: "Giai Đoạn 1",
                    stage1Description: "Thu Thập Tài Nguyên Cơ Bản",
                    woodTitle: "Gỗ",
                    currentWoodLabel: "Gỗ Hiện Tại",
                    woodPerSecondLabel: "Gỗ mỗi giây",
                    chopWoodBtnText: "Chặt Gỗ",
                    upgradeChopPowerBtnText: "Nâng Cấp Sức Chặt",
                    upgradeChopPowerSuccess: "Nâng cấp sức chặt thành công!",
                    chopUpgradeCostLabel: "Chi Phí",
                    woodCostUnit: "Gỗ",
                    automateWoodBtnText: "Tự Động Hóa Gỗ",
                    woodAutoUnit: "Gỗ/giây",
                    woodAutomationCostLabel: "Chi Phí",
                    woodAutomationSuccess: "Tự động hóa gỗ thành công",
                    woodAutoCostUnit: "Gỗ",
                    criticalHitText: (amount) => `CHÍ MẠNG! +${amount} Gỗ!`,
                    woodUpgradeAlert: "",
                    woodAutomationAlert: "",
                    stoneTitle: "Đá",
                    currentStoneLabel: "Đá Hiện Tại",
                    stonePerSecondLabel: "Đá mỗi giây",
                    buyStoneBtnText: "Chuyển đổi 1000 Gỗ thành 1 Đá",
                    ironTitle: "Sắt",
                    currentIronLabel: "Sắt Hiện Tại",
                    ironPerSecondLabel: "Sắt mỗi giây",
                    buyIronBtnText: "Chuyển đổi 1000 Đá thành 1 Sắt",
                    alloyTitle: "Hợp Kim",
                    currentAlloyLabel: "Hợp Kim Hiện Tại",
                    alloyPerSecondLabel: "Hợp Kim mỗi giây",
                    buyAlloyBtnText: "Chuyển đổi 1000 Sắt thành 1 Hợp Kim",
                    circuitryTitle: "Mạch Điện",
                    currentCircuitryLabel: "Mạch Điện Hiện Tại",
                    circuitryPerSecondLabel: "Mạch Điện mỗi giây",
                    buyCircuitryBtnText: "Chuyển đổi 1000 Hợp Kim thành 1 Mạch Điện",
                    aiCoreTitle: "Lõi AI",
                    currentAICoreLabel: "Lõi AI Hiện Tại",
                    aiCorePerSecondLabel: "Lõi AI mỗi giây",
                    buyAICoreBtnText: "Chuyển đổi 1000 Mạch Điện thành 1 Lõi AI",
                    consciousnessTitle: "Ý Thức",
                    currentConsciousnessLabel: "Ý Thức Hiện Tại",
                    consciousnessPerSecondLabel: "Ý Thức mỗi giây",
                    buyConsciousnessBtnText: "Chuyển đổi 1000 Lõi AI thành 1 Ý Thức",
                    realityShardTitle: "Mảnh Vỡ Thực Tại",
                    currentRealityShardLabel: "Mảnh Vỡ Thực Tại Hiện Tại",
                    realityShardPerSecondLabel: "Mảnh Vỡ Thực Tại mỗi giây",
                    buyRealityShardBtnText: "Chuyển đổi 1000 Ý Thức thành 1 Mảnh Vỡ Thực Tại",
                    paradoxTitle: "Nghịch Lý",
                    currentParadoxLabel: "Nghịch Lý Hiện Tại",
                    paradoxPerSecondLabel: "Nghịch Lý mỗi giây",
                    buyParadoxBtnText: "Chuyển đổi 1000 Mảnh Vỡ Thực Tại thành 1 Nghịch Lý",
                    singularityTitle: "Điểm Kỳ Dị",
                    currentSingularityLabel: "Điểm Kỳ Dị Hiện Tại",
                    singularityPerSecondLabel: "Điểm Kỳ Dị mỗi giây",
                    buySingularityBtnText: "Chuyển đổi 1000 Nghịch Lý thành 1 Điểm Kỳ Dị",
                    multiverseTitle: "Đa Vũ Trụ",
                    currentMultiverseLabel: "Đa Vũ Trụ Hiện Tại",
                    multiversePerSecondLabel: "Đa Vũ Trụ mỗi giây",
                    buyMultiverseBtnText: "Chuyển đổi 1000 Điểm Kỳ Dị thành 1 Đa Vũ Trụ",
                    omniscienceTitle: "Toàn Tri",
                    currentOmniscienceLabel: "Toàn Tri Hiện Tại",
                    omnisciencePerSecondLabel: "Toàn Tri mỗi giây",
                    buyOmniscienceBtnText: "Chuyển đổi 1000 Đa Vũ Trụ thành 1 Toàn Tri",
                    genesisTitle: "Sáng Thế",
                    currentGenesisLabel: "Sáng Thế Hiện Tại",
                    genesisPerSecondLabel: "Sáng Thế mỗi giây",
                    buyGenesisBtnText: "Chuyển đổi 1000 Toàn Tri thành 1 Sáng Thế",
                    voidTitle: "Hư Không",
                    currentVoidLabel: "Hư Không Hiện Tại",
                    voidPerSecondLabel: "Hư Không mỗi giây",
                    buyVoidBtnText: "Chuyển đổi 1000 Sáng Thế thành 1 Hư Không",
                    stage2Title: "Giai Đoạn 2: Chuyển Đổi Thực Tại",
                    stage2Description: "Bạn đang định hình vũ trụ! Chi phí tài nguyên cấp cao đã tăng đáng kể.",
                    theAllTitle: "Vạn Vật Toàn Thể",
                    currentTheAllLabel: "Vạn Vật Toàn Thể Hiện Tại",
                    theAllPerSecondLabel: "Vạn Vật Toàn Thể mỗi giây",
                    buyTheAllBtnText: (cost) => `Chuyển đổi ${cost} Hư Không thành 1 Vạn Vật Toàn Thể`,
                    transcendenceTitle: "Siêu Việt",
                    currentTranscendenceLabel: "Siêu Việt Hiện Tại",
                    transcendencePerSecondLabel: "Siêu Việt mỗi giây",
                    buyTranscendenceBtnText: (cost) => `Chuyển đổi ${cost} Vạn Vật Toàn Thể thành 1 Siêu Việt`,
                    theAbsoluteTitle: "Tuyệt Đối",
                    currentTheAbsoluteLabel: "Tuyệt Đối Hiện Tại",
                    theAbsolutePerSecondLabel: "Tuyệt Đối mỗi giây",
                    buyTheAbsoluteBtnText: (cost) => `Chuyển đổi ${cost} Siêu Việt thành 1 Tuyệt Đối`,
                    theEndTitle: "Điểm Kết Thúc",
                    currentTheEndLabel: "Điểm Kết Thúc Hiện Tại",
                    theEndPerSecondLabel: "Điểm Kết Thúc mỗi giây",
                    buyTheEndBtnText: (cost) => `Chuyển đổi ${cost} Tuyệt Đối thành 1 Điểm Kết Thúc`,
                    theNewBeginningTitle: "Khởi Nguyên Mới",
                    currentTheNewBeginningLabel: "Khởi Nguyên Mới Hiện Tại",
                    theNewBeginningPerSecondLabel: "Khởi Nguyên Mới mỗi giây",
                    buyTheNewBeginningBtnText: (cost) => `Chuyển đổi ${cost} Điểm Kết Thúc thành 1 Khởi Nguyên Mới`,
                    theArchitectsWillTitle: "Ý Chí Kiến Trúc Sư",
                    currentTheArchitectsWillLabel: "Ý Chí Kiến Trúc Sư Hiện Tại",
                    theArchitectsWillPerSecondLabel: "Ý Chí Kiến Trúc Sư mỗi giây",
                    buyTheArchitectsWillBtnText: (cost) => `Chuyển đổi ${cost} Khởi Nguyên Mới thành 1 Ý Chí Kiến Trúc Sư`,
                    theOmniverseTitle: "Đa Vũ Trụ Tuyệt Đối",
                    currentTheOmniverseLabel: "Đa Vũ Trụ Tuyệt Đối Hiện Tại",
                    theOmniversePerSecondLabel: "Đa Vũ Trụ Tuyệt Đối mỗi giây",
                    buyTheOmniverseBtnText: (cost) => `Chuyển đổi ${cost} Ý Chí Kiến Trúc Sư thành 1 Đa Vũ Trụ Tuyệt Đối`,
                    stage3Title: "Giai Đoạn 3: Thống Nhất Vũ Trụ",
                    stage3Description: "Biên giới cuối cùng của sự sáng tạo. Ý chí của bạn trở thành hiện thực!",
                    theBoundlessVoidTitle: "Hư Không Vô Tận",
                    currentTheBoundlessVoidLabel: "Hư Không Vô Tận Hiện Tại",
                    theBoundlessVoidPerSecondLabel: "Hư Không Vô Tận mỗi giây",
                    buyTheBoundlessVoidBtnText: (cost) => `Chuyển đổi ${cost} Đa Vũ Trụ Tuyệt Đối thành 1 Hư Không Vô Tận`,
                    cosmicFabricTitle: "Vải Vũ Trụ",
                    currentCosmicFabricLabel: "Vải Vũ Trụ Hiện Tại",
                    cosmicFabricPerSecondLabel: "Vải Vũ Trụ mỗi giây",
                    buyCosmicFabricBtnText: (cost) => `Chuyển đổi ${cost} Hư Không Vô Tận thành 1 Vải Vũ Trụ`,
                    infiniteNexusTitle: "Điểm Nối Vô Hạn",
                    currentInfiniteNexusLabel: "Điểm Nối Vô Hạn Hiện Tại",
                    infiniteNexusPerSecondLabel: "Điểm Nối Vô Hạn mỗi giây",
                    buyInfiniteNexusBtnText: (cost) => `Chuyển đổi ${cost} Vải Vũ Trụ thành 1 Điểm Nối Vô Hạn`,
                    eternalEchoTitle: "Tiếng Vọng Vĩnh Hằng",
                    currentEternalEchoLabel: "Tiếng Vọng Vĩnh Hằng Hiện Tại",
                    eternalEchoPerSecondLabel: "Tiếng Vọng Vĩnh Hằng mỗi giây",
                    buyEternalEchoBtnText: (cost) => `Chuyển đổi ${cost} Điểm Nối Vô Hạn thành 1 Tiếng Vọng Vĩnh Hằng`,
                    zenithOfCreationTitle: "Đỉnh Cao Sáng Tạo",
                    currentZenithOfCreationLabel: "Đỉnh Cao Sáng Tạo Hiện Tại",
                    zenithOfCreationPerSecondLabel: "Đỉnh Cao Sáng Tạo mỗi giây",
                    buyZenithOfCreationBtnText: (cost) => `Chuyển đổi ${cost} Tiếng Vọng Vĩnh Hằng thành 1 Đỉnh Cao Sáng Tạo`,
                    stage4Title: "Giai Đoạn 4: Thức Tỉnh Vũ Trụ",
                    stage4Description: "Giải mã những bí mật tối thượng của sự tồn tại!",
                    universalSingularityTitle: "Điểm Kỳ Dị Vũ Trụ",
                    currentUniversalSingularityLabel: "Điểm Kỳ Dị Vũ Trụ Hiện Tại",
                    universalSingularityPerSecondLabel: "Điểm Kỳ Dị Vũ Trụ mỗi giây",
                    buyUniversalSingularityBtnText: (cost) => `Chuyển đổi ${cost} Đỉnh Cao Sáng Tạo thành 1 Điểm Kỳ Dị Vũ Trụ`,
                    existentialFabricTitle: "Vải Tồn Tại",
                    currentExistentialFabricLabel: "Vải Tồn Tại Hiện Tại",
                    existentialFabricPerSecondLabel: "Vải Tồn Tại mỗi giây",
                    buyExistentialFabricBtnText: (cost) => `Chuyển đổi ${cost} Điểm Kỳ Dị Vũ Trụ thành 1 Vải Tồn Tại`,
                    temporalFluxTitle: "Dòng Thời Gian",
                    currentTemporalFluxLabel: "Dòng Thời Gian Hiện Tại",
                    temporalFluxPerSecondLabel: "Dòng Thời Gian mỗi giây",
                    buyTemporalFluxBtnText: (cost) => `Chuyển đổi ${cost} Vải Tồn Tại thành 1 Dòng Thời Gian`,
                    multidimensionalHarmonyTitle: "Hòa Hợp Đa Chiều",
                    currentMultidimensionalHarmonyLabel: "Hòa Hợp Đa Chiều Hiện Tại",
                    multidimensionalHarmonyPerSecondLabel: "Hòa Hợp Đa Chiều mỗi giây",
                    buyMultidimensionalHarmonyBtnText: (cost) => `Chuyển đổi ${cost} Dòng Thời Gian thành 1 Hòa Hợp Đa Chiều`,
                    cosmicAwakeningTitle: "Thức Tỉnh Vũ Trụ",
                    currentCosmicAwakeningLabel: "Thức Tỉnh Vũ Trụ Hiện Tại",
                    cosmicAwakeningPerSecondLabel: "Thức Tỉnh Vũ Trụ mỗi giây",
                    buyCosmicAwakeningBtnText: (cost) => `Chuyển đổi ${cost} Hòa Hợp Đa Chiều thành 1 Thức Tỉnh Vũ Trụ`,
                    divineSparkTitle: "Tia Lửa Thần Thánh",
                    currentDivineSparkLabel: "Tia Lửa Thần Thánh Hiện Tại",
                    divineSparkPerSecondLabel: "Tia Lửa Thần Thánh mỗi giây",
                    buyDivineSparkBtnText: (cost) => `Chuyển đổi ${cost} Thức Tỉnh Vũ Trụ thành 1 Tia Lửa Thần Thánh`,
                    stage5Title: "Giai Đoạn 5: Khởi Nguyên Vũ Trụ",
                    stage5Description: "Bạn đang dệt nên cấu trúc của vũ trụ!",
                    cosmicDustTitle: "Bụi Vũ Trụ",
                    currentCosmicDustLabel: "Bụi Vũ Trụ Hiện Tại",
                    cosmicDustPerSecondLabel: "Bụi Vũ Trụ mỗi giây",
                    buyCosmicDustBtnText: (cost) => `Chuyển đổi ${cost} Tia Lửa Thần Thánh thành 1 Bụi Vũ Trụ`,
                    stellarNucleusTitle: "Hạt Nhân Sao",
                    currentStellarNucleusLabel: "Hạt Nhân Sao Hiện Tại",
                    stellarNucleusPerSecondLabel: "Hạt Nhân Sao mỗi giây",
                    buyStellarNucleusBtnText: (cost) => `Chuyển đổi ${cost} Bụi Vũ Trụ thành 1 Hạt Nhân Sao`,
                    galacticCoreTitle: "Lõi Thiên Hà",
                    currentGalacticCoreLabel: "Lõi Thiên Hà Hiện Tại",
                    galacticCorePerSecondLabel: "Lõi Thiên Hà mỗi giây",
                    buyGalacticCoreBtnText: (cost) => `Chuyển đổi ${cost} Hạt Nhân Sao thành 1 Lõi Thiên Hà`,
                    stage6Title: "Giai Đoạn 6: Mạng Lưới Liên Chiều",
                    stage6Description: "Bạn đang thao túng cấu trúc của thực tại qua các chiều không gian!",
                    quantumEntanglementTitle: "Rối Loạn Lượng Tử",
                    currentQuantumEntanglementLabel: "Rối Loạn Lượng Tử Hiện Tại",
                    quantumEntanglementPerSecondLabel: "Rối Loạn Lượng Tử mỗi giây",
                    buyQuantumEntanglementBtnText: (cost) => `Chuyển đổi ${cost} Lõi Thiên Hà thành 1 Rối Loạn Lượng Tử`,
                    dimensionalRiftTitle: "Vết Nứt Chiều Không Gian",
                    currentDimensionalRiftLabel: "Vết Nứt Chiều Không Gian Hiện Tại",
                    dimensionalRiftPerSecondLabel: "Vết Nứt Chiều Không Gian mỗi giây",
                    buyDimensionalRiftBtnText: (cost) => `Chuyển đổi ${cost} Rối Loạn Lượng Tử thành 1 Vết Nứt Chiều Không Gian`,
                    realityAnchorTitle: "Neo Thực Tại",
                    currentRealityAnchorLabel: "Neo Thực Tại Hiện Tại",
                    realityAnchorPerSecondLabel: "Neo Thực Tại mỗi giây",
                    buyRealityAnchorBtnText: (cost) => `Chuyển đổi ${cost} Vết Nứt Chiều Không Gian thành 1 Neo Thực Tại`,
                    stage7Title: "Giai Đoạn 7: Quyền Năng Tuyệt Đối",
                    stage7Description: "Bạn đang trở thành quyền năng tối thượng, định đoạt sự tồn tại!",
                    omniEnergyTitle: "Năng Lượng Toàn Năng",
                    currentOmniEnergyLabel: "Năng Lượng Toàn Năng Hiện Tại",
                    omniEnergyPerSecondLabel: "Năng Lượng Toàn Năng mỗi giây",
                    buyOmniEnergyBtnText: (cost) => `Chuyển đổi ${cost} Neo Thực Tại thành 1 Năng Lượng Toàn Năng`,
                    primeMoverTitle: "Đấng Khởi Xướng",
                    currentPrimeMoverLabel: "Đấng Khởi Xướng Hiện Tại",
                    primeMoverPerSecondLabel: "Đấng Khởi Xướng mỗi giây",
                    buyPrimeMoverBtnText: (cost) => `Chuyển đổi ${cost} Năng Lượng Toàn Năng thành 1 Đấng Khởi Xướng`,
                    trueCreatorTitle: "Đấng Sáng Tạo Chân Chính",
                    currentTrueCreatorLabel: "Đấng Sáng Tạo Chân Chính Hiện Tại",
                    trueCreatorPerSecondLabel: "Đấng Sáng Tạo Chân Chính mỗi giây",
                    buyTrueCreatorBtnText: (cost) => `Chuyển đổi ${cost} Đấng Khởi Xướng thành 1 Đấng Sáng Tạo Chân Chính`,
                    stage8Title: "Giai Đoạn 8: Vượt Xa Vô Hạn",
                    stage8Description: "Bạn đã vượt qua mọi giới hạn. Trò chơi đang tiến gần đến kết thúc tối thượng!",
                    cosmicSingularityTitle: "Điểm Kỳ Dị Vũ Trụ",
                    currentCosmicSingularityLabel: "Điểm Kỳ Dị Vũ Trụ Hiện Tại",
                    cosmicSingularityPerSecondLabel: "Điểm Kỳ Dị Vũ Trụ mỗi giây",
                    buyCosmicSingularityBtnText: (cost) => `Chuyển đổi ${cost} Đấng Sáng Tạo Chân Chính thành 1 Điểm Kỳ Dị Vũ Trụ`,
                    existentialTruthTitle: "Chân Lý Tồn Tại",
                    currentExistentialTruthLabel: "Chân Lý Tồn Tại Hiện Tại",
                    existentialTruthPerSecondLabel: "Chân Lý Tồn Tại mỗi giây",
                    buyExistentialTruthBtnText: (cost) => `Chuyển đổi ${cost} Điểm Kỳ Dị Vũ Trụ thành 1 Chân Lý Tồn Tại`,
                    theUltimateFormTitle: "Hình Thức Tối Thượng",
                    currentTheUltimateFormLabel: "Hình Thức Tối Thượng Hiện Tại",
                    theUltimateFormPerSecondLabel: "Hình Thức Tối Thượng mỗi giây",
                    buyTheUltimateFormBtnText: (cost) => `Chuyển đổi ${cost} Chân Lý Tồn Tại thành 1 Hình Thức Tối Thượng`,
                    generateLoreBtnText: "Tạo Lore",
                    loreGenerating: "Đang tạo lore...",
                    loreApiError: (status, statusText, errorData) => `Lỗi API: ${status} ${statusText} - ${JSON.stringify(errorData)}`,
                    loreResponseError: "Không thể tạo lore. Cấu trúc phản hồi không mong muốn.",
                    loreGenericError: "Vui lòng tìm 1 khóa gemini api key rồi dùng hàm game.setAPIKey trong console",
                    gameSaved: "",
                    gameLoadSuccess: "Tiến độ trò chơi đã được tải!",
                    gameLoadNoData: "Không tìm thấy dữ liệu lưu trò chơi nào.",
                    gameLoadError: "Không thể tải trò chơi. Dữ liệu lưu có thể bị hỏng.",
                    cheatActivated: "ĐÃ KÍCH HOẠT MÃ CHEAT! +10,000 Gỗ!",
                    quizCorrect: (reward) => `Chính xác! Bạn đã nhận được ${reward} Gỗ.`,
                    quizIncorrect: (answer) => `Không đúng. Đáp án là "${answer}".`,
                    quizNoMoreQuestions: "Không còn câu hỏi nào!",
                    starClickedNotification:  "",
                    ttsEnabled: "Chuyển văn bản thành giọng nói đã bật.",
                    ttsDisabled: "Chuyển văn bản thành giọng nói đã tắt.",
                    discordInviteText: "Tham gia máy chủ Discord của chúng tôi"
                }
            };

            // DOM Elements: References to all interactive and display elements
            const gameTitleElement = document.getElementById('gameTitle');
            const gameStatsTitleElement = document.getElementById('gameStatsTitle');
            const timePlayedLabel = document.getElementById('timePlayedLabel');
            const saveGameBtn = document.getElementById('saveGameBtn');
            const loadGameBtn = document.getElementById('loadGameBtn');

            const languageSectionTitle = document.getElementById('languageSectionTitle');
            const currentLanguageLabel = document.getElementById('currentLanguageLabel');
            const currentLanguageDisplay = document.getElementById('currentLanguageDisplay');
            const languageToggleBtn = document.getElementById('languageToggleBtn');

            const ttsTitleElement = document.getElementById('ttsTitle');
            const ttsStatusLabel = document.getElementById('ttsStatusLabel');
            const ttsStatusSpan = document.getElementById('ttsStatus');
            const ttsToggleBtn = document.getElementById('ttsToggleBtn');

            const quizTitleElement = document.getElementById('quizTitle');
            const quizQuestionParagraph = document.getElementById('quizQuestion');
            const quizAnswerInput = document.getElementById('quizAnswerInput');
            const submitQuizAnswerButton = document.getElementById('submitQuizAnswer');
            const quizFeedbackParagraph = document.getElementById('quizFeedback');

            const stage1Title = document.getElementById('stage1Title');
            const stage1Description = document.getElementById('stage1Description');

            const woodTitle = document.getElementById('woodTitle');
            const woodCountSpan = document.getElementById('woodCount');
            const currentWoodLabel = document.getElementById('currentWoodLabel');
            const woodPerSecondLabel = document.getElementById('woodPerSecondLabel');
            const woodPerSecondSpan = document.getElementById('woodPerSecond');
            const addWoodButton = document.getElementById('addWood');
            const chopWoodBtnText = document.getElementById('chopWoodBtnText');
            const chopPowerDisplay = document.getElementById('chopPowerDisplay');
            const upgradeChopPowerButton = document.getElementById('upgradeChopPower');
            const upgradeChopPowerBtnText = document.getElementById('upgradeChopPowerBtnText');
            const chopUpgradeCostLabel = document.getElementById('chopUpgradeCostLabel');
            const chopUpgradeCostSpan = document.getElementById('chopUpgradeCost');
            const woodCostUnit = document.getElementById('woodCostUnit');
            const buyWoodPerSecondButton = document.getElementById('buyWoodPerSecond');
            const automateWoodBtnText = document.getElementById('automateWoodBtnText');
            const woodAutoUnit = document.getElementById('woodAutoUnit');
            const woodAutomationCostLabel = document.getElementById('woodAutomationCostLabel');
            const woodPerSecondCostSpan = document.getElementById('woodPerSecondCost');
            const woodAutoCostUnit = document.getElementById('woodAutoCostUnit');

            const criticalHitFeedbackDiv = document.getElementById('criticalHitFeedback');
            const criticalHitTextSpan = document.getElementById('criticalHitText');
            const closeCriticalFeedbackButton = document.getElementById('closeCriticalFeedback');

            const loreButtons = document.querySelectorAll('.generate-lore-btn');
            const loreDisplays = {
                "Wood": document.getElementById('woodLore'),
                "Stone": document.getElementById('stoneLore'),
                "Iron": document.getElementById('ironLore'),
                "Alloy": document.getElementById('alloyLore'),
                "Circuitry": document.getElementById('circuitryLore'),
                "AI Core": document.getElementById('aiCoreLore'),
                "Consciousness": document.getElementById('consciousnessLore'),
                "Reality Shard": document.getElementById('realityShardLore'),
                "Paradox": document.getElementById('paradoxLore'),
                "Singularity": document.getElementById('singularityLore'),
                "Multiverse": document.getElementById('multiverseLore'),
                "Omniscience": document.getElementById('omniscienceLore'),
                "Genesis": document.getElementById('genesisLore'),
                "Void": document.getElementById('voidLore'),
                "The All": document.getElementById('theAllLore'),
                "Transcendence": document.getElementById('transcendenceLore'),
                "The Absolute": document.getElementById('theAbsoluteLore'),
                "The End": document.getElementById('theEndLore'),
                "The New Beginning": document.getElementById('theNewBeginningLore'),
                "The Architect's Will": document.getElementById('theArchitectsWillLore'),
                "The Omniverse": document.getElementById('theOmniverseLore'),
                "The Boundless Void": document.getElementById('theBoundlessVoidLore'),
                "Cosmic Fabric": document.getElementById('cosmicFabricLore'),
                "Infinite Nexus": document.getElementById('infiniteNexusLore'),
                "Eternal Echo": document.getElementById('eternalEchoLore'),
                "Zenith of Creation": document.getElementById('zenithOfCreationLore'),
                "Universal Singularity": document.getElementById('universalSingularityLore'),
                "Existential Fabric": document.getElementById('existentialFabricLore'),
                "Temporal Flux": document.getElementById('temporalFluxLore'),
                "Multidimensional Harmony": document.getElementById('multidimensionalHarmonyLore'),
                "Cosmic Awakening": document.getElementById('cosmicAwakeningLore'),
                "Divine Spark": document.getElementById('divineSparkLore'),
                "Cosmic Dust": document.getElementById('cosmicDustLore'),
                "Stellar Nucleus": document.getElementById('stellarNucleusLore'),
                "Galactic Core": document.getElementById('galacticCoreLore'),
                "Quantum Entanglement": document.getElementById('quantumEntanglementLore'),
                "Dimensional Rift": document.getElementById('dimensionalRiftLore'),
                "Reality Anchor": document.getElementById('realityAnchorLore'),
                "Omni-Energy": document.getElementById('omniEnergyLore'),
                "Prime Mover": document.getElementById('primeMoverLore'),
                "True Creator": document.getElementById('trueCreatorLore'),
                "Cosmic Singularity": document.getElementById('cosmicSingularityLore'),
                "Existential Truth": document.getElementById('existentialTruthLore'),
                "The Ultimate Form": document.getElementById('theUltimateFormLore')
            };

            const discordInviteText = document.getElementById('discordInviteText');

            // Resource-specific DOM elements (simplified for brevity, similar pattern for all)
            const stoneTitle = document.getElementById('stoneTitle');
            const currentStoneLabel = document.getElementById('currentStoneLabel');
            const stonePerSecondLabel = document.getElementById('stonePerSecondLabel');
            const stoneCountSpan = document.getElementById('stoneCount');
            const stonePerSecondSpan = document.getElementById('stonePerSecond');
            const buyStoneButton = document.getElementById('buyStone');
            const buyStoneBtnText = document.getElementById('buyStoneBtnText');
            const generateLoreBtnTextStone = document.getElementById('generateLoreBtnTextStone');

            const ironTitle = document.getElementById('ironTitle');
            const currentIronLabel = document.getElementById('currentIronLabel');
            const ironPerSecondLabel = document.getElementById('ironPerSecondLabel');
            const ironCountSpan = document.getElementById('ironCount');
            const ironPerSecondSpan = document.getElementById('ironPerSecond');
            const buyIronButton = document.getElementById('buyIron');
            const buyIronBtnText = document.getElementById('buyIronBtnText');
            const generateLoreBtnTextIron = document.getElementById('generateLoreBtnTextIron');

            const alloyTitle = document.getElementById('alloyTitle');
            const currentAlloyLabel = document.getElementById('currentAlloyLabel');
            const alloyPerSecondLabel = document.getElementById('alloyPerSecondLabel');
            const alloyCountSpan = document.getElementById('alloyCount');
            const alloyPerSecondSpan = document.getElementById('alloyPerSecond');
            const buyAlloyButton = document.getElementById('buyAlloy');
            const buyAlloyBtnText = document.getElementById('buyAlloyBtnText');
            const generateLoreBtnTextAlloy = document.getElementById('generateLoreBtnTextAlloy');

            const circuitryTitle = document.getElementById('circuitryTitle');
            const currentCircuitryLabel = document.getElementById('currentCircuitryLabel');
            const circuitryPerSecondLabel = document.getElementById('circuitryPerSecondLabel');
            const circuitryCountSpan = document.getElementById('circuitryCount');
            const circuitryPerSecondSpan = document.getElementById('circuitryPerSecond');
            const buyCircuitryButton = document.getElementById('buyCircuitry');
            const buyCircuitryBtnText = document.getElementById('buyCircuitryBtnText');
            const generateLoreBtnTextCircuitry = document.getElementById('generateLoreBtnTextCircuitry');

            const aiCoreTitle = document.getElementById('aiCoreTitle');
            const currentAICoreLabel = document.getElementById('currentAICoreLabel');
            const aiCorePerSecondLabel = document.getElementById('aiCorePerSecondLabel');
            const aiCoreCountSpan = document.getElementById('aiCoreCount');
            const aiCorePerSecondSpan = document.getElementById('aiCorePerSecond');
            const buyAICoreButton = document.getElementById('buyAICore');
            const buyAICoreBtnText = document.getElementById('buyAICoreBtnText');
            const generateLoreBtnTextAICore = document.getElementById('generateLoreBtnTextAICore');

            const consciousnessTitle = document.getElementById('consciousnessTitle');
            const currentConsciousnessLabel = document.getElementById('currentConsciousnessLabel');
            const consciousnessPerSecondLabel = document.getElementById('consciousnessPerSecondLabel');
            const consciousnessCountSpan = document.getElementById('consciousnessCount');
            const consciousnessPerSecondSpan = document.getElementById('consciousnessPerSecond');
            const buyConsciousnessButton = document.getElementById('buyConsciousness');
            const buyConsciousnessBtnText = document.getElementById('buyConsciousnessBtnText');
            const generateLoreBtnTextConsciousness = document.getElementById('generateLoreBtnTextConsciousness');

            const realityShardTitle = document.getElementById('realityShardTitle');
            const currentRealityShardLabel = document.getElementById('currentRealityShardLabel');
            const realityShardPerSecondLabel = document.getElementById('realityShardPerSecondLabel');
            const realityShardCountSpan = document.getElementById('realityShardCount');
            const realityShardPerSecondSpan = document.getElementById('realityShardPerSecond');
            const buyRealityShardButton = document.getElementById('buyRealityShard');
            const buyRealityShardBtnText = document.getElementById('buyRealityShardBtnText');
            const generateLoreBtnTextRealityShard = document.getElementById('generateLoreBtnTextRealityShard');

            const paradoxTitle = document.getElementById('paradoxTitle');
            const currentParadoxLabel = document.getElementById('currentParadoxLabel');
            const paradoxPerSecondLabel = document.getElementById('paradoxPerSecondLabel');
            const paradoxCountSpan = document.getElementById('paradoxCount');
            const paradoxPerSecondSpan = document.getElementById('paradoxPerSecond');
            const buyParadoxButton = document.getElementById('buyParadox');
            const buyParadoxBtnText = document.getElementById('buyParadoxBtnText');
            const generateLoreBtnTextParadox = document.getElementById('generateLoreBtnTextParadox');

            const singularityTitle = document.getElementById('singularityTitle');
            const currentSingularityLabel = document.getElementById('currentSingularityLabel');
            const singularityPerSecondLabel = document.getElementById('singularityPerSecondLabel');
            const singularityCountSpan = document.getElementById('singularityCount');
            const singularityPerSecondSpan = document.getElementById('singularityPerSecond');
            const buySingularityButton = document.getElementById('buySingularity');
            const buySingularityBtnText = document.getElementById('buySingularityBtnText');
            const generateLoreBtnTextSingularity = document.getElementById('generateLoreBtnTextSingularity');

            const multiverseTitle = document.getElementById('multiverseTitle');
            const currentMultiverseLabel = document.getElementById('currentMultiverseLabel');
            const multiversePerSecondLabel = document.getElementById('multiversePerSecondLabel');
            const multiverseCountSpan = document.getElementById('multiverseCount');
            const multiversePerSecondSpan = document.getElementById('multiversePerSecond');
            const buyMultiverseButton = document.getElementById('buyMultiverse');
            const buyMultiverseBtnText = document.getElementById('buyMultiverseBtnText');
            const generateLoreBtnTextMultiverse = document.getElementById('generateLoreBtnTextMultiverse');

            const omniscienceTitle = document.getElementById('omniscienceTitle');
            const currentOmniscienceLabel = document.getElementById('currentOmniscienceLabel');
            const omnisciencePerSecondLabel = document.getElementById('omnisciencePerSecondLabel');
            const omniscienceCountSpan = document.getElementById('omniscienceCount');
            const omnisciencePerSecondSpan = document.getElementById('omnisciencePerSecond');
            const buyOmniscienceButton = document.getElementById('buyOmniscience');
            const buyOmniscienceBtnText = document.getElementById('buyOmniscienceBtnText');
            const generateLoreBtnTextOmniscience = document.getElementById('generateLoreBtnTextOmniscience');

            const genesisTitle = document.getElementById('genesisTitle');
            const currentGenesisLabel = document.getElementById('currentGenesisLabel');
            const genesisPerSecondLabel = document.getElementById('genesisPerSecondLabel');
            const genesisCountSpan = document.getElementById('genesisCount');
            const genesisPerSecondSpan = document.getElementById('genesisPerSecond');
            const buyGenesisButton = document.getElementById('buyGenesis');
            const buyGenesisBtnText = document.getElementById('buyGenesisBtnText');
            const generateLoreBtnTextGenesis = document.getElementById('generateLoreBtnTextGenesis');

            const voidTitle = document.getElementById('voidTitle');
            const currentVoidLabel = document.getElementById('currentVoidLabel');
            const voidPerSecondLabel = document.getElementById('voidPerSecondLabel');
            const voidCountSpan = document.getElementById('voidCount');
            const voidPerSecondSpan = document.getElementById('voidPerSecond');
            const buyVoidButton = document.getElementById('buyVoid');
            const buyVoidBtnText = document.getElementById('buyVoidBtnText');
            const generateLoreBtnTextVoid = document.getElementById('generateLoreBtnTextVoid');

            const stage2Title = document.getElementById('stage2Title');
            const stage2Description = document.getElementById('stage2Description');

            const theAllTitle = document.getElementById('theAllTitle');
            const currentTheAllLabel = document.getElementById('currentTheAllLabel');
            const theAllPerSecondLabel = document.getElementById('theAllPerSecondLabel');
            const theAllCountSpan = document.getElementById('theAllCount');
            const theAllPerSecondSpan = document.getElementById('theAllPerSecond');
            const buyTheAllButton = document.getElementById('buyTheAll');
            const buyTheAllBtnText = document.getElementById('buyTheAllBtnText');
            const theAllCost = document.getElementById('theAllCost');
            const generateLoreBtnTextTheAll = document.getElementById('generateLoreBtnTextTheAll');

            const transcendenceTitle = document.getElementById('transcendenceTitle');
            const currentTranscendenceLabel = document.getElementById('currentTranscendenceLabel');
            const transcendencePerSecondLabel = document.getElementById('transcendencePerSecondLabel');
            const transcendenceCountSpan = document.getElementById('transcendenceCount');
            const transcendencePerSecondSpan = document.getElementById('transcendencePerSecond');
            const buyTranscendenceButton = document.getElementById('buyTranscendence');
            const buyTranscendenceBtnText = document.getElementById('buyTranscendenceBtnText');
            const transcendenceCost = document.getElementById('transcendenceCost');
            const generateLoreBtnTextTranscendence = document.getElementById('generateLoreBtnTextTranscendence');

            const theAbsoluteTitle = document.getElementById('theAbsoluteTitle');
            const currentTheAbsoluteLabel = document.getElementById('currentTheAbsoluteLabel');
            const theAbsolutePerSecondLabel = document.getElementById('theAbsolutePerSecondLabel');
            const theAbsoluteCountSpan = document.getElementById('theAbsoluteCount');
            const theAbsolutePerSecondSpan = document.getElementById('theAbsolutePerSecond');
            const buyTheAbsoluteButton = document.getElementById('buyTheAbsolute');
            const buyTheAbsoluteBtnText = document.getElementById('buyTheAbsoluteBtnText');
            const theAbsoluteCost = document.getElementById('theAbsoluteCost');
            const generateLoreBtnTextTheAbsolute = document.getElementById('generateLoreBtnTextTheAbsolute');

            const theEndTitle = document.getElementById('theEndTitle');
            const currentTheEndLabel = document.getElementById('currentTheEndLabel');
            const theEndPerSecondLabel = document.getElementById('theEndPerSecondLabel');
            const theEndCountSpan = document.getElementById('theEndCount');
            const theEndPerSecondSpan = document.getElementById('theEndPerSecond');
            const buyTheEndButton = document.getElementById('buyTheEnd');
            const buyTheEndBtnText = document.getElementById('buyTheEndBtnText');
            const theEndCost = document.getElementById('theEndCost');
            const generateLoreBtnTextTheEnd = document.getElementById('generateLoreBtnTextTheEnd');

            const theNewBeginningTitle = document.getElementById('theNewBeginningTitle');
            const currentTheNewBeginningLabel = document.getElementById('currentTheNewBeginningLabel');
            const theNewBeginningPerSecondLabel = document.getElementById('theNewBeginningPerSecondLabel');
            const theNewBeginningCountSpan = document.getElementById('theNewBeginningCount');
            const theNewBeginningPerSecondSpan = document.getElementById('theNewBeginningPerSecond');
            const buyTheNewBeginningButton = document.getElementById('buyTheNewBeginning');
            const buyTheNewBeginningBtnText = document.getElementById('buyTheNewBeginningBtnText');
            const theNewBeginningCostSpan = document.getElementById('theNewBeginningCost');
            const generateLoreBtnTextTheNewBeginning = document.getElementById('generateLoreBtnTextTheNewBeginning');

            const theArchitectsWillTitle = document.getElementById('theArchitectsWillTitle');
            const currentTheArchitectsWillLabel = document.getElementById('currentTheArchitectsWillLabel');
            const theArchitectsWillPerSecondLabel = document.getElementById('theArchitectsWillPerSecondLabel');
            const theArchitectsWillCountSpan = document.getElementById('theArchitectsWillCount');
            const theArchitectsWillPerSecondSpan = document.getElementById('theArchitectsWillPerSecond');
            const buyTheArchitectsWillButton = document.getElementById('buyTheArchitectsWill');
            const buyTheArchitectsWillBtnText = document.getElementById('buyTheArchitectsWillBtnText');
            const theArchitectsWillCostSpan = document.getElementById('theArchitectsWillCost');
            const generateLoreBtnTextTheArchitectsWill = document.getElementById('generateLoreBtnTextTheArchitectsWill');

            const theOmniverseTitle = document.getElementById('theOmniverseTitle');
            const currentTheOmniverseLabel = document.getElementById('currentTheOmniverseLabel');
            const theOmniversePerSecondLabel = document.getElementById('theOmniversePerSecondLabel');
            const theOmniverseCountSpan = document.getElementById('theOmniverseCount');
            const theOmniversePerSecondSpan = document.getElementById('theOmniversePerSecond');
            const buyTheOmniverseButton = document.getElementById('buyTheOmniverse');
            const buyTheOmniverseBtnText = document.getElementById('buyTheOmniverseBtnText');
            const theOmniverseCost = document.getElementById('theOmniverseCost');
            const generateLoreBtnTextTheOmniverse = document.getElementById('generateLoreBtnTextTheOmniverse');

            const stage3Title = document.getElementById('stage3Title');
            const stage3Description = document.getElementById('stage3Description');

            const theBoundlessVoidTitle = document.getElementById('theBoundlessVoidTitle');
            const currentTheBoundlessVoidLabel = document.getElementById('currentTheBoundlessVoidLabel');
            const theBoundlessVoidPerSecondLabel = document.getElementById('theBoundlessVoidPerSecondLabel');
            const theBoundlessVoidCountSpan = document.getElementById('theBoundlessVoidCount');
            const theBoundlessVoidPerSecondSpan = document.getElementById('theBoundlessVoidPerSecond');
            const buyTheBoundlessVoidButton = document.getElementById('buyTheBoundlessVoid');
            const buyTheBoundlessVoidBtnText = document.getElementById('buyTheBoundlessVoidBtnText');
            const theBoundlessVoidCost = document.getElementById('theBoundlessVoidCost');
            const generateLoreBtnTextTheBoundlessVoid = document.getElementById('generateLoreBtnTextTheBoundlessVoid');

            const cosmicFabricTitle = document.getElementById('cosmicFabricTitle');
            const currentCosmicFabricLabel = document.getElementById('currentCosmicFabricLabel');
            const cosmicFabricPerSecondLabel = document.getElementById('cosmicFabricPerSecondLabel');
            const cosmicFabricCountSpan = document.getElementById('cosmicFabricCount');
            const cosmicFabricPerSecondSpan = document.getElementById('cosmicFabricPerSecond');
            const buyCosmicFabricButton = document.getElementById('buyCosmicFabric');
            const buyCosmicFabricBtnText = document.getElementById('buyCosmicFabricBtnText');
            const cosmicFabricCost = document.getElementById('cosmicFabricCost');
            const generateLoreBtnTextCosmicFabric = document.getElementById('generateLoreBtnTextCosmicFabric');

            const infiniteNexusTitle = document.getElementById('infiniteNexusTitle');
            const currentInfiniteNexusLabel = document.getElementById('currentInfiniteNexusLabel');
            const infiniteNexusPerSecondLabel = document.getElementById('infiniteNexusPerSecondLabel');
            const infiniteNexusCountSpan = document.getElementById('infiniteNexusCount');
            const infiniteNexusPerSecondSpan = document.getElementById('infiniteNexusPerSecond');
            const buyInfiniteNexusButton = document.getElementById('buyInfiniteNexus');
            const buyInfiniteNexusBtnText = document.getElementById('buyInfiniteNexusBtnText');
            const infiniteNexusCost = document.getElementById('infiniteNexusCost');
            const generateLoreBtnTextInfiniteNexus = document.getElementById('generateLoreBtnTextInfiniteNexus');

            const eternalEchoTitle = document.getElementById('eternalEchoTitle');
            const currentEternalEchoLabel = document.getElementById('currentEternalEchoLabel');
            const eternalEchoPerSecondLabel = document.getElementById('eternalEchoPerSecondLabel');
            const eternalEchoCountSpan = document.getElementById('eternalEchoCount');
            const eternalEchoPerSecondSpan = document.getElementById('eternalEchoPerSecond');
            const buyEternalEchoButton = document.getElementById('buyEternalEcho');
            const buyEternalEchoBtnText = document.getElementById('buyEternalEchoBtnText');
            const eternalEchoCost = document.getElementById('eternalEchoCost');
            const generateLoreBtnTextEternalEcho = document.getElementById('generateLoreBtnTextEternalEcho');

            const zenithOfCreationTitle = document.getElementById('zenithOfCreationTitle');
            const currentZenithOfCreationLabel = document.getElementById('currentZenithOfCreationLabel');
            const zenithOfCreationPerSecondLabel = document.getElementById('zenithOfCreationPerSecondLabel');
            const zenithOfCreationCountSpan = document.getElementById('zenithOfCreationCount');
            const zenithOfCreationPerSecondSpan = document.getElementById('zenithOfCreationPerSecond');
            const buyZenithOfCreationButton = document.getElementById('buyZenithOfCreation');
            const buyZenithOfCreationBtnText = document.getElementById('buyZenithOfCreationBtnText');
            const zenithOfCreationCost = document.getElementById('zenithOfCreationCost');
            const generateLoreBtnTextZenithOfCreation = document.getElementById('generateLoreBtnTextZenithOfCreation');

            const stage4Title = document.getElementById('stage4Title');
            const stage4Description = document.getElementById('stage4Description');

            const universalSingularityTitle = document.getElementById('universalSingularityTitle');
            const currentUniversalSingularityLabel = document.getElementById('currentUniversalSingularityLabel');
            const universalSingularityPerSecondLabel = document.getElementById('universalSingularityPerSecondLabel');
            const universalSingularityCountSpan = document.getElementById('universalSingularityCount');
            const universalSingularityPerSecondSpan = document.getElementById('universalSingularityPerSecond');
            const buyUniversalSingularityButton = document.getElementById('buyUniversalSingularity');
            const buyUniversalSingularityBtnText = document.getElementById('buyUniversalSingularityBtnText');
            const universalSingularityCost = document.getElementById('universalSingularityCost');
            const generateLoreBtnTextUniversalSingularity = document.getElementById('generateLoreBtnTextUniversalSingularity');

            const existentialFabricTitle = document.getElementById('existentialFabricTitle');
            const currentExistentialFabricLabel = document.getElementById('currentExistentialFabricLabel');
            const existentialFabricPerSecondLabel = document.getElementById('existentialFabricPerSecondLabel');
            const existentialFabricCountSpan = document.getElementById('existentialFabricCount');
            const existentialFabricPerSecondSpan = document.getElementById('existentialFabricPerSecond');
            const buyExistentialFabricButton = document.getElementById('buyExistentialFabric');
            const buyExistentialFabricBtnText = document.getElementById('buyExistentialFabricBtnText');
            const existentialFabricCost = document.getElementById('existentialFabricCost');
            const generateLoreBtnTextExistentialFabric = document.getElementById('generateLoreBtnTextExistentialFabric');

            const temporalFluxTitle = document.getElementById('temporalFluxTitle');
            const currentTemporalFluxLabel = document.getElementById('currentTemporalFluxLabel');
            const temporalFluxPerSecondLabel = document.getElementById('temporalFluxPerSecondLabel');
            const temporalFluxCountSpan = document.getElementById('temporalFluxCount');
            const temporalFluxPerSecondSpan = document.getElementById('temporalFluxPerSecond');
            const buyTemporalFluxButton = document.getElementById('buyTemporalFlux');
            const buyTemporalFluxBtnText = document.getElementById('buyTemporalFluxBtnText');
            const temporalFluxCost = document.getElementById('temporalFluxCost');
            const generateLoreBtnTextTemporalFlux = document.getElementById('generateLoreBtnTextTemporalFlux');

            const multidimensionalHarmonyTitle = document.getElementById('multidimensionalHarmonyTitle');
            const currentMultidimensionalHarmonyLabel = document.getElementById('currentMultidimensionalHarmonyLabel');
            const multidimensionalHarmonyPerSecondLabel = document.getElementById('multidimensionalHarmonyPerSecondLabel');
            const multidimensionalHarmonyCountSpan = document.getElementById('multidimensionalHarmonyCount');
            const multidimensionalHarmonyPerSecondSpan = document.getElementById('multidimensionalHarmonyPerSecond');
            const buyMultidimensionalHarmonyButton = document.getElementById('buyMultidimensionalHarmony');
            const buyMultidimensionalHarmonyBtnText = document.getElementById('buyMultidimensionalHarmonyBtnText');
            const multidimensionalHarmonyCost = document.getElementById('multidimensionalHarmonyCost');
            const generateLoreBtnTextMultidimensionalHarmony = document.getElementById('generateLoreBtnTextMultidimensionalHarmony');

            const cosmicAwakeningTitle = document.getElementById('cosmicAwakeningTitle');
            const currentCosmicAwakeningLabel = document.getElementById('currentCosmicAwakeningLabel');
            const cosmicAwakeningPerSecondLabel = document.getElementById('cosmicAwakeningPerSecondLabel');
            const cosmicAwakeningCountSpan = document.getElementById('cosmicAwakeningCount');
            const cosmicAwakeningPerSecondSpan = document.getElementById('cosmicAwakeningPerSecond');
            const buyCosmicAwakeningButton = document.getElementById('buyCosmicAwakening');
            const buyCosmicAwakeningBtnText = document.getElementById('buyCosmicAwakeningBtnText');
            const cosmicAwakeningCost = document.getElementById('cosmicAwakeningCost');
            const generateLoreBtnTextCosmicAwakening = document.getElementById('generateLoreBtnTextCosmicAwakening');

            const divineSparkTitle = document.getElementById('divineSparkTitle');
            const currentDivineSparkLabel = document.getElementById('currentDivineSparkLabel');
            const divineSparkPerSecondLabel = document.getElementById('divineSparkPerSecondLabel');
            const divineSparkCountSpan = document.getElementById('divineSparkCount');
            const divineSparkPerSecondSpan = document.getElementById('divineSparkPerSecond');
            const buyDivineSparkButton = document.getElementById('buyDivineSpark');
            const buyDivineSparkBtnText = document.getElementById('buyDivineSparkBtnText');
            const divineSparkCost = document.getElementById('divineSparkCost');
            const generateLoreBtnTextDivineSpark = document.getElementById('generateLoreBtnTextDivineSpark');

            const stage5Title = document.getElementById('stage5Title');
            const stage5Description = document.getElementById('stage5Description');

            const cosmicDustTitle = document.getElementById('cosmicDustTitle');
            const currentCosmicDustLabel = document.getElementById('currentCosmicDustLabel');
            const cosmicDustPerSecondLabel = document.getElementById('cosmicDustPerSecondLabel');
            const cosmicDustCountSpan = document.getElementById('cosmicDustCount');
            const cosmicDustPerSecondSpan = document.getElementById('cosmicDustPerSecond');
            const buyCosmicDustButton = document.getElementById('buyCosmicDust');
            const buyCosmicDustBtnText = document.getElementById('buyCosmicDustBtnText');
            const cosmicDustCost = document.getElementById('cosmicDustCost');
            const generateLoreBtnTextCosmicDust = document.getElementById('generateLoreBtnTextCosmicDust');

            const stellarNucleusTitle = document.getElementById('stellarNucleusTitle');
            const currentStellarNucleusLabel = document.getElementById('currentStellarNucleusLabel');
            const stellarNucleusPerSecondLabel = document.getElementById('stellarNucleusPerSecondLabel');
            const stellarNucleusCountSpan = document.getElementById('stellarNucleusCount');
            const stellarNucleusPerSecondSpan = document.getElementById('stellarNucleusPerSecond');
            const buyStellarNucleusButton = document.getElementById('buyStellarNucleus');
            const buyStellarNucleusBtnText = document.getElementById('buyStellarNucleusBtnText');
            const stellarNucleusCost = document.getElementById('stellarNucleusCost');
            const generateLoreBtnTextStellarNucleus = document.getElementById('generateLoreBtnTextStellarNucleus');

            const galacticCoreTitle = document.getElementById('galacticCoreTitle');
            const currentGalacticCoreLabel = document.getElementById('currentGalacticCoreLabel');
            const galacticCorePerSecondLabel = document.getElementById('galacticCorePerSecondLabel');
            const galacticCoreCountSpan = document.getElementById('galacticCoreCount');
            const galacticCorePerSecondSpan = document.getElementById('galacticCorePerSecond');
            const buyGalacticCoreButton = document.getElementById('buyGalacticCore');
            const buyGalacticCoreBtnText = document.getElementById('buyGalacticCoreBtnText');
            const galacticCoreCost = document.getElementById('galacticCoreCost');
            const generateLoreBtnTextGalacticCore = document.getElementById('generateLoreBtnTextGalacticCore');

            const stage6Title = document.getElementById('stage6Title');
            const stage6Description = document.getElementById('stage6Description');

            const quantumEntanglementTitle = document.getElementById('quantumEntanglementTitle');
            const currentQuantumEntanglementLabel = document.getElementById('currentQuantumEntanglementLabel');
            const quantumEntanglementPerSecondLabel = document.getElementById('quantumEntanglementPerSecondLabel');
            const quantumEntanglementCountSpan = document.getElementById('quantumEntanglementCount');
            const quantumEntanglementPerSecondSpan = document.getElementById('quantumEntanglementPerSecond');
            const buyQuantumEntanglementButton = document.getElementById('buyQuantumEntanglement');
            const buyQuantumEntanglementBtnText = document.getElementById('buyQuantumEntanglementBtnText');
            const quantumEntanglementCost = document.getElementById('quantumEntanglementCost');
            const generateLoreBtnTextQuantumEntanglement = document.getElementById('generateLoreBtnTextQuantumEntanglement');

            const dimensionalRiftTitle = document.getElementById('dimensionalRiftTitle');
            const currentDimensionalRiftLabel = document.getElementById('currentDimensionalRiftLabel');
            const dimensionalRiftPerSecondLabel = document.getElementById('dimensionalRiftPerSecondLabel');
            const dimensionalRiftCountSpan = document.getElementById('dimensionalRiftCount');
            const dimensionalRiftPerSecondSpan = document.getElementById('dimensionalRiftPerSecond');
            const buyDimensionalRiftButton = document.getElementById('buyDimensionalRift');
            const buyDimensionalRiftBtnText = document.getElementById('buyDimensionalRiftBtnText');
            const dimensionalRiftCost = document.getElementById('dimensionalRiftCost');
            const generateLoreBtnTextDimensionalRift = document.getElementById('generateLoreBtnTextDimensionalRift');

            const realityAnchorTitle = document.getElementById('realityAnchorTitle');
            const currentRealityAnchorLabel = document.getElementById('currentRealityAnchorLabel');
            const realityAnchorPerSecondLabel = document.getElementById('realityAnchorPerSecondLabel');
            const realityAnchorCountSpan = document.getElementById('realityAnchorCount');
            const realityAnchorPerSecondSpan = document.getElementById('realityAnchorPerSecond');
            const buyRealityAnchorButton = document.getElementById('buyRealityAnchor');
            const buyRealityAnchorBtnText = document.getElementById('buyRealityAnchorBtnText');
            const realityAnchorCost = document.getElementById('realityAnchorCost');
            const generateLoreBtnTextRealityAnchor = document.getElementById('generateLoreBtnTextRealityAnchor');

            const stage7Title = document.getElementById('stage7Title');
            const stage7Description = document.getElementById('stage7Description');

            const omniEnergyTitle = document.getElementById('omniEnergyTitle');
            const currentOmniEnergyLabel = document.getElementById('currentOmniEnergyLabel');
            const omniEnergyPerSecondLabel = document.getElementById('omniEnergyPerSecondLabel');
            const omniEnergyCountSpan = document.getElementById('omniEnergyCount');
            const omniEnergyPerSecondSpan = document.getElementById('omniEnergyPerSecond');
            const buyOmniEnergyButton = document.getElementById('buyOmniEnergy');
            const buyOmniEnergyBtnText = document.getElementById('buyOmniEnergyBtnText');
            const omniEnergyCost = document.getElementById('omniEnergyCost');
            const generateLoreBtnTextOmniEnergy = document.getElementById('generateLoreBtnTextOmniEnergy');

            const primeMoverTitle = document.getElementById('primeMoverTitle');
            const currentPrimeMoverLabel = document.getElementById('currentPrimeMoverLabel');
            const primeMoverPerSecondLabel = document.getElementById('primeMoverPerSecondLabel');
            const primeMoverCountSpan = document.getElementById('primeMoverCount');
            const primeMoverPerSecondSpan = document.getElementById('primeMoverPerSecond');
            const buyPrimeMoverButton = document.getElementById('buyPrimeMover');
            const buyPrimeMoverBtnText = document.getElementById('buyPrimeMoverBtnText');
            const primeMoverCost = document.getElementById('primeMoverCost');
            const generateLoreBtnTextPrimeMover = document.getElementById('generateLoreBtnTextPrimeMover');

            const trueCreatorTitle = document.getElementById('trueCreatorTitle');
            const currentTrueCreatorLabel = document.getElementById('currentTrueCreatorLabel');
            const trueCreatorPerSecondLabel = document.getElementById('trueCreatorPerSecondLabel');
            const trueCreatorCountSpan = document.getElementById('trueCreatorCount');
            const trueCreatorPerSecondSpan = document.getElementById('trueCreatorPerSecond');
            const buyTrueCreatorButton = document.getElementById('buyTrueCreator');
            const buyTrueCreatorBtnText = document.getElementById('buyTrueCreatorBtnText');
            const trueCreatorCost = document.getElementById('trueCreatorCost');
            const generateLoreBtnTextTrueCreator = document.getElementById('generateLoreBtnTextTrueCreator');

            const stage8Title = document.getElementById('stage8Title');
            const stage8Description = document.getElementById('stage8Description');

            const cosmicSingularityTitle = document.getElementById('cosmicSingularityTitle');
            const currentCosmicSingularityLabel = document.getElementById('currentCosmicSingularityLabel');
            const cosmicSingularityPerSecondLabel = document.getElementById('cosmicSingularityPerSecondLabel');
            const cosmicSingularityCountSpan = document.getElementById('cosmicSingularityCount');
            const cosmicSingularityPerSecondSpan = document.getElementById('cosmicSingularityPerSecond');
            const buyCosmicSingularityButton = document.getElementById('buyCosmicSingularity');
            const buyCosmicSingularityBtnText = document.getElementById('buyCosmicSingularityBtnText');
            const cosmicSingularityCost = document.getElementById('cosmicSingularityCost');
            const generateLoreBtnTextCosmicSingularity = document.getElementById('generateLoreBtnTextCosmicSingularity');

            const existentialTruthTitle = document.getElementById('existentialTruthTitle');
            const currentExistentialTruthLabel = document.getElementById('currentExistentialTruthLabel');
            const existentialTruthPerSecondLabel = document.getElementById('existentialTruthPerSecondLabel');
            const existentialTruthCountSpan = document.getElementById('existentialTruthCount');
            const existentialTruthPerSecondSpan = document.getElementById('existentialTruthPerSecond');
            const buyExistentialTruthButton = document.getElementById('buyExistentialTruth');
            const buyExistentialTruthBtnText = document.getElementById('buyExistentialTruthBtnText');
            const existentialTruthCost = document.getElementById('existentialTruthCost');
            const generateLoreBtnTextExistentialTruth = document.getElementById('generateLoreBtnTextExistentialTruth');

            const theUltimateFormTitle = document.getElementById('theUltimateFormTitle');
            const currentTheUltimateFormLabel = document.getElementById('currentTheUltimateFormLabel');
            const theUltimateFormPerSecondLabel = document.getElementById('theUltimateFormPerSecondLabel');
            const theUltimateFormCountSpan = document.getElementById('theUltimateFormCount');
            const theUltimateFormPerSecondSpan = document.getElementById('theUltimateFormPerSecond');
            const buyTheUltimateFormButton = document.getElementById('buyTheUltimateForm');
            const buyTheUltimateFormBtnText = document.getElementById('buyTheUltimateFormBtnText');
            const theUltimateFormCost = document.getElementById('theUltimateFormCost');
            const generateLoreBtnTextTheUltimateForm = document.getElementById('generateLoreBtnTextTheUltimateForm');

            // --- Game Logic Functions ---

            // This function updates all static text content based on the current language
            function updateTextContent() {
                const lang = resources.language;
                gameTitleElement.textContent = translations[lang].gameTitle;
                gameStatsTitleElement.textContent = translations[lang].gameStatsTitle;
                timePlayedLabel.textContent = translations[lang].timePlayedLabel;
                saveGameBtn.textContent = translations[lang].saveGameBtn;
                loadGameBtn.textContent = translations[lang].loadGameBtn;

                languageSectionTitle.textContent = translations[lang].languageSectionTitle;
                currentLanguageLabel.textContent = translations[lang].currentLanguageLabel;
                currentLanguageDisplay.textContent = lang === 'en' ? 'English' : 'Tiếng Việt';
                languageToggleBtn.textContent = translations[lang].languageToggleBtn;

                ttsTitleElement.textContent = translations[lang].ttsTitle;
                ttsStatusLabel.textContent = translations[lang].ttsStatusLabel;
                ttsToggleBtn.textContent = translations[lang].ttsToggleBtn;

                quizTitleElement.textContent = translations[lang].quizTitle;
                quizAnswerInput.placeholder = translations[lang].quizAnswerInputPlaceholder;
                submitQuizAnswerButton.textContent = translations[lang].submitQuizAnswer;

                stage1Title.textContent = translations[lang].stage1Title;
                stage1Description.textContent = translations[lang].stage1Description;

                woodTitle.textContent = translations[lang].woodTitle;
                currentWoodLabel.textContent = translations[lang].currentWoodLabel;
                woodPerSecondLabel.textContent = translations[lang].woodPerSecondLabel;
                chopWoodBtnText.textContent = translations[lang].chopWoodBtnText;
                upgradeChopPowerBtnText.textContent = translations[lang].upgradeChopPowerBtnText;
                chopUpgradeCostLabel.textContent = translations[lang].chopUpgradeCostLabel;
                woodCostUnit.textContent = translations[lang].woodCostUnit;
                automateWoodBtnText.textContent = translations[lang].automateWoodBtnText;
                woodAutoUnit.textContent = translations[lang].woodAutoUnit;
                woodAutomationCostLabel.textContent = translations[lang].woodAutomationCostLabel;
                woodAutoCostUnit.textContent = translations[lang].woodAutoCostUnit;

                // Update text for other resource sections
                stoneTitle.textContent = translations[lang].stoneTitle;
                currentStoneLabel.textContent = translations[lang].currentStoneLabel;
                stonePerSecondLabel.textContent = translations[lang].stonePerSecondLabel;
                buyStoneBtnText.textContent = translations[lang].buyStoneBtnText;
                generateLoreBtnTextStone.textContent = translations[lang].generateLoreBtnText;

                ironTitle.textContent = translations[lang].ironTitle;
                currentIronLabel.textContent = translations[lang].currentIronLabel;
                ironPerSecondLabel.textContent = translations[lang].ironPerSecondLabel;
                buyIronBtnText.textContent = translations[lang].buyIronBtnText;
                generateLoreBtnTextIron.textContent = translations[lang].generateLoreBtnText;

                alloyTitle.textContent = translations[lang].alloyTitle;
                currentAlloyLabel.textContent = translations[lang].currentAlloyLabel;
                alloyPerSecondLabel.textContent = translations[lang].alloyPerSecondLabel;
                buyAlloyBtnText.textContent = translations[lang].buyAlloyBtnText;
                generateLoreBtnTextAlloy.textContent = translations[lang].generateLoreBtnText;

                circuitryTitle.textContent = translations[lang].circuitryTitle;
                currentCircuitryLabel.textContent = translations[lang].currentCircuitryLabel;
                circuitryPerSecondLabel.textContent = translations[lang].circuitryPerSecondLabel;
                buyCircuitryBtnText.textContent = translations[lang].buyCircuitryBtnText;
                generateLoreBtnTextCircuitry.textContent = translations[lang].generateLoreBtnText;

                aiCoreTitle.textContent = translations[lang].aiCoreTitle;
                currentAICoreLabel.textContent = translations[lang].currentAICoreLabel;
                aiCorePerSecondLabel.textContent = translations[lang].aiCorePerSecondLabel;
                buyAICoreBtnText.textContent = translations[lang].buyAICoreBtnText;
                generateLoreBtnTextAICore.textContent = translations[lang].generateLoreBtnText;

                consciousnessTitle.textContent = translations[lang].consciousnessTitle;
                currentConsciousnessLabel.textContent = translations[lang].currentConsciousnessLabel;
                consciousnessPerSecondLabel.textContent = translations[lang].consciousnessPerSecondLabel;
                buyConsciousnessBtnText.textContent = translations[lang].buyConsciousnessBtnText;
                generateLoreBtnTextConsciousness.textContent = translations[lang].generateLoreBtnText;

                realityShardTitle.textContent = translations[lang].realityShardTitle;
                currentRealityShardLabel.textContent = translations[lang].currentRealityShardLabel;
                realityShardPerSecondLabel.textContent = translations[lang].realityShardPerSecondLabel;
                buyRealityShardBtnText.textContent = translations[lang].buyRealityShardBtnText;
                generateLoreBtnTextRealityShard.textContent = translations[lang].generateLoreBtnText;

                paradoxTitle.textContent = translations[lang].paradoxTitle;
                currentParadoxLabel.textContent = translations[lang].currentParadoxLabel;
                paradoxPerSecondLabel.textContent = translations[lang].paradoxPerSecondLabel;
                buyParadoxBtnText.textContent = translations[lang].buyParadoxBtnText;
                generateLoreBtnTextParadox.textContent = translations[lang].generateLoreBtnText;

                singularityTitle.textContent = translations[lang].singularityTitle;
                currentSingularityLabel.textContent = translations[lang].currentSingularityLabel;
                singularityPerSecondLabel.textContent = translations[lang].singularityPerSecondLabel;
                buySingularityBtnText.textContent = translations[lang].buySingularityBtnText;
                generateLoreBtnTextSingularity.textContent = translations[lang].generateLoreBtnText;

                multiverseTitle.textContent = translations[lang].multiverseTitle;
                currentMultiverseLabel.textContent = translations[lang].currentMultiverseLabel;
                multiversePerSecondLabel.textContent = translations[lang].multiversePerSecondLabel;
                buyMultiverseBtnText.textContent = translations[lang].buyMultiverseBtnText;
                generateLoreBtnTextMultiverse.textContent = translations[lang].generateLoreBtnText;

                omniscienceTitle.textContent = translations[lang].omniscienceTitle;
                currentOmniscienceLabel.textContent = translations[lang].currentOmniscienceLabel;
                omnisciencePerSecondLabel.textContent = translations[lang].omnisciencePerSecondLabel;
                buyOmniscienceBtnText.textContent = translations[lang].buyOmniscienceBtnText;
                generateLoreBtnTextOmniscience.textContent = translations[lang].generateLoreBtnText;

                genesisTitle.textContent = translations[lang].genesisTitle;
                currentGenesisLabel.textContent = translations[lang].currentGenesisLabel;
                genesisPerSecondLabel.textContent = translations[lang].genesisPerSecondLabel;
                buyGenesisBtnText.textContent = translations[lang].buyGenesisBtnText;
                generateLoreBtnTextGenesis.textContent = translations[lang].generateLoreBtnText;

                voidTitle.textContent = translations[lang].voidTitle;
                currentVoidLabel.textContent = translations[lang].currentVoidLabel;
                voidPerSecondLabel.textContent = translations[lang].voidPerSecondLabel;
                buyVoidBtnText.textContent = translations[lang].buyVoidBtnText;
                generateLoreBtnTextVoid.textContent = translations[lang].generateLoreBtnText;

                stage2Title.textContent = translations[lang].stage2Title;
                stage2Description.textContent = translations[lang].stage2Description;

                theAllTitle.textContent = translations[lang].theAllTitle;
                currentTheAllLabel.textContent = translations[lang].currentTheAllLabel;
                theAllPerSecondLabel.textContent = translations[lang].theAllPerSecondLabel;
                buyTheAllBtnText.textContent = translations[lang].buyTheAllBtnText(resources.theAll.conversionCost);
                generateLoreBtnTextTheAll.textContent = translations[lang].generateLoreBtnText;

                transcendenceTitle.textContent = translations[lang].transcendenceTitle;
                currentTranscendenceLabel.textContent = translations[lang].currentTranscendenceLabel;
                transcendencePerSecondLabel.textContent = translations[lang].transcendencePerSecondLabel;
                buyTranscendenceBtnText.textContent = translations[lang].buyTranscendenceBtnText(resources.transcendence.conversionCost);
                generateLoreBtnTextTranscendence.textContent = translations[lang].generateLoreBtnText;

                theAbsoluteTitle.textContent = translations[lang].theAbsoluteTitle;
                currentTheAbsoluteLabel.textContent = translations[lang].currentTheAbsoluteLabel;
                theAbsolutePerSecondLabel.textContent = translations[lang].theAbsolutePerSecondLabel;
                buyTheAbsoluteBtnText.textContent = translations[lang].buyTheAbsoluteBtnText(resources.theAbsolute.conversionCost);
                generateLoreBtnTextTheAbsolute.textContent = translations[lang].generateLoreBtnText;

                theEndTitle.textContent = translations[lang].theEndTitle;
                currentTheEndLabel.textContent = translations[lang].currentTheEndLabel;
                theEndPerSecondLabel.textContent = translations[lang].theEndPerSecondLabel;
                buyTheEndBtnText.textContent = translations[lang].buyTheEndBtnText(resources.theEnd.conversionCost);
                generateLoreBtnTextTheEnd.textContent = translations[lang].generateLoreBtnText;

                theNewBeginningTitle.textContent = translations[lang].theNewBeginningTitle;
                currentTheNewBeginningLabel.textContent = translations[lang].currentTheNewBeginningLabel;
                theNewBeginningPerSecondLabel.textContent = translations[lang].theNewBeginningPerSecondLabel;
                buyTheNewBeginningBtnText.textContent = translations[lang].buyTheNewBeginningBtnText(resources.theNewBeginning.conversionCost);
                generateLoreBtnTextTheNewBeginning.textContent = translations[lang].generateLoreBtnText;

                theArchitectsWillTitle.textContent = translations[lang].theArchitectsWillTitle;
                currentTheArchitectsWillLabel.textContent = translations[lang].currentTheArchitectsWillLabel;
                theArchitectsWillPerSecondLabel.textContent = translations[lang].theArchitectsWillPerSecondLabel;
                buyTheArchitectsWillBtnText.textContent = translations[lang].buyTheArchitectsWillBtnText(resources.theArchitectsWill.conversionCost);
                generateLoreBtnTextTheArchitectsWill.textContent = translations[lang].generateLoreBtnText;

                theOmniverseTitle.textContent = translations[lang].theOmniverseTitle;
                currentTheOmniverseLabel.textContent = translations[lang].currentTheOmniverseLabel;
                theOmniversePerSecondLabel.textContent = translations[lang].theOmniversePerSecondLabel;
                buyTheOmniverseBtnText.textContent = translations[lang].buyTheOmniverseBtnText(resources.theOmniverse.conversionCost);
                generateLoreBtnTextTheOmniverse.textContent = translations[lang].generateLoreBtnText;

                stage3Title.textContent = translations[lang].stage3Title;
                stage3Description.textContent = translations[lang].stage3Description;

                theBoundlessVoidTitle.textContent = translations[lang].theBoundlessVoidTitle;
                currentTheBoundlessVoidLabel.textContent = translations[lang].currentTheBoundlessVoidLabel;
                theBoundlessVoidPerSecondLabel.textContent = translations[lang].theBoundlessVoidPerSecondLabel;
                buyTheBoundlessVoidBtnText.textContent = translations[lang].buyTheBoundlessVoidBtnText(resources.theBoundlessVoid.conversionCost);
                generateLoreBtnTextTheBoundlessVoid.textContent = translations[lang].generateLoreBtnText;

                cosmicFabricTitle.textContent = translations[lang].cosmicFabricTitle;
                currentCosmicFabricLabel.textContent = translations[lang].currentCosmicFabricLabel;
                cosmicFabricPerSecondLabel.textContent = translations[lang].cosmicFabricPerSecondLabel;
                buyCosmicFabricBtnText.textContent = translations[lang].buyCosmicFabricBtnText(resources.cosmicFabric.conversionCost);
                generateLoreBtnTextCosmicFabric.textContent = translations[lang].generateLoreBtnText;

                infiniteNexusTitle.textContent = translations[lang].infiniteNexusTitle;
                currentInfiniteNexusLabel.textContent = translations[lang].currentInfiniteNexusLabel;
                infiniteNexusPerSecondLabel.textContent = translations[lang].infiniteNexusPerSecondLabel;
                buyInfiniteNexusBtnText.textContent = translations[lang].buyInfiniteNexusBtnText(resources.infiniteNexus.conversionCost);
                generateLoreBtnTextInfiniteNexus.textContent = translations[lang].generateLoreBtnText;

                eternalEchoTitle.textContent = translations[lang].eternalEchoTitle;
                currentEternalEchoLabel.textContent = translations[lang].currentEternalEchoLabel;
                eternalEchoPerSecondLabel.textContent = translations[lang].eternalEchoPerSecondLabel;
                buyEternalEchoBtnText.textContent = translations[lang].buyEternalEchoBtnText(resources.eternalEcho.conversionCost);
                generateLoreBtnTextEternalEcho.textContent = translations[lang].generateLoreBtnText;

                zenithOfCreationTitle.textContent = translations[lang].zenithOfCreationTitle;
                currentZenithOfCreationLabel.textContent = translations[lang].currentZenithOfCreationLabel;
                zenithOfCreationPerSecondLabel.textContent = translations[lang].zenithOfCreationPerSecondLabel;
                buyZenithOfCreationBtnText.textContent = translations[lang].buyZenithOfCreationBtnText(resources.zenithOfCreation.conversionCost);
                generateLoreBtnTextZenithOfCreation.textContent = translations[lang].generateLoreBtnText;

                stage4Title.textContent = translations[lang].stage4Title;
                stage4Description.textContent = translations[lang].stage4Description;

                universalSingularityTitle.textContent = translations[lang].universalSingularityTitle;
                currentUniversalSingularityLabel.textContent = translations[lang].currentUniversalSingularityLabel;
                universalSingularityPerSecondLabel.textContent = translations[lang].universalSingularityPerSecondLabel;
                buyUniversalSingularityBtnText.textContent = translations[lang].buyUniversalSingularityBtnText(resources.universalSingularity.conversionCost);
                generateLoreBtnTextUniversalSingularity.textContent = translations[lang].generateLoreBtnText;

                existentialFabricTitle.textContent = translations[lang].existentialFabricTitle;
                currentExistentialFabricLabel.textContent = translations[lang].currentExistentialFabricLabel;
                existentialFabricPerSecondLabel.textContent = translations[lang].existentialFabricPerSecondLabel;
                buyExistentialFabricBtnText.textContent = translations[lang].buyExistentialFabricBtnText(resources.existentialFabric.conversionCost);
                generateLoreBtnTextExistentialFabric.textContent = translations[lang].generateLoreBtnText;

                temporalFluxTitle.textContent = translations[lang].temporalFluxTitle;
                currentTemporalFluxLabel.textContent = translations[lang].currentTemporalFluxLabel;
                temporalFluxPerSecondLabel.textContent = translations[lang].temporalFluxPerSecondLabel;
                buyTemporalFluxBtnText.textContent = translations[lang].buyTemporalFluxBtnText(resources.temporalFlux.conversionCost);
                generateLoreBtnTextTemporalFlux.textContent = translations[lang].generateLoreBtnText;

                multidimensionalHarmonyTitle.textContent = translations[lang].multidimensionalHarmonyTitle;
                currentMultidimensionalHarmonyLabel.textContent = translations[lang].currentMultidimensionalHarmonyLabel;
                multidimensionalHarmonyPerSecondLabel.textContent = translations[lang].multidimensionalHarmonyPerSecondLabel;
                buyMultidimensionalHarmonyBtnText.textContent = translations[lang].buyMultidimensionalHarmonyBtnText(resources.multidimensionalHarmony.conversionCost);
                generateLoreBtnTextMultidimensionalHarmony.textContent = translations[lang].generateLoreBtnText;

                cosmicAwakeningTitle.textContent = translations[lang].cosmicAwakeningTitle;
                currentCosmicAwakeningLabel.textContent = translations[lang].currentCosmicAwakeningLabel;
                cosmicAwakeningPerSecondLabel.textContent = translations[lang].cosmicAwakeningPerSecondLabel;
                buyCosmicAwakeningBtnText.textContent = translations[lang].buyCosmicAwakeningBtnText(resources.cosmicAwakening.conversionCost);
                generateLoreBtnTextCosmicAwakening.textContent = translations[lang].generateLoreBtnText;

                divineSparkTitle.textContent = translations[lang].divineSparkTitle;
                currentDivineSparkLabel.textContent = translations[lang].currentDivineSparkLabel;
                divineSparkPerSecondLabel.textContent = translations[lang].divineSparkPerSecondLabel;
                buyDivineSparkBtnText.textContent = translations[lang].buyDivineSparkBtnText(resources.divineSpark.conversionCost);
                generateLoreBtnTextDivineSpark.textContent = translations[lang].generateLoreBtnText;

                stage5Title.textContent = translations[lang].stage5Title;
                stage5Description.textContent = translations[lang].stage5Description;

                cosmicDustTitle.textContent = translations[lang].cosmicDustTitle;
                currentCosmicDustLabel.textContent = translations[lang].currentCosmicDustLabel;
                cosmicDustPerSecondLabel.textContent = translations[lang].cosmicDustPerSecondLabel;
                buyCosmicDustBtnText.textContent = translations[lang].buyCosmicDustBtnText(resources.cosmicDust.conversionCost);
                generateLoreBtnTextCosmicDust.textContent = translations[lang].generateLoreBtnText;

                stellarNucleusTitle.textContent = translations[lang].stellarNucleusTitle;
                currentStellarNucleusLabel.textContent = translations[lang].currentStellarNucleusLabel;
                stellarNucleusPerSecondLabel.textContent = translations[lang].stellarNucleusPerSecondLabel;
                buyStellarNucleusBtnText.textContent = translations[lang].buyStellarNucleusBtnText(resources.stellarNucleus.conversionCost);
                generateLoreBtnTextStellarNucleus.textContent = translations[lang].generateLoreBtnText;

                galacticCoreTitle.textContent = translations[lang].galacticCoreTitle;
                currentGalacticCoreLabel.textContent = translations[lang].currentGalacticCoreLabel;
                galacticCorePerSecondLabel.textContent = translations[lang].galacticCorePerSecondLabel;
                buyGalacticCoreBtnText.textContent = translations[lang].buyGalacticCoreBtnText(resources.galacticCore.conversionCost);
                generateLoreBtnTextGalacticCore.textContent = translations[lang].generateLoreBtnText;

                stage6Title.textContent = translations[lang].stage6Title;
                stage6Description.textContent = translations[lang].stage6Description;

                quantumEntanglementTitle.textContent = translations[lang].quantumEntanglementTitle;
                currentQuantumEntanglementLabel.textContent = translations[lang].currentQuantumEntanglementLabel;
                quantumEntanglementPerSecondLabel.textContent = translations[lang].quantumEntanglementPerSecondLabel;
                buyQuantumEntanglementBtnText.textContent = translations[lang].buyQuantumEntanglementBtnText(resources.quantumEntanglement.conversionCost);
                generateLoreBtnTextQuantumEntanglement.textContent = translations[lang].generateLoreBtnText;

                dimensionalRiftTitle.textContent = translations[lang].dimensionalRiftTitle;
                currentDimensionalRiftLabel.textContent = translations[lang].currentDimensionalRiftLabel;
                dimensionalRiftPerSecondLabel.textContent = translations[lang].dimensionalRiftPerSecondLabel;
                buyDimensionalRiftBtnText.textContent = translations[lang].buyDimensionalRiftBtnText(resources.dimensionalRift.conversionCost);
                generateLoreBtnTextDimensionalRift.textContent = translations[lang].generateLoreBtnText;

                realityAnchorTitle.textContent = translations[lang].realityAnchorTitle;
                currentRealityAnchorLabel.textContent = translations[lang].currentRealityAnchorLabel;
                realityAnchorPerSecondLabel.textContent = translations[lang].realityAnchorPerSecondLabel;
                buyRealityAnchorBtnText.textContent = translations[lang].buyRealityAnchorBtnText(resources.realityAnchor.conversionCost);
                generateLoreBtnTextRealityAnchor.textContent = translations[lang].generateLoreBtnText;

                stage7Title.textContent = translations[lang].stage7Title;
                stage7Description.textContent = translations[lang].stage7Description;

                omniEnergyTitle.textContent = translations[lang].omniEnergyTitle;
                currentOmniEnergyLabel.textContent = translations[lang].currentOmniEnergyLabel;
                omniEnergyPerSecondLabel.textContent = translations[lang].omniEnergyPerSecondLabel;
                buyOmniEnergyBtnText.textContent = translations[lang].buyOmniEnergyBtnText(resources.omniEnergy.conversionCost);
                generateLoreBtnTextOmniEnergy.textContent = translations[lang].generateLoreBtnText;

                primeMoverTitle.textContent = translations[lang].primeMoverTitle;
                currentPrimeMoverLabel.textContent = translations[lang].currentPrimeMoverLabel;
                primeMoverPerSecondLabel.textContent = translations[lang].primeMoverPerSecondLabel;
                buyPrimeMoverBtnText.textContent = translations[lang].buyPrimeMoverBtnText(resources.primeMover.conversionCost);
                generateLoreBtnTextPrimeMover.textContent = translations[lang].generateLoreBtnText;

                trueCreatorTitle.textContent = translations[lang].trueCreatorTitle;
                currentTrueCreatorLabel.textContent = translations[lang].currentTrueCreatorLabel;
                trueCreatorPerSecondLabel.textContent = translations[lang].trueCreatorPerSecondLabel;
                buyTrueCreatorBtnText.textContent = translations[lang].buyTrueCreatorBtnText(resources.trueCreator.conversionCost);
                generateLoreBtnTextTrueCreator.textContent = translations[lang].generateLoreBtnText;

                stage8Title.textContent = translations[lang].stage8Title;
                stage8Description.textContent = translations[lang].stage8Description;

                cosmicSingularityTitle.textContent = translations[lang].cosmicSingularityTitle;
                currentCosmicSingularityLabel.textContent = translations[lang].currentCosmicSingularityLabel;
                cosmicSingularityPerSecondLabel.textContent = translations[lang].cosmicSingularityPerSecondLabel;
                buyCosmicSingularityBtnText.textContent = translations[lang].buyCosmicSingularityBtnText(resources.cosmicSingularity.conversionCost);
                generateLoreBtnTextCosmicSingularity.textContent = translations[lang].generateLoreBtnText;

                existentialTruthTitle.textContent = translations[lang].existentialTruthTitle;
                currentExistentialTruthLabel.textContent = translations[lang].currentExistentialTruthLabel;
                existentialTruthPerSecondLabel.textContent = translations[lang].existentialTruthPerSecondLabel;
                buyExistentialTruthBtnText.textContent = translations[lang].buyExistentialTruthBtnText(resources.existentialTruth.conversionCost);
                generateLoreBtnTextExistentialTruth.textContent = translations[lang].generateLoreBtnText;

                theUltimateFormTitle.textContent = translations[lang].theUltimateFormTitle;
                currentTheUltimateFormLabel.textContent = translations[lang].currentTheUltimateFormLabel;
                theUltimateFormPerSecondLabel.textContent = translations[lang].theUltimateFormPerSecondLabel;
                buyTheUltimateFormBtnText.textContent = translations[lang].buyTheUltimateFormBtnText(resources.theUltimateForm.conversionCost);
                generateLoreBtnTextTheUltimateForm.textContent = translations[lang].generateLoreBtnText;

                discordInviteText.textContent = translations[lang].discordInviteText;

                // Update placeholder for quiz input
                quizAnswerInput.placeholder = translations[lang].quizAnswerInputPlaceholder;
            }

            function updateDisplay() {
                // Update all resources based on their perSecond rates
                woodCountSpan.textContent = resources.wood.count.toFixed(0);
                woodPerSecondSpan.textContent = resources.wood.perSecond.toFixed(1);
                chopPowerDisplay.textContent = `+${resources.wood.manualClickAmount}`;
                chopUpgradeCostSpan.textContent = resources.wood.upgradeCost;
                upgradeChopPowerButton.disabled = resources.wood.count < resources.wood.upgradeCost;
                woodPerSecondCostSpan.textContent = resources.wood.automationCost.toFixed(0);
                buyWoodPerSecondButton.disabled = resources.wood.count < resources.wood.automationCost;

                stoneCountSpan.textContent = resources.stone.count.toFixed(0);
                stonePerSecondSpan.textContent = resources.stone.perSecond.toFixed(1);
                buyStoneButton.disabled = resources.wood.count < resources.stone.conversionCost;

                ironCountSpan.textContent = resources.iron.count.toFixed(0);
                ironPerSecondSpan.textContent = resources.iron.perSecond.toFixed(1);
                buyIronButton.disabled = resources.stone.count < resources.iron.conversionCost;

                alloyCountSpan.textContent = resources.alloy.count.toFixed(0);
                alloyPerSecondSpan.textContent = resources.alloy.perSecond.toFixed(1);
                buyAlloyButton.disabled = resources.iron.count < resources.alloy.conversionCost;

                circuitryCountSpan.textContent = resources.circuitry.count.toFixed(0);
                circuitryPerSecondSpan.textContent = resources.circuitry.perSecond.toFixed(1);
                buyCircuitryButton.disabled = resources.alloy.count < resources.circuitry.conversionCost;

                aiCoreCountSpan.textContent = resources.aiCore.count.toFixed(0);
                aiCorePerSecondSpan.textContent = resources.aiCore.perSecond.toFixed(1);
                buyAICoreButton.disabled = resources.circuitry.count < resources.aiCore.conversionCost;

                consciousnessCountSpan.textContent = resources.consciousness.count.toFixed(0);
                consciousnessPerSecondSpan.textContent = resources.consciousness.perSecond.toFixed(1);
                buyConsciousnessButton.disabled = resources.aiCore.count < resources.consciousness.conversionCost;

                realityShardCountSpan.textContent = resources.realityShard.count.toFixed(0);
                realityShardPerSecondSpan.textContent = resources.realityShard.perSecond.toFixed(1);
                buyRealityShardButton.disabled = resources.consciousness.count < resources.realityShard.conversionCost;

                paradoxCountSpan.textContent = resources.paradox.count.toFixed(0);
                paradoxPerSecondSpan.textContent = resources.paradox.perSecond.toFixed(1);
                buyParadoxButton.disabled = resources.realityShard.count < resources.paradox.conversionCost;

                singularityCountSpan.textContent = resources.singularity.count.toFixed(0);
                singularityPerSecondSpan.textContent = resources.singularity.perSecond.toFixed(1);
                buySingularityButton.disabled = resources.paradox.count < resources.singularity.conversionCost;

                multiverseCountSpan.textContent = resources.multiverse.count.toFixed(0);
                multiversePerSecondSpan.textContent = resources.multiverse.perSecond.toFixed(1);
                buyMultiverseButton.disabled = resources.singularity.count < resources.multiverse.conversionCost;

                omniscienceCountSpan.textContent = resources.omniscience.count.toFixed(0);
                omnisciencePerSecondSpan.textContent = resources.omniscience.perSecond.toFixed(1);
                buyOmniscienceButton.disabled = resources.multiverse.count < resources.omniscience.conversionCost;

                genesisCountSpan.textContent = resources.genesis.count.toFixed(0);
                genesisPerSecondSpan.textContent = resources.genesis.perSecond.toFixed(1);
                buyGenesisButton.disabled = resources.omniscience.count < resources.genesis.conversionCost;

                voidCountSpan.textContent = resources.void.count.toFixed(0);
                voidPerSecondSpan.textContent = resources.void.perSecond.toFixed(1);
                buyVoidButton.disabled = resources.genesis.count < resources.void.conversionCost;

                theAllCountSpan.textContent = resources.theAll.count.toFixed(0);
                theAllPerSecondSpan.textContent = resources.theAll.perSecond.toFixed(1);
                theAllCost.textContent = resources.theAll.conversionCost;
                buyTheAllButton.disabled = resources.void.count < resources.theAll.conversionCost;

                transcendenceCountSpan.textContent = resources.transcendence.count.toFixed(0);
                transcendencePerSecondSpan.textContent = resources.transcendence.perSecond.toFixed(1);
                transcendenceCost.textContent = resources.transcendence.conversionCost;
                buyTranscendenceButton.disabled = resources.theAll.count < resources.transcendence.conversionCost;

                theAbsoluteCountSpan.textContent = resources.theAbsolute.count.toFixed(0);
                theAbsolutePerSecondSpan.textContent = resources.theAbsolute.perSecond.toFixed(1);
                theAbsoluteCost.textContent = resources.theAbsolute.conversionCost;
                buyTheAbsoluteButton.disabled = resources.transcendence.count < resources.theAbsolute.conversionCost;

                theEndCountSpan.textContent = resources.theEnd.count.toFixed(0);
                theEndPerSecondSpan.textContent = resources.theEnd.perSecond.toFixed(1);
                theEndCost.textContent = resources.theEnd.conversionCost;
                buyTheEndButton.disabled = resources.theAbsolute.count < resources.theEnd.conversionCost;

                theNewBeginningCountSpan.textContent = resources.theNewBeginning.count.toFixed(0);
                theNewBeginningPerSecondSpan.textContent = resources.theNewBeginning.perSecond.toFixed(1);
                theNewBeginningCostSpan.textContent = resources.theNewBeginning.conversionCost;
                buyTheNewBeginningButton.disabled = resources.theEnd.count < resources.theNewBeginning.conversionCost;

                theArchitectsWillCountSpan.textContent = resources.theArchitectsWill.count.toFixed(0);
                theArchitectsWillPerSecondSpan.textContent = resources.theArchitectsWill.perSecond.toFixed(1);
                theArchitectsWillCostSpan.textContent = resources.theArchitectsWill.conversionCost;
                buyTheArchitectsWillButton.disabled = resources.theNewBeginning.count < resources.theArchitectsWill.conversionCost;

                theOmniverseCountSpan.textContent = resources.theOmniverse.count.toFixed(0);
                theOmniversePerSecondSpan.textContent = resources.theOmniverse.perSecond.toFixed(1);
                theOmniverseCost.textContent = resources.theOmniverse.conversionCost;
                buyTheOmniverseButton.disabled = resources.theArchitectsWill.count < resources.theOmniverse.conversionCost;

                theBoundlessVoidCountSpan.textContent = resources.theBoundlessVoid.count.toFixed(0);
                theBoundlessVoidPerSecondSpan.textContent = resources.theBoundlessVoid.perSecond.toFixed(1);
                theBoundlessVoidCost.textContent = resources.theBoundlessVoid.conversionCost;
                buyTheBoundlessVoidButton.disabled = resources.theOmniverse.count < resources.theBoundlessVoid.conversionCost;

                cosmicFabricCountSpan.textContent = resources.cosmicFabric.count.toFixed(0);
                cosmicFabricPerSecondSpan.textContent = resources.cosmicFabric.perSecond.toFixed(1);
                cosmicFabricCost.textContent = resources.cosmicFabric.conversionCost;
                buyCosmicFabricButton.disabled = resources.theBoundlessVoid.count < resources.cosmicFabric.conversionCost;

                infiniteNexusCountSpan.textContent = resources.infiniteNexus.count.toFixed(0);
                infiniteNexusPerSecondSpan.textContent = resources.infiniteNexus.perSecond.toFixed(1);
                infiniteNexusCost.textContent = resources.infiniteNexus.conversionCost;
                buyInfiniteNexusButton.disabled = resources.cosmicFabric.count < resources.infiniteNexus.conversionCost;

                eternalEchoCountSpan.textContent = resources.eternalEcho.count.toFixed(0);
                eternalEchoPerSecondSpan.textContent = resources.eternalEcho.perSecond.toFixed(1);
                eternalEchoCost.textContent = resources.eternalEcho.conversionCost;
                buyEternalEchoButton.disabled = resources.infiniteNexus.count < resources.eternalEcho.conversionCost;

                zenithOfCreationCountSpan.textContent = resources.zenithOfCreation.count.toFixed(0);
                zenithOfCreationPerSecondSpan.textContent = resources.zenithOfCreation.perSecond.toFixed(1);
                zenithOfCreationCost.textContent = resources.zenithOfCreation.conversionCost;
                buyZenithOfCreationButton.disabled = resources.eternalEcho.count < resources.zenithOfCreation.conversionCost;

                universalSingularityCountSpan.textContent = resources.universalSingularity.count.toFixed(0);
                universalSingularityPerSecondSpan.textContent = resources.universalSingularity.perSecond.toFixed(1);
                universalSingularityCost.textContent = resources.universalSingularity.conversionCost;
                buyUniversalSingularityButton.disabled = resources.zenithOfCreation.count < resources.universalSingularity.conversionCost;

                existentialFabricCountSpan.textContent = resources.existentialFabric.count.toFixed(0);
                existentialFabricPerSecondSpan.textContent = resources.existentialFabric.perSecond.toFixed(1);
                existentialFabricCost.textContent = resources.existentialFabric.conversionCost;
                buyExistentialFabricButton.disabled = resources.universalSingularity.count < resources.existentialFabric.conversionCost;

                temporalFluxCountSpan.textContent = resources.temporalFlux.count.toFixed(0);
                temporalFluxPerSecondSpan.textContent = resources.temporalFlux.perSecond.toFixed(1);
                temporalFluxCost.textContent = resources.temporalFlux.conversionCost;
                buyTemporalFluxButton.disabled = resources.existentialFabric.count < resources.temporalFlux.conversionCost;

                multidimensionalHarmonyCountSpan.textContent = resources.multidimensionalHarmony.count.toFixed(0);
                multidimensionalHarmonyPerSecondSpan.textContent = resources.multidimensionalHarmony.perSecond.toFixed(1);
                multidimensionalHarmonyCost.textContent = resources.multidimensionalHarmony.conversionCost;
                buyMultidimensionalHarmonyButton.disabled = resources.temporalFlux.count < resources.multidimensionalHarmony.conversionCost;

                cosmicAwakeningCountSpan.textContent = resources.cosmicAwakening.count.toFixed(0);
                cosmicAwakeningPerSecondSpan.textContent = resources.cosmicAwakening.perSecond.toFixed(1);
                cosmicAwakeningCost.textContent = resources.cosmicAwakening.conversionCost;
                buyCosmicAwakeningButton.disabled = resources.multidimensionalHarmony.count < resources.cosmicAwakening.conversionCost;

                divineSparkCountSpan.textContent = resources.divineSpark.count.toFixed(0);
                divineSparkPerSecondSpan.textContent = resources.divineSpark.perSecond.toFixed(1);
                divineSparkCost.textContent = resources.divineSpark.conversionCost;
                buyDivineSparkButton.disabled = resources.cosmicAwakening.count < resources.divineSpark.conversionCost;

                // Stage 5
                cosmicDustCountSpan.textContent = resources.cosmicDust.count.toFixed(0);
                cosmicDustPerSecondSpan.textContent = resources.cosmicDust.perSecond.toFixed(1);
                cosmicDustCost.textContent = resources.cosmicDust.conversionCost;
                buyCosmicDustButton.disabled = resources.divineSpark.count < resources.cosmicDust.conversionCost;

                stellarNucleusCountSpan.textContent = resources.stellarNucleus.count.toFixed(0);
                stellarNucleusPerSecondSpan.textContent = resources.stellarNucleus.perSecond.toFixed(1);
                stellarNucleusCost.textContent = resources.stellarNucleus.conversionCost;
                buyStellarNucleusButton.disabled = resources.cosmicDust.count < resources.stellarNucleus.conversionCost;

                galacticCoreCountSpan.textContent = resources.galacticCore.count.toFixed(0);
                galacticCorePerSecondSpan.textContent = resources.galacticCore.perSecond.toFixed(1);
                galacticCoreCost.textContent = resources.galacticCore.conversionCost;
                buyGalacticCoreButton.disabled = resources.stellarNucleus.count < resources.galacticCore.conversionCost;

                // Stage 6
                quantumEntanglementCountSpan.textContent = resources.quantumEntanglement.count.toFixed(0);
                quantumEntanglementPerSecondSpan.textContent = resources.quantumEntanglement.perSecond.toFixed(1);
                quantumEntanglementCost.textContent = resources.quantumEntanglement.conversionCost;
                buyQuantumEntanglementButton.disabled = resources.galacticCore.count < resources.quantumEntanglement.conversionCost;

                dimensionalRiftCountSpan.textContent = resources.dimensionalRift.count.toFixed(0);
                dimensionalRiftPerSecondSpan.textContent = resources.dimensionalRift.perSecond.toFixed(1);
                dimensionalRiftCost.textContent = resources.dimensionalRift.conversionCost;
                buyDimensionalRiftButton.disabled = resources.quantumEntanglement.count < resources.dimensionalRift.conversionCost;

                realityAnchorCountSpan.textContent = resources.realityAnchor.count.toFixed(0);
                realityAnchorPerSecondSpan.textContent = resources.realityAnchor.perSecond.toFixed(1);
                realityAnchorCost.textContent = resources.realityAnchor.conversionCost;
                buyRealityAnchorButton.disabled = resources.dimensionalRift.count < resources.realityAnchor.conversionCost;

                // Stage 7
                omniEnergyCountSpan.textContent = resources.omniEnergy.count.toFixed(0);
                omniEnergyPerSecondSpan.textContent = resources.omniEnergy.perSecond.toFixed(1);
                omniEnergyCost.textContent = resources.omniEnergy.conversionCost;
                buyOmniEnergyButton.disabled = resources.realityAnchor.count < resources.omniEnergy.conversionCost;

                primeMoverCountSpan.textContent = resources.primeMover.count.toFixed(0);
                primeMoverPerSecondSpan.textContent = resources.primeMover.perSecond.toFixed(1);
                primeMoverCost.textContent = resources.primeMover.conversionCost;
                buyPrimeMoverButton.disabled = resources.omniEnergy.count < resources.primeMover.conversionCost;

                trueCreatorCountSpan.textContent = resources.trueCreator.count.toFixed(0);
                trueCreatorPerSecondSpan.textContent = resources.trueCreator.perSecond.toFixed(1);
                trueCreatorCost.textContent = resources.trueCreator.conversionCost;
                buyTrueCreatorButton.disabled = resources.primeMover.count < resources.trueCreator.conversionCost;

                // Stage 8
                cosmicSingularityCountSpan.textContent = resources.cosmicSingularity.count.toFixed(0);
                cosmicSingularityPerSecondSpan.textContent = resources.cosmicSingularity.perSecond.toFixed(1);
                cosmicSingularityCost.textContent = resources.cosmicSingularity.conversionCost;
                buyCosmicSingularityButton.disabled = resources.trueCreator.count < resources.cosmicSingularity.conversionCost;

                existentialTruthCountSpan.textContent = resources.existentialTruth.count.toFixed(0);
                existentialTruthPerSecondSpan.textContent = resources.existentialTruth.perSecond.toFixed(1);
                existentialTruthCost.textContent = resources.existentialTruth.conversionCost;
                buyExistentialTruthButton.disabled = resources.cosmicSingularity.count < resources.existentialTruth.conversionCost;

                theUltimateFormCountSpan.textContent = resources.theUltimateForm.count.toFixed(0);
                theUltimateFormPerSecondSpan.textContent = resources.theUltimateForm.perSecond.toFixed(1);
                theUltimateFormCost.textContent = resources.theUltimateForm.conversionCost;
                buyTheUltimateFormButton.disabled = resources.existentialTruth.count < resources.theUltimateForm.conversionCost;

                // Update TTS status display
                ttsStatusSpan.textContent = resources.textToSpeechEnabled ? 'On' : 'Off';

                // Update all text content based on current language
                updateTextContent();
            }

            function addWood() {
                let woodEarned = resources.wood.manualClickAmount;
                let isCritical = false;

                if (Math.random() < resources.wood.criticalChance) {
                    woodEarned *= resources.wood.criticalMultiplier;
                    isCritical = true;
                }

                resources.wood.count += woodEarned;
                updateDisplay();

                if (isCritical) {
                    criticalHitTextSpan.textContent = translations[resources.language].criticalHitText(woodEarned.toFixed(0));
                    criticalHitFeedbackDiv.style.opacity = 1;
                    speakText(translations[resources.language].criticalHitText(woodEarned.toFixed(0)));
                } else {
                    criticalHitFeedbackDiv.style.opacity = 0;
                }
            }

            function dismissCriticalFeedback() {
                criticalHitFeedbackDiv.style.opacity = 0;
                criticalHitTextSpan.textContent = '';
            }

            function upgradeChopPower() {
                const cost = resources.wood.upgradeCost;
                if (resources.wood.count >= cost) {
                    resources.wood.count -= cost;
                    resources.wood.manualClickAmount += resources.wood.upgradeAmount;
                    resources.wood.upgradeCost = Math.round(resources.wood.upgradeCost * resources.wood.upgradeMultiplier);
                    speakText(translations[resources.language].upgradeChopPowerSuccess);

                    updateDisplay();
                //    speakText(translations[resources.language].woodUpgradeAlert(resources.wood.manualClickAmount));
                } else {
                    const message = translations[resources.language].woodUpgradeAlert(cost);
                    alert(message);
                    speakText(message);
                }
            }

            function buyWoodPerSecondAutomation() {
                const cost = resources.wood.automationCost;
                if (resources.wood.count >= cost) {
                    resources.wood.count -= cost;
                    resources.wood.perSecond += resources.wood.automationAmount;
                    resources.wood.automationCost = Math.round(resources.wood.automationCost * resources.wood.automationMultiplier);
                    updateDisplay();
                    speakText(translations[resources.language].woodAutomationSuccess);
                } else {
                    const message = translations[resources.language].woodAutomationAlert(cost);
                    alert(message);
                    speakText(message);
                }
            }

            function buyResource(resourceToBuy, previousResource) {
                const cost = resources[resourceToBuy].conversionCost;
                if (resources[previousResource].count >= cost) {
                    resources[previousResource].count -= cost;
                    resources[resourceToBuy].count += 1;
                    resources[resourceToBuy].perSecond += resources[resourceToBuy].perUnitProduction;
                    updateDisplay();
                    const displayResourceName = translations[resources.language][`${resourceToBuy}Title`]; // Get translated resource name
                    speakText(translations[resources.language].buyResourceNotification(displayResourceName));
                } else {
                    const previousResourceDisplay = translations[resources.language][`${previousResource}Title`]; // Get translated previous resource name
                    const resourceToBuyDisplay = translations[resources.language][`${resourceToBuy}Title`]; // Get translated resource name
                    const message = translations[resources.language].notEnoughResource(previousResourceDisplay, resourceToBuyDisplay, cost);
                    alert(message);
                    speakText(message);
                }
            }

            // Add buyResourceNotification and notEnoughResource to translations
            translations.en.buyResourceNotification = (resourceName) => `You bought 1 ${resourceName}!`;
            translations.en.notEnoughResource = "";
            translations.vi.buyResourceNotification = (resourceName) => `Bạn đã mua 1 ${resourceName}!`;
            translations.vi.notEnoughResource = "";


            function saveGame(integer) {
                try {
                    const saveData = {
                        resources: resources
                    };
                    localStorage.setItem('incrementalGameSave', JSON.stringify(saveData));
                    if (integer !== 1) {
                        const message = translations[resources.language].gameSaved;
                        alert(message);
                        speakText(message);
                    }
                } catch (e) {
                    console.error("Lỗi khi lưu game:", e);
                    const errorMessage = translations[resources.language].gameLoadError;
                    alert(errorMessage);
                    speakText(errorMessage);
                }
            }

            function loadGame() {
                try {
                    const savedData = localStorage.getItem('incrementalGameSave');
                    if (savedData) {
                        const parsedData = JSON.parse(savedData);
                        const loadedResources = parsedData.resources;

                        for (const key in resources) {
                            if (loadedResources[key] !== undefined) {
                                if (typeof resources[key] === 'object' && resources[key] !== null &&
                                    typeof loadedResources[key] === 'object' && loadedResources[key] !== null) {
                                    Object.assign(resources[key], loadedResources[key]);
                                } else {
                                    resources[key] = loadedResources[key];
                                }
                            }
                        }
                        updateDisplay();
                        const message = translations[resources.language].gameLoadSuccess;
                        alert(message);
                        speakText(message);
                    } else {
                        const message = translations[resources.language].gameLoadNoData;
                        alert(message);
                        speakText(message);
                    }
                } catch (e) {
                    console.error("Lỗi khi tải game:", e);
                    const errorMessage = translations[resources.language].gameLoadError;
                    alert(errorMessage);
                    speakText(errorMessage);
                }
            }

            let cheatCodeSequence = [];
            const cheatCode = "add10kwood";

            function handleCheatCode(event) {
                cheatCodeSequence.push(event.key.toLowerCase());
                if (cheatCodeSequence.length > cheatCode.length) {
                    cheatCodeSequence.shift();
                }

                if (cheatCodeSequence.join('') === cheatCode) {
                    resources.wood.count += 10000;
                    updateDisplay();
                    const message = translations[resources.language].cheatActivated;
                    alert(message);
                    speakText(message);
                    cheatCodeSequence = [];
                }
            }

            const quizQuestions = {
                en: [
                    { question: "What is the first resource you collect?", answer: "wood", reward: 500 },
                    { question: "What resource comes after Stone?", answer: "iron", reward: 750 },
                    { question: "How many Wood do you need to buy 1 Stone?", answer: "1000", reward: 1000 },
                    { question: "What is the next resource after Alloy?", answer: "circuitry", reward: 1500 },
                    { question: "What material is produced after AI Core?", answer: "consciousness", reward: 2000 },
                    { question: "Which resource is obtained after Genesis?", answer: "void", reward: 5000 },
                    { question: "How much Wood do you get per second after automating it once?", answer: "5", reward: 1000 },
                    { question: "What comes after Singularity?", answer: "multiverse", reward: 2500 },
                    { question: "What is the resource after Omniscience?", answer: "genesis", reward: 3000 },
                    { question: "What is the final resource after The Absolute?", answer: "the end", reward: 10000 },
                    { question: "What is the resource after The End?", answer: "the new beginning", reward: 15000 },
                    { question: "What is the resource after The New Beginning?", answer: "the architect's will", reward: 20000 },
                    { question: "What comes after The Architect's Will?", answer: "the omniverse", reward: 50000 },
                    { question: "What comes after The Omniverse?", answer: "the boundless void", reward: 100000 },
                    { question: "What comes after The Boundless Void?", answer: "cosmic fabric", reward: 150000 },
                    { question: "What is the second to last resource in Stage 3?", answer: "eternal echo", reward: 200000 },
                    { question: "What is the final resource in Stage 3?", answer: "zenith of creation", reward: 250000 },
                    { question: "What comes after Zenith of Creation?", answer: "universal singularity", reward: 300000 },
                    { question: "What is the resource after Universal Singularity?", answer: "existential fabric", reward: 350000 },
                    { question: "What is the resource after Temporal Flux?", answer: "multidimensional harmony", reward: 400000 },
                    { question: "What is the ultimate resource of all?", answer: "The Ultimate Form", reward: 500000 }
                ],
                vi: [
                    { question: "Tài nguyên đầu tiên bạn thu thập là gì?", answer: "gỗ", reward: 500 },
                    { question: "Tài nguyên nào đến sau Đá?", answer: "sắt", reward: 750 },
                    { question: "Bạn cần bao nhiêu Gỗ để mua 1 Đá?", answer: "1000", reward: 1000 },
                    { question: "Tài nguyên tiếp theo sau Hợp Kim là gì?", answer: "mạch điện", reward: 1500 },
                    { question: "Vật liệu nào được sản xuất sau Lõi AI?", answer: "ý thức", reward: 2000 },
                    { question: "Tài nguyên nào thu được sau Sáng Thế?", answer: "hư không", reward: 5000 },
                    { question: "Bạn nhận được bao nhiêu Gỗ mỗi giây sau khi tự động hóa một lần?", answer: "5", reward: 1000 },
                    { question: "Điều gì đến sau Điểm Kỳ Dị?", answer: "đa vũ trụ", reward: 2500 },
                    { question: "Tài nguyên sau Toàn Tri là gì?", answer: "sáng thế", reward: 3000 },
                    { question: "Tài nguyên cuối cùng sau Tuyệt Đối là gì?", answer: "điểm kết thúc", reward: 10000 },
                    { question: "Tài nguyên sau Điểm Kết Thúc là gì?", answer: "khởi nguyên mới", reward: 15000 },
                    { question: "Tài nguyên sau Khởi Nguyên Mới là gì?", answer: "ý chí kiến trúc sư", reward: 20000 },
                    { question: "Điều gì đến sau Ý Chí Kiến Trúc Sư?", answer: "đa vũ trụ tuyệt đối", reward: 50000 },
                    { question: "Điều gì đến sau Đa Vũ Trụ Tuyệt Đối?", answer: "hư không vô tận", reward: 100000 },
                    { question: "Điều gì đến sau Hư Không Vô Tận?", answer: "vải vũ trụ", reward: 150000 },
                    { question: "Tài nguyên thứ hai từ cuối trong Giai Đoạn 3 là gì?", answer: "tiếng vọng vĩnh hằng", reward: 200000 },
                    { question: "Tài nguyên cuối cùng trong Giai Đoạn 3 là gì?", answer: "đỉnh cao sáng tạo", reward: 250000 },
                    { question: "Điều gì đến sau Đỉnh Cao Sáng Tạo?", answer: "điểm kỳ dị vũ trụ", reward: 300000 },
                    { question: "Tài nguyên sau Điểm Kỳ Dị Vũ Trụ là gì?", answer: "vải tồn tại", reward: 350000 },
                    { question: "Tài nguyên sau Dòng Thời Gian là gì?", answer: "hòa hợp đa chiều", reward: 400000 },
                    { question: "Tài nguyên tối thượng của tất cả là gì?", answer: "Hình Thức Tối Thượng", reward: 500000 }
                ]
            };

            let currentQuestion = null;
            let answeredQuestions = [];
            const QUIZ_COOLDOWN_MS = 5000;
            let quizCooldownTimer = 0;

            function loadNewQuestion() {
                const currentQuizQuestions = quizQuestions[resources.language];
                if (currentQuizQuestions.length === 0) {
                    const message = translations[resources.language].quizNoMoreQuestions;
                    quizQuestionParagraph.textContent = message;
                    quizAnswerInput.disabled = true;
                    submitQuizAnswerButton.disabled = true;
                    speakText(message);
                    return;
                }

                if (answeredQuestions.length === currentQuizQuestions.length) {
                    answeredQuestions = []; // Reset if all questions have been asked
                }

                let randomIndex;
                do {
                    randomIndex = Math.floor(Math.random() * currentQuizQuestions.length);
                } while (answeredQuestions.includes(randomIndex));

                answeredQuestions.push(randomIndex);
                currentQuestion = currentQuizQuestions[randomIndex];

                quizQuestionParagraph.textContent = currentQuestion.question;
                quizAnswerInput.value = '';
                quizFeedbackParagraph.textContent = '';
                quizAnswerInput.disabled = false;
                submitQuizAnswerButton.disabled = false;
                speakText(currentQuestion.question);
            }

            function checkAnswer() {
                if (!currentQuestion) return;

                const userAnswer = quizAnswerInput.value.trim().toLowerCase();
                const correctAnswer = String(currentQuestion.answer).toLowerCase();
                let feedbackMessage;

                if (userAnswer === correctAnswer) {
                    resources.wood.count += currentQuestion.reward;
                    feedbackMessage = translations[resources.language].quizCorrect(currentQuestion.reward);
                    quizFeedbackParagraph.style.color = 'green';
                    updateDisplay();
                } else {
                    feedbackMessage = translations[resources.language].quizIncorrect(currentQuestion.answer);
                    quizFeedbackParagraph.style.color = 'red';
                }

                quizFeedbackParagraph.textContent = feedbackMessage;
                speakText(feedbackMessage);

                quizAnswerInput.disabled = true;
                submitQuizAnswerButton.disabled = true;

                quizCooldownTimer = Date.now();
                setTimeout(() => {
                    loadNewQuestion();
                }, QUIZ_COOLDOWN_MS);
            }

            async function generateLore(resourceName, loreDisplayElement) {
                const lang = resources.language;
                loreDisplayElement.textContent = translations[lang].loreGenerating;
                loreDisplayElement.style.color = '#555';
                speakText(translations[lang].loreGenerating);

                try {
                    // Adjust prompt based on language
                    const prompt = lang === 'en'
                        ? `Write a short, imaginative paragraph (around 30-50 words) about the resource "${resourceName}" in an incremental game. Focus on its meaning, how it's used, or the feeling of collecting it in a sci-fi adventure game context.`
                        : `Viết một đoạn văn ngắn, giàu trí tưởng tượng (khoảng 30-50 từ) về tài nguyên "${resourceName}" trong một trò chơi incremental. Tập trung vào ý nghĩa, cách nó được sử dụng, hoặc cảm giác khi thu thập nó trong bối cảnh trò chơi phiêu lưu khoa học viễn tưởng.`;

                    let chatHistory = [];
                    chatHistory.push({ role: "user", parts: [{ text: prompt }] });

                    const payload = { contents: chatHistory };
                    const apiKey = resources.apiKey;

                    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) {
                        const errorData = await response.json();
                        throw new Error(translations[lang].loreApiError(response.status, response.statusText, errorData));
                    }

                    const result = await response.json();

                    if (result.candidates && result.candidates.length > 0 &&
                        result.candidates[0].content && result.candidates[0].content.parts &&
                        result.candidates[0].content.parts.length > 0) {
                        const text = result.candidates[0].content.parts[0].text;
                        loreDisplayElement.textContent = text;
                        loreDisplayElement.style.color = '#388e3c';
                        speakText(text);
                    } else {
                        const errorMessage = translations[lang].loreResponseError;
                        loreDisplayElement.textContent = errorMessage;
                        loreDisplayElement.style.color = 'orange';
                        speakText(errorMessage);
                    }
                } catch (error) {
                    console.error("Lỗi khi gọi Gemini API:", error);
                    const errorMessage = translations[lang].loreGenericError;
                    loreDisplayElement.textContent = errorMessage;
                    loreDisplayElement.style.color = 'red';
                    speakText(errorMessage);
                }
            }

            function formatTime(ms) {
                let seconds = Math.floor(ms / 1000);
                let minutes = Math.floor(seconds / 60);
                let hours = Math.floor(minutes / 60);

                seconds = seconds % 60;
                minutes = minutes % 60;

                const pad = (num) => num < 10 ? '0' + num : num;

                return `${pad(hours)}:${pad(minutes)}:${pad(seconds)}`;
            }

            function updateTimePlayed() {
                resources.timePlayed.second += 1;
                if (resources.timePlayed.second === 60) {
                    resources.timePlayed.second = 0;
                    resources.timePlayed.minute += 1;
                }
                if (resources.timePlayed.minute === 60) {
                    resources.timePlayed.minute = 0;
                    resources.timePlayed.hour += 1;
                }
                document.getElementById('timePlayed').textContent = resources.timePlayed.hour.toString().padStart(2, '0') + ":" + resources.timePlayed.minute.toString().padStart(2, '0') + ":" + resources.timePlayed.second.toString().padStart(2, '0');
            }

            function notify(type, message) {
                (() => {
                    let n = document.createElement("div");
                    let id = Math.random().toString(36).substr(2, 10);
                    n.setAttribute("id", id);
                    n.classList.add("notification", type);
                    n.classList.add("fade_out");
                    n.innerText = message;
                    document.getElementById("notification-area").appendChild(n);
                    setTimeout(() => {
                        var notifications = document.getElementById("notification-area").getElementsByClassName("notification");
                        for (let i = 0; i < notifications.length; i++) {
                            if (notifications[i].getAttribute("id") === id) {
                                notifications[i].remove();
                                break;
                            }
                        }
                    }, 5000);
                })();

                if (resources.textToSpeechEnabled) {
                    speakText(message);
                }
            }

                function speakText(text) {
                if ('speechSynthesis' in window && resources.textToSpeechEnabled) {
                 
                   // speechSynthesis.cancel(); // Stop current speech
                    const utterance = new SpeechSynthesisUtterance(text);
                    utterance.lang = resources.language === 'en' ? 'en-US' : 'vi-VN';
                   if(resources.lastMessage == utterance.text){
                  //   speechSynthesis.cancel(); 
                      }
                   else {
                    speechSynthesis.speak(utterance);
                      }
                        resources.lastMessage = text;
                }
            }


            function toggleTextToSpeech() {
                resources.textToSpeechEnabled = !resources.textToSpeechEnabled;
                updateDisplay();
                saveGame(1); // Save the TTS setting silently
                if (resources.textToSpeechEnabled) {
                    speakText(translations[resources.language].ttsEnabled);
                } else {
                    speechSynthesis.cancel(); // Stop any ongoing speech
                    notify("info", translations[resources.language].ttsDisabled); // Use notify to show it's disabled
                }
            }

            function toggleLanguage() {
                resources.language = resources.language === 'en' ? 'vi' : 'en';
                updateDisplay(); // This will call updateTextContent()
                loadNewQuestion(); // Reload quiz question in new language
                saveGame(1); // Save the language setting silently
                speakText(resources.language === 'en' ? "Language set to English." : "Ngôn ngữ đã được đặt thành Tiếng Việt.");
            }

            function notifySuccess() {
                notify("success", translations[resources.language].gameSaved);
            }

            function autoSave() {
                saveGame(1);
                notifySuccess();
            }

            function gameLoop() {
                resources.wood.count += resources.wood.perSecond / 10;
                resources.stone.count += resources.stone.perSecond / 10;
                resources.iron.count += resources.iron.perSecond / 10;
                resources.alloy.count += resources.alloy.perSecond / 10;
                resources.circuitry.count += resources.circuitry.perSecond / 10;
                resources.aiCore.count += resources.aiCore.perSecond / 10;
                resources.consciousness.count += resources.consciousness.perSecond / 10;
                resources.realityShard.count += resources.realityShard.perSecond / 10;
                resources.paradox.count += resources.paradox.perSecond / 10;
                resources.singularity.count += resources.singularity.perSecond / 10;
                resources.multiverse.count += resources.multiverse.perSecond / 10;
                resources.omniscience.count += resources.omniscience.perSecond / 10;
                resources.genesis.count += resources.genesis.perSecond / 10;
                resources.void.count += resources.void.perSecond / 10;
                resources.theAll.count += resources.theAll.perSecond / 10;
                resources.transcendence.count += resources.transcendence.perSecond / 10;
                resources.theAbsolute.count += resources.theAbsolute.perSecond / 10;
                resources.theEnd.count += resources.theEnd.perSecond / 10;
                resources.theNewBeginning.count += resources.theNewBeginning.perSecond / 10;
                resources.theArchitectsWill.count += resources.theArchitectsWill.perSecond / 10;
                resources.theOmniverse.count += resources.theOmniverse.perSecond / 10;
                resources.theBoundlessVoid.count += resources.theBoundlessVoid.perSecond / 10;
                resources.cosmicFabric.count += resources.cosmicFabric.perSecond / 10;
                resources.infiniteNexus.count += resources.infiniteNexus.perSecond / 10;
                resources.eternalEcho.count += resources.eternalEcho.perSecond / 10;
                resources.zenithOfCreation.count += resources.zenithOfCreation.perSecond / 10;
                resources.universalSingularity.count += resources.universalSingularity.perSecond / 10;
                resources.existentialFabric.count += resources.existentialFabric.perSecond / 10;
                resources.temporalFlux.count += resources.temporalFlux.perSecond / 10;
                resources.multidimensionalHarmony.count += resources.multidimensionalHarmony.perSecond / 10;
                resources.cosmicAwakening.count += resources.cosmicAwakening.perSecond / 10;
                resources.divineSpark.count += resources.divineSpark.perSecond / 10;
                // Stage 5
                resources.cosmicDust.count += resources.cosmicDust.perSecond / 10;
                resources.stellarNucleus.count += resources.stellarNucleus.perSecond / 10;
                resources.galacticCore.count += resources.galacticCore.perSecond / 10;
                // Stage 6
                resources.quantumEntanglement.count += resources.quantumEntanglement.perSecond / 10;
                resources.dimensionalRift.count += resources.dimensionalRift.perSecond / 10;
                resources.realityAnchor.count += resources.realityAnchor.perSecond / 10;
                // Stage 7
                resources.omniEnergy.count += resources.omniEnergy.perSecond / 10;
                resources.primeMover.count += resources.primeMover.perSecond / 10;
                resources.trueCreator.count += resources.trueCreator.perSecond / 10;
                // Stage 8
                resources.cosmicSingularity.count += resources.cosmicSingularity.perSecond / 10;
                resources.existentialTruth.count += resources.existentialTruth.perSecond / 10;
                resources.theUltimateForm.count += resources.theUltimateForm.perSecond / 10;

                updateDisplay();
            }

            // Define the order of resources from earliest to latest
            const resourceOrder = [
                'wood', 'stone', 'iron', 'alloy', 'circuitry', 'aiCore', 'consciousness',
                'realityShard', 'paradox', 'singularity', 'multiverse', 'omniscience',
                'genesis', 'void', 'theAll', 'transcendence', 'theAbsolute', 'theEnd',
                'theNewBeginning', 'theArchitectsWill', 'theOmniverse', 'theBoundlessVoid',
                'cosmicFabric', 'infiniteNexus', 'eternalEcho', 'zenithOfCreation',
                'universalSingularity', 'existentialFabric', 'temporalFlux',
                'multidimensionalHarmony', 'cosmicAwakening', 'divineSpark',
                'cosmicDust', 'stellarNucleus', 'galacticCore',
                'quantumEntanglement', 'dimensionalRift', 'realityAnchor',
                'omniEnergy', 'primeMover', 'trueCreator',
                'cosmicSingularity', 'existentialTruth', 'theUltimateForm'
            ];

            /**
             * Finds the newest (most advanced) resource that the player currently owns at least 1 unit of.
             * @returns {string|null} The key of the newest owned resource, or null if no resource is owned.
             */
            function findNewestOwnedResource() {
                // Iterate through the resourceOrder array in reverse to find the newest owned resource
                for (let i = resourceOrder.length - 1; i >= 0; i--) {
                    const resourceKey = resourceOrder[i];
                    if (resources[resourceKey] && resources[resourceKey].count >= 1) {
                        return resourceKey;
                    }
                }
                return null; // Return null if no resource is owned
            }

            // --- Star Clicker Feature Initialization ---
            const clickableStar = document.getElementById('clickableStar');
            let starSpawnIntervalId; // To store the interval ID for spawning stars
            let starTimeoutId; // To store the timeout ID for hiding the star

            const STAR_SPAWN_DURATION = 30 * 1000; // 30 seconds
            const STAR_DISPLAY_DURATION = 5 * 1000; // Increased to 100 seconds

            function spawnStar() {
              //  console.log('Spawning star (new cycle). Current interval ID:', starSpawnIntervalId);
                // Ensure previous star is hidden if it wasn't clicked
              //  console.log('  Calling hideStar() from spawnStar() to clear previous star.');
                hideStar();

                // Get viewport dimensions
                const viewportWidth = window.innerWidth;
                const viewportHeight = window.innerHeight;

                // Get star dimensions (approximate, or measure if needed)
                const starWidth = clickableStar.offsetWidth || 64;
                const starHeight = clickableStar.offsetHeight || 64;

                // Calculate max coordinates to keep star fully within viewport
                const maxX = viewportWidth - starWidth;
                const maxY = viewportHeight - starHeight;

                // Generate random position
                // Ensure it's not too close to the edges where UI elements might be
                const padding = 100; // Example padding to avoid main UI areas
                const randomX = Math.random() * (maxX - 2 * padding) + padding;
                const randomY = Math.random() * (maxY - 2 * padding) + padding;


                clickableStar.style.left = `${randomX}px`;
                clickableStar.style.top = `${randomY}px`;
                clickableStar.style.display = 'block';
                clickableStar.style.opacity = '1';
              //  console.log(`Star spawned at: top=${randomY}px, left=${randomX}px`);

                // Set a timeout to hide the star if not clicked within STAR_DISPLAY_DURATION
           //     console.log(`  Setting timeout to hide star in ${STAR_DISPLAY_DURATION / 1000} seconds.`);
                starTimeoutId = setTimeout(hideStar, STAR_DISPLAY_DURATION);
            }

            function hideStar() {
               // console.log('Hiding star function called.');
                if (starTimeoutId) {
                   // console.log('  Clearing existing starTimeoutId:', starTimeoutId);
                    clearTimeout(starTimeoutId); // Clear any pending hide timeout
                    starTimeoutId = null; // Set to null after clearing
                }
                clickableStar.style.opacity = '0';
                // Use a small delay for display: none to allow transition to complete
                setTimeout(() => {
                    clickableStar.style.display = 'none';
                   // console.log('  Star display set to none after transition.');
                }, 5000); // Match CSS transition duration
            }

            /**
             * Hides the star immediately after a click, with a shorter transition.
             */
            function hideStarOnClick() {
            //    console.log('hideStarOnClick function called.');
                if (starTimeoutId) {
                   // console.log('  Clearing existing starTimeoutId from hideStarOnClick:', starTimeoutId);
                    clearTimeout(starTimeoutId); // Clear any pending hide timeout
                    starTimeoutId = null;
                }
                clickableStar.style.opacity = '0';
                // Use a shorter delay for display: none for immediate click feedback
                setTimeout(() => {
                    clickableStar.style.display = 'none';
                  //  console.log('  Star display set to none after click transition (500ms).');
                }, 500); // Shorter duration for click
            }


            function handleStarClick() {
           //     console.log('Star clicked! (User interaction)');
                const newestResourceKey = findNewestOwnedResource();
                // Default to 'wood' if no resources are owned yet
                const resourceToAwardKey = newestResourceKey || 'wood';
                const resourceToAward = resources[resourceToAwardKey];

                if (!resourceToAward) {
                    console.error(`Error: Resource '${resourceToAwardKey}' not found in resources object.`);
                    notify("error", translations[resources.language].starClickedNotificationError); // Add error translation
                    hideStarOnClick();
                    return;
                }

              //  console.log(`  Before click: ${resourceToAwardKey} count: ${resourceToAward.count}, perSecond: ${resourceToAward.perSecond}`);

                resourceToAward.count += 1; // Add 1 to the count
                resourceToAward.perSecond += 0.1; // Add 0.1 to perSecond

                // Format the resource name for display (e.g., 'divineSpark' -> 'Divine Spark')
                const displayResourceName = translations[resources.language][`${resourceToAwardKey}Title`]; // Get translated resource name
                notify("success", translations[resources.language].starClickedNotification);
               // console.log('  Calling hideStarOnClick() from handleStarClick().');
                hideStarOnClick(); // Hide the star immediately on click with shorter timeout
                updateDisplay();
                saveGame(1); // Call saveGame with 1 to prevent the alert
            //    console.log(`  After click: ${resourceToAwardKey} count: ${resourceToAward.count}, perSecond: ${resourceToAward.perSecond}`);
            }

            // Add starClickedNotificationError to translations
            translations.en.starClickedNotificationError = "An error occurred while awarding star bonus. Please check console.";
            translations.vi.starClickedNotificationError = "Đã xảy ra lỗi khi trao thưởng sao. Vui lòng kiểm tra console.";


            clickableStar.addEventListener('click', handleStarClick);
document.addEventListener('keydown', (event) => {

    if(event.key === 's') {

        // do the thing you're wanting to do
    ttsToggleBtn.click();

    }
   else if(event.key === 'l') {

        // do the thing you're wanting to do
languageToggleBtn.click();
    }


});

            // Public interface for the game
            return {
                init: () => {
                    // Event Listeners
                    addWoodButton.addEventListener('click', addWood);
                    upgradeChopPowerButton.addEventListener('click', upgradeChopPower);
                    buyWoodPerSecondButton.addEventListener('click', buyWoodPerSecondAutomation);

                    buyStoneButton.addEventListener('click', () => buyResource('stone', 'wood'));
                    buyIronButton.addEventListener('click', () => buyResource('iron', 'stone'));
                    buyAlloyButton.addEventListener('click', () => buyResource('alloy', 'iron'));
                    buyCircuitryButton.addEventListener('click', () => buyResource('circuitry', 'alloy'));
                    buyAICoreButton.addEventListener('click', () => buyResource('aiCore', 'circuitry'));
                    buyConsciousnessButton.addEventListener('click', () => buyResource('consciousness', 'aiCore'));
                    buyRealityShardButton.addEventListener('click', () => buyResource('realityShard', 'consciousness'));
                    buyParadoxButton.addEventListener('click', () => buyResource('paradox', 'realityShard'));
                    buySingularityButton.addEventListener('click', () => buyResource('singularity', 'paradox'));
                    buyMultiverseButton.addEventListener('click', () => buyResource('multiverse', 'singularity'));
                    buyOmniscienceButton.addEventListener('click', () => buyResource('omniscience', 'multiverse'));
                    buyGenesisButton.addEventListener('click', () => buyResource('genesis', 'omniscience'));
                    buyVoidButton.addEventListener('click', () => buyResource('void', 'genesis'));
                    buyTheAllButton.addEventListener('click', () => buyResource('theAll', 'void'));
                    buyTranscendenceButton.addEventListener('click', () => buyResource('transcendence', 'theAll'));
                    buyTheAbsoluteButton.addEventListener('click', () => buyResource('theAbsolute', 'transcendence'));
                    buyTheEndButton.addEventListener('click', () => buyResource('theEnd', 'theAbsolute'));
                    buyTheNewBeginningButton.addEventListener('click', () => buyResource('theNewBeginning', 'theEnd'));
                    buyTheArchitectsWillButton.addEventListener('click', () => buyResource('theArchitectsWill', 'theNewBeginning'));
                    buyTheOmniverseButton.addEventListener('click', () => buyResource('theOmniverse', 'theArchitectsWill'));
                    buyTheBoundlessVoidButton.addEventListener('click', () => buyResource('theBoundlessVoid', 'theOmniverse'));
                    buyCosmicFabricButton.addEventListener('click', () => buyResource('cosmicFabric', 'theBoundlessVoid'));
                    buyInfiniteNexusButton.addEventListener('click', () => buyResource('infiniteNexus', 'cosmicFabric'));
                    buyEternalEchoButton.addEventListener('click', () => buyResource('eternalEcho', 'infiniteNexus'));
                    buyZenithOfCreationButton.addEventListener('click', () => buyResource('zenithOfCreation', 'eternalEcho'));
                    buyUniversalSingularityButton.addEventListener('click', () => buyResource('universalSingularity', 'zenithOfCreation'));
                    buyExistentialFabricButton.addEventListener('click', () => buyResource('existentialFabric', 'universalSingularity'));
                    buyTemporalFluxButton.addEventListener('click', () => buyResource('temporalFlux', 'existentialFabric'));
                    buyMultidimensionalHarmonyButton.addEventListener('click', () => buyResource('multidimensionalHarmony', 'temporalFlux'));
                    buyCosmicAwakeningButton.addEventListener('click', () => buyResource('cosmicAwakening', 'multidimensionalHarmony'));
                    buyDivineSparkButton.addEventListener('click', () => buyResource('divineSpark', 'cosmicAwakening'));
                    // Stage 5 Event Listeners
                    buyCosmicDustButton.addEventListener('click', () => buyResource('cosmicDust', 'divineSpark'));
                    buyStellarNucleusButton.addEventListener('click', () => buyResource('stellarNucleus', 'cosmicDust'));
                    buyGalacticCoreButton.addEventListener('click', () => buyResource('galacticCore', 'stellarNucleus'));
                    // Stage 6 Event Listeners
                    buyQuantumEntanglementButton.addEventListener('click', () => buyResource('quantumEntanglement', 'galacticCore'));
                    buyDimensionalRiftButton.addEventListener('click', () => buyResource('dimensionalRift', 'quantumEntanglement'));
                    buyRealityAnchorButton.addEventListener('click', () => buyResource('realityAnchor', 'dimensionalRift'));
                    // Stage 7 Event Listeners
                    buyOmniEnergyButton.addEventListener('click', () => buyResource('omniEnergy', 'realityAnchor'));
                    buyPrimeMoverButton.addEventListener('click', () => buyResource('primeMover', 'omniEnergy'));
                    buyTrueCreatorButton.addEventListener('click', () => buyResource('trueCreator', 'primeMover'));
                    // Stage 8 Event Listeners
                    buyCosmicSingularityButton.addEventListener('click', () => buyResource('cosmicSingularity', 'trueCreator'));
                    buyExistentialTruthButton.addEventListener('click', () => buyResource('existentialTruth', 'cosmicSingularity'));
                    buyTheUltimateFormButton.addEventListener('click', () => buyResource('theUltimateForm', 'existentialTruth'));


                    saveGameBtn.addEventListener('click', () => saveGame(0));
                    loadGameBtn.addEventListener('click', loadGame);
                    closeCriticalFeedbackButton.addEventListener('click', dismissCriticalFeedback);
                    document.addEventListener('keydown', handleCheatCode);

                    submitQuizAnswerButton.addEventListener('click', checkAnswer);
                    quizAnswerInput.addEventListener('keydown', (event) => {
                        if (event.key === 'Enter') {
                            checkAnswer();
                        }
                    });

                    ttsToggleBtn.addEventListener('click', toggleTextToSpeech);
                    languageToggleBtn.addEventListener('click', toggleLanguage); // New language toggle listener

                    const isGitHubPages = window.location.hostname.includes('xxx.io') || window.location.hostname.includes('xxx.com');
                    if (isGitHubPages) {
                        loreButtons.forEach(button => {
                            button.style.display = 'none';
                            const loreDisplayElement = loreDisplays[button.dataset.resource];
                            if (loreDisplayElement) {
                                loreDisplayElement.style.display = 'none';
                            }
                        });
                    } else {
                        loreButtons.forEach(button => {
                            button.addEventListener('click', () => {
                                const resourceName = button.dataset.resource;
                                const loreDisplayElement = loreDisplays[resourceName];
                                generateLore(resourceName, loreDisplayElement);
                            });
                        });
                    }

                    // Start the initial star spawning interval
                    starSpawnIntervalId = setInterval(spawnStar, STAR_SPAWN_DURATION);
                    // --- End Star Clicker Feature Initialization ---


                    // Start game loops
                    setInterval(gameLoop, 100);
                    setInterval(updateTimePlayed, 1000);
                    setInterval(autoSave, 30000);

                    // Initial setup
                    updateDisplay(); // Call once to set initial text and values
                    loadGame();
                    loadNewQuestion();
                },
                // Expose specific functions if needed for external interaction, e.g., for testing
                getWoodCount: () => resources.wood.count,
                addWoodExternal: (amount) => { resources.wood.count += amount; updateDisplay(); },
                setAPIKey: (apiKey) => {resources.apiKey = apiKey;},
                findNewestOwnedResource: findNewestOwnedResource // Expose the new function
            };
        })();

        // Initialize the game
        game.init();
    </script>
</body>
</html>
